{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var ElementType = require(\"domelementtype\"),\n    DomUtils = module.exports;\n\nvar isTag = DomUtils.isTag = ElementType.isTag;\n\nfunction getChildren(elem){\n\treturn elem.children;\n}\nfunction getParent(elem){\n\treturn elem.parent;\n}\nfunction getSiblings(elem){\n\tvar parent = getParent(elem);\n\treturn parent ? getChildren(parent) : [elem];\n}\nfunction getAttributeValue(elem, name){\n\treturn elem.attribs && elem.attribs[name];\n}\nfunction hasAttrib(elem, name){\n\treturn hasOwnProperty.call(elem.attribs, name);\n}\nfunction getName(elem){\n\treturn elem.name;\n}\n\nDomUtils.getChildren = getChildren;\nDomUtils.getParent = getParent;\nDomUtils.getAttributeValue = getAttributeValue;\nDomUtils.hasAttrib = hasAttrib;\nDomUtils.getName = getName;\nDomUtils.getSiblings = getSiblings;\n\nfunction find(test, arr, recurse, limit){\n\tvar result = [], childs;\n\n\tfor(var i = 0, j = arr.length; i < j; i++){\n\t\tif(test(arr[i])){\n\t\t\tresult.push(arr[i]);\n\t\t\tif(--limit <= 0) break;\n\t\t}\n\n\t\tchilds = getChildren(arr[i]);\n\t\tif(recurse && childs && childs.length > 0){\n\t\t\tchilds = find(test, childs, recurse, limit);\n\t\t\tresult = result.concat(childs);\n\t\t\tlimit -= childs.length;\n\t\t\tif(limit <= 0) break;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction findOneChild(test, arr){\n\tfor(var i = 0, l = arr.length; i < l; i++){\n\t\tif(test(arr[i])) return arr[i];\n\t}\n\n\treturn null;\n}\n\nfunction findOne(test, arr){\n\tvar elem = null;\n\n\tfor(var i = 0, l = arr.length; i < l && !elem; i++){\n\t\tif(test(arr[i])){\n\t\t\telem = arr[i];\n\t\t} else if(arr[i].children && arr[i].children.length > 0){\n\t\t\telem = findOne(test, arr[i].children);\n\t\t}\n\t}\n\n\treturn elem;\n}\n\nDomUtils.findOne = findOne;\n\nfunction findAll(test, elems){\n\tvar result = [];\n\tfor(var i = 0, j = elems.length; i < j; i++){\n\t\tif(test(elems[i])) result.push(elems[i]);\n\n\t\tvar childs = getChildren(elems[i]);\n\t\tif(childs && childs.length){\n\t\t\tresult = result.concat(findAll(test, childs));\n\t\t}\n\t}\n\treturn result;\n}\n\nDomUtils.findAll = findAll;\n\nfunction filter(test, element, recurse, limit){\n\tif(!Array.isArray(element)) element = [element];\n\n\tif(typeof limit !== \"number\" || !isFinite(limit)){\n\t\tif(recurse === false){\n\t\t\treturn element.filter(test);\n\t\t} else {\n\t\t\treturn findAll(test, element);\n\t\t}\n\t} else if(limit === 1){\n\t\tif(recurse === false){\n\t\t\telement = findOneChild(test, element);\n\t\t} else {\n\t\t\telement = findOne(test, element);\n\t\t}\n\t\treturn element ? [element] : [];\n\t} else {\n\t\treturn find(test, element, recurse !== false, limit);\n\t}\n}\n\nDomUtils.filter = filter;\n\nDomUtils.testElement = function(options, element){\n\tfor(var key in options){\n\t\tif(!options.hasOwnProperty(key));\n\t\telse if(key === \"tag_name\"){\n\t\t\tif(!isTag(element) || !options.tag_name(element.name)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(key === \"tag_type\"){\n\t\t\tif(!options.tag_type(element.type)) return false;\n\t\t} else if(key === \"tag_contains\"){\n\t\t\tif(isTag(element) || !options.tag_contains(element.data)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(!element.attribs || !options[key](element.attribs[key])){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\nvar Checks = {\n\ttag_name: function(name){\n\t\tif(typeof name === \"function\"){ \n\t\t\treturn function(elem){ return isTag(elem) && name(elem.name); };\n\t\t} else if(name === \"*\"){\n\t\t\treturn isTag;\n\t\t} else {\n\t\t\treturn function(elem){ return isTag(elem) && elem.name === name; };\n\t\t}\n\t},\n\ttag_type: function(type){\n\t\tif(typeof type === \"function\"){\n\t\t\treturn function(elem){ return type(elem.type); };\n\t\t} else {\n\t\t\treturn function(elem){ return elem.type === type; };\n\t\t}\n\t},\n\ttag_contains: function(data){\n\t\tif(typeof type === \"function\"){\n\t\t\treturn function(elem){ return !isTag(elem) && data(elem.data); };\n\t\t} else {\n\t\t\treturn function(elem){ return !isTag(elem) && elem.data === data; };\n\t\t}\n\t}\n};\n\nfunction getAttribCheck(attrib, value){\n\tif(typeof value === \"function\"){\n\t\treturn function(elem){ return elem.attribs && value(elem.attribs[attrib]); };\n\t} else {\n\t\treturn function(elem){ return elem.attribs && elem.attribs[attrib] === value; };\n\t}\n}\n\nDomUtils.getElements = function(options, element, recurse, limit){\n\tvar funcs = [];\n\tfor(var key in options){\n\t\tif(options.hasOwnProperty(key)){\n\t\t\tif(key in Checks) funcs.push(Checks[key](options[key]));\n\t\t\telse funcs.push(getAttribCheck(key, options[key]));\n\t\t}\n\t}\n\n\tif(funcs.length === 0) return [];\n\tif(funcs.length === 1) return filter(funcs[0], element, recurse, limit);\n\treturn filter(\n\t\tfunction(elem){\n\t\t\treturn funcs.some(function(func){ return func(elem); });\n\t\t},\n\t\telement, recurse, limit\n\t);\n};\n\nDomUtils.getElementById = function(id, element, recurse){\n\tif(!Array.isArray(element)) element = [element];\n\treturn findOne(getAttribCheck(\"id\", id), element, recurse !== false);\n};\n\nDomUtils.getElementsByTagName = function(name, element, recurse, limit){\n\treturn filter(Checks.tag_name(name), element, recurse, limit);\n};\n\nDomUtils.getElementsByTagType = function(type, element, recurse, limit){\n\treturn filter(Checks.tag_type(type), element, recurse, limit);\n};\n\nDomUtils.removeElement = function(elem){\n\tif(elem.prev) elem.prev.next = elem.next;\n\tif(elem.next) elem.next.prev = elem.prev;\n\n\tif(elem.parent){\n\t\tvar childs = elem.parent.children;\n\t\tchilds.splice(childs.lastIndexOf(elem), 1);\n\t}\n};\n\nDomUtils.replaceElement = function(elem, replacement){\n\tif(elem.prev){\n\t\telem.prev.next = replacement;\n\t\treplacement.prev = elem.prev;\n\t}\n\tif(elem.next){\n\t\telem.next.prev = replacement;\n\t\treplacement.next = elem.next;\n\t}\n\tif(elem.parent){\n\t\tvar childs = elem.parent.children;\n\t\tchilds.splice(childs.lastIndexOf(elem), 1, replacement);\n\t\treplacement.parent = elem.parent;\n\t}\n};\n\nDomUtils.getInnerHTML = function(elem){\n\tif(!elem.children) return \"\";\n\n\tvar childs = elem.children,\n\t\tchildNum = childs.length,\n\t\tret = \"\";\n\n\tfor(var i = 0; i < childNum; i++){\n\t\tret += DomUtils.getOuterHTML(childs[i]);\n\t}\n\n\treturn ret;\n};\n\n//boolean attributes without a value (taken from MatthewMueller/cheerio)\nvar booleanAttribs = {\n\t__proto__: null,\n\tasync: true,\n\tautofocus: true,\n\tautoplay: true,\n\tchecked: true,\n\tcontrols: true,\n\tdefer: true,\n\tdisabled: true,\n\thidden: true,\n\tloop: true,\n\tmultiple: true,\n\topen: true,\n\treadonly: true,\n\trequired: true,\n\tscoped: true,\n\tselected: true,\n\t\"/\": true //TODO when is this required?\n};\n\nvar emptyTags = {\n\t__proto__: null,\n\tarea: true,\n\tbase: true,\n\tbasefont: true,\n\tbr: true,\n\tcol: true,\n\tframe: true,\n\thr: true,\n\timg: true,\n\tinput: true,\n\tisindex: true,\n\tlink: true,\n\tmeta: true,\n\tparam: true,\n\tembed: true\n};\n\nDomUtils.getOuterHTML = function(elem){\n\tvar type = elem.type;\n\n\tif(type === ElementType.Text) return elem.data;\n\tif(type === ElementType.Comment) return \"<!--\" + elem.data + \"-->\";\n\tif(type === ElementType.Directive) return \"<\" + elem.data + \">\";\n\tif(type === ElementType.CDATA) return \"<!CDATA \" + DomUtils.getInnerHTML(elem) + \"]]>\";\n\n\tvar ret = \"<\" + elem.name;\n\tif(\"attribs\" in elem){\n\t\tfor(var attr in elem.attribs){\n\t\t\tif(elem.attribs.hasOwnProperty(attr)){\n\t\t\t\tret += \" \" + attr;\n\t\t\t\tvar value = elem.attribs[attr];\n\t\t\t\tif(!value){\n\t\t\t\t\tif( !(attr in booleanAttribs) ){\n\t\t\t\t\t\tret += '=\"\"';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tret += '=\"' + value + '\"';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (elem.name in emptyTags && elem.children.length === 0) {\n\t\treturn ret + \" />\";\n\t} else {\n\t\treturn ret + \">\" + DomUtils.getInnerHTML(elem) + \"</\" + elem.name + \">\";\n\t}\n};\n\nDomUtils.getText = function getText(elem){\n\tif(Array.isArray(elem)) return elem.map(getText).join(\"\");\n\tif(isTag(elem) || elem.type === ElementType.CDATA) return getText(elem.children);\n\tif(elem.type === ElementType.Text) return elem.data;\n\treturn \"\";\n};\n"]}
{"version":3,"sources":["CollectingHandler.js"],"names":[],"mappings":"AAAA,OAAO,OAAP,GAAiB,iBAAjB;;AAEA,SAAS,iBAAT,CAA2B,GAA3B,EAA+B;AAC9B,MAAK,IAAL,GAAY,OAAO,EAAnB;AACA,MAAK,MAAL,GAAc,EAAd;AACA;;AAED,IAAI,SAAS,QAAQ,IAAR,EAAc,MAA3B;AACA,OAAO,IAAP,CAAY,MAAZ,EAAoB,OAApB,CAA4B,UAAS,IAAT,EAAc;AACzC,KAAG,OAAO,IAAP,MAAiB,CAApB,EAAsB;AACrB,SAAO,OAAO,IAAd;AACA,oBAAkB,SAAlB,CAA4B,IAA5B,IAAoC,YAAU;AAC7C,QAAK,MAAL,CAAY,IAAZ,CAAiB,CAAC,IAAD,CAAjB;AACA,OAAG,KAAK,IAAL,CAAU,IAAV,CAAH,EAAoB,KAAK,IAAL,CAAU,IAAV;AACpB,GAHD;AAIA,EAND,MAMO,IAAG,OAAO,IAAP,MAAiB,CAApB,EAAsB;AAC5B,SAAO,OAAO,IAAd;AACA,oBAAkB,SAAlB,CAA4B,IAA5B,IAAoC,UAAS,CAAT,EAAW;AAC9C,QAAK,MAAL,CAAY,IAAZ,CAAiB,CAAC,IAAD,EAAO,CAAP,CAAjB;AACA,OAAG,KAAK,IAAL,CAAU,IAAV,CAAH,EAAoB,KAAK,IAAL,CAAU,IAAV,EAAgB,CAAhB;AACpB,GAHD;AAIA,EANM,MAMA,IAAG,OAAO,IAAP,MAAiB,CAApB,EAAsB;AAC5B,SAAO,OAAO,IAAd;AACA,oBAAkB,SAAlB,CAA4B,IAA5B,IAAoC,UAAS,CAAT,EAAY,CAAZ,EAAc;AACjD,QAAK,MAAL,CAAY,IAAZ,CAAiB,CAAC,IAAD,EAAO,CAAP,EAAU,CAAV,CAAjB;AACA,OAAG,KAAK,IAAL,CAAU,IAAV,CAAH,EAAoB,KAAK,IAAL,CAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAnB;AACpB,GAHD;AAIA,EANM,MAMA;AACN,QAAM,MAAM,2BAAN,CAAN;AACA;AACD,CAtBD;;AAwBA,kBAAkB,SAAlB,CAA4B,OAA5B,GAAsC,YAAU;AAC/C,MAAK,MAAL,GAAc,EAAd;AACA,KAAG,KAAK,IAAL,CAAU,OAAb,EAAsB,KAAK,IAAL,CAAU,OAAV;AACtB,CAHD;;AAKA,kBAAkB,SAAlB,CAA4B,OAA5B,GAAsC,YAAU;AAC/C,KAAG,KAAK,IAAL,CAAU,OAAb,EAAsB,KAAK,IAAL,CAAU,OAAV;;AAEtB,MAAI,IAAI,IAAI,CAAR,EAAW,MAAM,KAAK,MAAL,CAAY,MAAjC,EAAyC,IAAI,GAA7C,EAAkD,GAAlD,EAAsD;AACrD,MAAG,KAAK,IAAL,CAAU,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,CAAV,CAAH,EAAgC;;AAE/B,OAAI,MAAM,KAAK,MAAL,CAAY,CAAZ,EAAe,MAAzB;;AAEA,OAAG,QAAQ,CAAX,EAAa;AACZ,SAAK,IAAL,CAAU,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,CAAV;AACA,IAFD,MAEO,IAAG,QAAQ,CAAX,EAAa;AACnB,SAAK,IAAL,CAAU,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,CAAV,EAA6B,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,CAA7B;AACA,IAFM,MAEA;AACN,SAAK,IAAL,CAAU,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,CAAV,EAA6B,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,CAA7B,EAAgD,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,CAAhD;AACA;AACD;AACD;AACD,CAjBD","file":"CollectingHandler-compiled.js","sourcesContent":["module.exports = CollectingHandler;\n\nfunction CollectingHandler(cbs){\n\tthis._cbs = cbs ||Â {};\n\tthis.events = [];\n}\n\nvar EVENTS = require(\"./\").EVENTS;\nObject.keys(EVENTS).forEach(function(name){\n\tif(EVENTS[name] === 0){\n\t\tname = \"on\" + name;\n\t\tCollectingHandler.prototype[name] = function(){\n\t\t\tthis.events.push([name]);\n\t\t\tif(this._cbs[name]) this._cbs[name]();\n\t\t};\n\t} else if(EVENTS[name] === 1){\n\t\tname = \"on\" + name;\n\t\tCollectingHandler.prototype[name] = function(a){\n\t\t\tthis.events.push([name, a]);\n\t\t\tif(this._cbs[name]) this._cbs[name](a);\n\t\t};\n\t} else if(EVENTS[name] === 2){\n\t\tname = \"on\" + name;\n\t\tCollectingHandler.prototype[name] = function(a, b){\n\t\t\tthis.events.push([name, a, b]);\n\t\t\tif(this._cbs[name]) this._cbs[name](a, b);\n\t\t};\n\t} else {\n\t\tthrow Error(\"wrong number of arguments\");\n\t}\n});\n\nCollectingHandler.prototype.onreset = function(){\n\tthis.events = [];\n\tif(this._cbs.onreset) this._cbs.onreset();\n};\n\nCollectingHandler.prototype.restart = function(){\n\tif(this._cbs.onreset) this._cbs.onreset();\n\n\tfor(var i = 0, len = this.events.length; i < len; i++){\n\t\tif(this._cbs[this.events[i][0]]){\n\n\t\t\tvar num = this.events[i].length;\n\n\t\t\tif(num === 1){\n\t\t\t\tthis._cbs[this.events[i][0]]();\n\t\t\t} else if(num === 2){\n\t\t\t\tthis._cbs[this.events[i][0]](this.events[i][1]);\n\t\t\t} else {\n\t\t\t\tthis._cbs[this.events[i][0]](this.events[i][1], this.events[i][2]);\n\t\t\t}\n\t\t}\n\t}\n};"]}
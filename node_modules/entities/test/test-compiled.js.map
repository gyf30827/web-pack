{"version":3,"sources":["test.js"],"names":[],"mappings":"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","file":"test-compiled.js","sourcesContent":["var assert = require(\"assert\"),\n    path = require(\"path\"),\n    entities = require(\"../\");\n\ndescribe(\"Encode->decode test\", function(){\n\tvar testcases = [\n\t\t{\n\t\t\tinput: \"asdf & ÿ ü '\",\n\t\t\txml: \"asdf &amp; &#xFF; &#xFC; &apos;\",\n\t\t\thtml: \"asdf &amp; &yuml; &uuml; &apos;\"\n\t\t}, {\n\t\t\tinput: \"&#38;\",\n\t\t\txml: \"&amp;#38;\",\n\t\t\thtml: \"&amp;&num;38&semi;\"\n\t\t},\n\t];\n\ttestcases.forEach(function(tc) {\n\t\tvar encodedXML = entities.encodeXML(tc.input);\n\t\tit(\"should XML encode \" + tc.input, function(){\n\t\t\tassert.equal(encodedXML, tc.xml);\n\t\t});\n\t\tit(\"should default to XML encode \" + tc.input, function(){\n\t\t\tassert.equal(entities.encode(tc.input), tc.xml);\n\t\t});\n\t\tit(\"should XML decode \" + encodedXML, function(){\n\t\t\tassert.equal(entities.decodeXML(encodedXML), tc.input);\n\t\t});\n\t\tit(\"should default to XML encode \" + encodedXML, function(){\n\t\t\tassert.equal(entities.decode(encodedXML), tc.input);\n\t\t});\n\t\tit(\"should default strict to XML encode \" + encodedXML, function(){\n\t\t\tassert.equal(entities.decodeStrict(encodedXML), tc.input);\n\t\t});\n\n\t\tvar encodedHTML5 = entities.encodeHTML5(tc.input);\n\t\tit(\"should HTML5 encode \" + tc.input, function(){\n\t\t\tassert.equal(encodedHTML5, tc.html);\n\t\t});\n\t\tit(\"should HTML5 decode \" + encodedHTML5, function(){\n\t\t\tassert.equal(entities.decodeHTML(encodedHTML5), tc.input);\n\t\t});\n\t});\n\n\tit(\"should encode data URIs (issue 16)\", function(){\n\t\tvar data = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAALAAABAAEAAAIBRAA7\";\n\t\tassert.equal(entities.decode(entities.encode(data)), data);\n\t});\n});\n\ndescribe(\"Decode test\", function(){\n\tvar testcases = [\n\t\t{ input: \"&amp;amp;\",  output: \"&amp;\" },\n\t\t{ input: \"&amp;#38;\",  output: \"&#38;\" },\n\t\t{ input: \"&amp;#x26;\", output: \"&#x26;\" },\n\t\t{ input: \"&amp;#X26;\", output: \"&#X26;\" },\n\t\t{ input: \"&#38;#38;\",  output: \"&#38;\" },\n\t\t{ input: \"&#x26;#38;\", output: \"&#38;\" },\n\t\t{ input: \"&#X26;#38;\", output: \"&#38;\" },\n\t\t{ input: \"&#x3a;\",     output: \":\" },\n\t\t{ input: \"&#x3A;\",     output: \":\" },\n\t\t{ input: \"&#X3a;\",     output: \":\" },\n\t\t{ input: \"&#X3A;\",     output: \":\" }\n\t];\n\ttestcases.forEach(function(tc) {\n\t\tit(\"should XML decode \" + tc.input, function(){\n\t\t\tassert.equal(entities.decodeXML(tc.input), tc.output);\n\t\t});\n\t\tit(\"should HTML4 decode \" + tc.input, function(){\n\t\t\tassert.equal(entities.decodeHTML(tc.input), tc.output);\n\t\t});\n\t\tit(\"should HTML5 decode \" + tc.input, function(){\n\t\t\tassert.equal(entities.decodeHTML(tc.input), tc.output);\n\t\t});\n\t});\n});\n\nvar levels = [\"xml\", \"entities\"];\n\ndescribe(\"Documents\", function(){\n\tlevels\n\t.map(function(n){ return path.join(\"..\", \"maps\", n); })\n\t.map(require)\n\t.forEach(function(doc, i){\n\t\tdescribe(\"Decode\", function(){\n\t\t\tit(levels[i], function(){\n\t\t\t\tObject.keys(doc).forEach(function(e){\n\t\t\t\t\tfor(var l = i; l < levels.length; l++){\n\t\t\t\t\t\tassert.equal(entities.decode(\"&\" + e + \";\", l), doc[e]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tdescribe(\"Decode strict\", function(){\n\t\t\tit(levels[i], function(){\n\t\t\t\tObject.keys(doc).forEach(function(e){\n\t\t\t\t\tfor(var l = i; l < levels.length; l++){\n\t\t\t\t\t\tassert.equal(entities.decodeStrict(\"&\" + e + \";\", l), doc[e]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tdescribe(\"Encode\", function(){\n\t\t\tit(levels[i], function(){\n\t\t\t\tObject.keys(doc).forEach(function(e){\n\t\t\t\t\tfor(var l = i; l < levels.length; l++){\n\t\t\t\t\t\tassert.equal(entities.decode(entities.encode(doc[e], l), l), doc[e]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\tvar legacy = require(\"../maps/legacy.json\");\n\n\tdescribe(\"Legacy\", function(){\n\t\tit(\"should decode\", runLegacy);\n\t});\n\n\tfunction runLegacy(){\n\t\tObject.keys(legacy).forEach(function(e){\n\t\t\tassert.equal(entities.decodeHTML(\"&\" + e), legacy[e]);\n\t\t});\n\t}\n});\n\nvar astral = {\n\t\"1D306\": \"\\uD834\\uDF06\",\n\t\"1D11E\": \"\\uD834\\uDD1E\"\n};\n\nvar astralSpecial = {\n\t\"80\":    \"\\u20AC\",\n\t\"110000\": \"\\uFFFD\"\n};\n\n\ndescribe(\"Astral entities\", function(){\n\tObject.keys(astral).forEach(function(c){\n\t\tit(\"should decode \" + astral[c], function(){\n\t\t\tassert.equal(entities.decode(\"&#x\" + c + \";\"), astral[c]);\n\t\t});\n\n\t\tit(\"should encode \" + astral[c], function(){\n\t\t\tassert.equal(entities.encode(astral[c]), \"&#x\" + c + \";\");\n\t\t});\n\n\t\tit(\"should escape \" + astral[c], function(){\n\t\t\tassert.equal(entities.escape(astral[c]), \"&#x\" + c + \";\");\n\t\t});\n\t});\n\n\tObject.keys(astralSpecial).forEach(function(c){\n\t\tit(\"special should decode \\\\u\" + c, function(){\n\t\t\tassert.equal(entities.decode(\"&#x\" + c + \";\"), astralSpecial[c]);\n\t\t});\n\t});\n});\n\ndescribe(\"Escape\", function(){\n\tit(\"should always decode ASCII chars\", function(){\n\t\tfor(var i = 0; i < 0x7F; i++){\n\t\t\tvar c = String.fromCharCode(i);\n\t\t\tassert.equal(entities.decodeXML(entities.escape(c)), c);\n\t\t}\n\t});\n});\n"]}
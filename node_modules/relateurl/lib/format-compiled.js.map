{"version":3,"sources":["format.js"],"names":[],"mappings":"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","file":"format-compiled.js","sourcesContent":["\"use strict\";\n\nvar constants = require(\"./constants\");\n\n\n\nfunction formatAuth(urlObj, options)\n{\n\tif (urlObj.auth && !options.removeAuth && (urlObj.extra.relation.maximumHost || options.output===constants.ABSOLUTE))\n\t{\n\t\treturn urlObj.auth + \"@\";\n\t}\n\t\n\treturn \"\";\n}\n\n\n\nfunction formatHash(urlObj, options)\n{\n\treturn urlObj.hash ? urlObj.hash : \"\";\n}\n\n\n\nfunction formatHost(urlObj, options)\n{\n\tif (urlObj.host.full && (urlObj.extra.relation.maximumAuth || options.output===constants.ABSOLUTE))\n\t{\n\t\treturn urlObj.host.full;\n\t}\n\t\n\treturn \"\";\n}\n\n\n\nfunction formatPath(urlObj, options)\n{\n\tvar str = \"\";\n\t\n\tvar absolutePath = urlObj.path.absolute.string;\n\tvar relativePath = urlObj.path.relative.string;\n\tvar resource = showResource(urlObj, options);\n\t\n\tif (urlObj.extra.relation.maximumHost || options.output===constants.ABSOLUTE || options.output===constants.ROOT_RELATIVE)\n\t{\n\t\tstr = absolutePath;\n\t}\n\telse if (relativePath.length<=absolutePath.length && options.output===constants.SHORTEST || options.output===constants.PATH_RELATIVE)\n\t{\n\t\tstr = relativePath;\n\t\t\n\t\tif (str === \"\")\n\t\t{\n\t\t\tvar query = showQuery(urlObj,options) && !!getQuery(urlObj,options);\n\t\t\t\n\t\t\tif (urlObj.extra.relation.maximumPath && !resource)\n\t\t\t{\n\t\t\t\tstr = \"./\";\n\t\t\t}\n\t\t\telse if (urlObj.extra.relation.overridesQuery && !resource && !query)\n\t\t\t{\n\t\t\t\tstr = \"./\";\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tstr = absolutePath;\n\t}\n\t\n\tif ( str===\"/\" && !resource && options.removeRootTrailingSlash && (!urlObj.extra.relation.minimumPort || options.output===constants.ABSOLUTE) )\n\t{\n\t\tstr = \"\";\n\t}\n\t\n\treturn str;\n}\n\n\n\nfunction formatPort(urlObj, options)\n{\n\tif (urlObj.port && !urlObj.extra.portIsDefault && urlObj.extra.relation.maximumHost)\n\t{\n\t\treturn \":\" + urlObj.port;\n\t}\n\t\n\treturn \"\";\n}\n\n\n\nfunction formatQuery(urlObj, options)\n{\n\treturn showQuery(urlObj,options) ? getQuery(urlObj, options) : \"\";\n}\n\n\n\nfunction formatResource(urlObj, options)\n{\n\treturn showResource(urlObj,options) ? urlObj.resource : \"\";\n}\n\n\n\nfunction formatScheme(urlObj, options)\n{\n\tvar str = \"\";\n\t\n\tif (urlObj.extra.relation.maximumHost || options.output===constants.ABSOLUTE)\n\t{\n\t\tif (!urlObj.extra.relation.minimumScheme || !options.schemeRelative || options.output===constants.ABSOLUTE)\n\t\t{\n\t\t\tstr += urlObj.scheme + \"://\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstr += \"//\";\n\t\t}\n\t}\n\t\n\treturn str;\n}\n\n\n\nfunction formatUrl(urlObj, options)\n{\n\tvar url = \"\";\n\t\n\turl += formatScheme(urlObj, options);\n\turl += formatAuth(urlObj, options);\n\turl += formatHost(urlObj, options);\n\turl += formatPort(urlObj, options);\n\turl += formatPath(urlObj, options);\n\turl += formatResource(urlObj, options);\n\turl += formatQuery(urlObj, options);\n\turl += formatHash(urlObj, options);\n\t\n\treturn url;\n}\n\n\n\nfunction getQuery(urlObj, options)\n{\n\tvar stripQuery = options.removeEmptyQueries && urlObj.extra.relation.minimumPort;\n\t\n\treturn urlObj.query.string[ stripQuery ? \"stripped\" : \"full\" ];\n}\n\n\n\nfunction showQuery(urlObj, options)\n{\n\treturn !urlObj.extra.relation.minimumQuery || options.output===constants.ABSOLUTE || options.output===constants.ROOT_RELATIVE;\n}\n\n\n\nfunction showResource(urlObj, options)\n{\n\tvar removeIndex = options.removeDirectoryIndexes && urlObj.extra.resourceIsIndex;\n\tvar removeMatchingResource = urlObj.extra.relation.minimumResource && options.output!==constants.ABSOLUTE && options.output!==constants.ROOT_RELATIVE;\n\t\n\treturn !!urlObj.resource && !removeMatchingResource && !removeIndex;\n}\n\n\n\nmodule.exports = formatUrl;\n"]}
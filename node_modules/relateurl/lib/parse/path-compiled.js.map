{"version":3,"sources":["path.js"],"names":[],"mappings":"AAAA;;AAEA,SAAS,gBAAT,CAA0B,QAA1B,EAAoC,OAApC,EACA;AACC,KAAI,UAAU,KAAd;;AAEA,SAAQ,gBAAR,CAAyB,KAAzB,CAAgC,UAAS,KAAT,EAChC;AACC,MAAI,UAAU,QAAd,EACA;AACC,aAAU,IAAV;AACA,UAAO,KAAP;AACA;;AAED,SAAO,IAAP;AACA,EATD;;AAWA,QAAO,OAAP;AACA;;AAID,SAAS,SAAT,CAAmB,MAAnB,EAA2B,OAA3B,EACA;AACC,KAAI,OAAO,OAAO,IAAP,CAAY,QAAZ,CAAqB,MAAhC;;AAEA,KAAI,IAAJ,EACA;AACC,MAAI,YAAY,KAAK,WAAL,CAAiB,GAAjB,CAAhB;;AAEA,MAAI,YAAY,CAAC,CAAjB,EACA;AACC,OAAI,EAAE,SAAF,GAAc,KAAK,MAAvB,EACA;AACC,QAAI,WAAW,KAAK,MAAL,CAAY,SAAZ,CAAf;;AAEA,QAAI,aAAW,GAAX,IAAkB,aAAW,IAAjC,EACA;AACC,YAAO,QAAP,GAAkB,QAAlB;AACA,YAAO,KAAK,MAAL,CAAY,CAAZ,EAAe,SAAf,CAAP;AACA,KAJD,MAMA;AACC,aAAQ,GAAR;AACA;AACD;;AAED,UAAO,IAAP,CAAY,QAAZ,CAAqB,MAArB,GAA8B,IAA9B;AACA,UAAO,IAAP,CAAY,QAAZ,CAAqB,KAArB,GAA6B,UAAU,IAAV,CAA7B;AACA,GAnBD,MAoBK,IAAI,SAAO,GAAP,IAAc,SAAO,IAAzB,EACL;AACC;AACA,WAAQ,GAAR;;AAEA,UAAO,IAAP,CAAY,QAAZ,CAAqB,MAArB,GAA8B,IAA9B;AACA,UAAO,IAAP,CAAY,QAAZ,CAAqB,KAArB,GAA6B,UAAU,IAAV,CAA7B;AACA,GAPI,MASL;AACC;AACA,UAAO,QAAP,GAAkB,IAAlB;AACA,UAAO,IAAP,CAAY,QAAZ,CAAqB,MAArB,GAA8B,IAA9B;AACA;;AAED,SAAO,KAAP,CAAa,eAAb,GAA+B,iBAAiB,OAAO,QAAxB,EAAkC,OAAlC,CAA/B;AACA;AACD;AACA;;AAID,SAAS,SAAT,CAAmB,IAAnB,EACA;AACC;AACA,KAAI,SAAS,GAAb,EACA;AACC,MAAI,UAAU,EAAd;;AAEA,OAAK,KAAL,CAAW,GAAX,EAAgB,OAAhB,CAAyB,UAAS,GAAT,EACzB;AACC;AACA,OAAI,QAAQ,EAAZ,EACA;AACC,YAAQ,IAAR,CAAa,GAAb;AACA;AACD,GAPD;;AASA,SAAO,OAAP;AACA,EAdD,MAgBA;AACC;AACA,SAAO,EAAP;AACA;AACD;;AAID,OAAO,OAAP,GAAiB,SAAjB","file":"path-compiled.js","sourcesContent":["\"use strict\";\n\nfunction isDirectoryIndex(resource, options)\n{\n\tvar verdict = false;\n\t\n\toptions.directoryIndexes.every( function(index)\n\t{\n\t\tif (index === resource)\n\t\t{\n\t\t\tverdict = true;\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t});\n\t\n\treturn verdict;\n}\n\n\n\nfunction parsePath(urlObj, options)\n{\n\tvar path = urlObj.path.absolute.string;\n\t\n\tif (path)\n\t{\n\t\tvar lastSlash = path.lastIndexOf(\"/\");\n\t\t\n\t\tif (lastSlash > -1)\n\t\t{\n\t\t\tif (++lastSlash < path.length)\n\t\t\t{\n\t\t\t\tvar resource = path.substr(lastSlash);\n\t\t\t\t\n\t\t\t\tif (resource!==\".\" && resource!==\"..\")\n\t\t\t\t{\n\t\t\t\t\turlObj.resource = resource;\n\t\t\t\t\tpath = path.substr(0, lastSlash);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpath += \"/\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\turlObj.path.absolute.string = path;\n\t\t\turlObj.path.absolute.array = splitPath(path);\n\t\t}\n\t\telse if (path===\".\" || path===\"..\")\n\t\t{\n\t\t\t// \"..?var\", \"..#anchor\", etc ... not \"..index.html\"\n\t\t\tpath += \"/\";\n\t\t\t\n\t\t\turlObj.path.absolute.string = path;\n\t\t\turlObj.path.absolute.array = splitPath(path);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Resource-only\n\t\t\turlObj.resource = path;\n\t\t\turlObj.path.absolute.string = null;\n\t\t}\n\t\t\n\t\turlObj.extra.resourceIsIndex = isDirectoryIndex(urlObj.resource, options);\n\t}\n\t// Else: query/hash-only or empty\n}\n\n\n\nfunction splitPath(path)\n{\n\t// TWEAK :: condition only for speed optimization\n\tif (path !== \"/\")\n\t{\n\t\tvar cleaned = [];\n\t\t\n\t\tpath.split(\"/\").forEach( function(dir)\n\t\t{\n\t\t\t// Cleanup -- splitting \"/dir/\" becomes [\"\",\"dir\",\"\"]\n\t\t\tif (dir !== \"\")\n\t\t\t{\n\t\t\t\tcleaned.push(dir);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn cleaned;\n\t}\n\telse\n\t{\n\t\t// Faster to skip the above block and just create an array\n\t\treturn [];\n\t}\n}\n\n\n\nmodule.exports = parsePath;\n"]}
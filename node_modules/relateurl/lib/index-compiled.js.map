{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,YAAa,QAAQ,aAAR,CAAjB;AACA,IAAI,YAAa,QAAQ,UAAR,CAAjB;AACA,IAAI,aAAa,QAAQ,WAAR,CAAjB;AACA,IAAI,WAAa,QAAQ,eAAR,CAAjB;AACA,IAAI,WAAa,QAAQ,SAAR,CAAjB;AACA,IAAI,YAAa,QAAQ,UAAR,CAAjB;;AAIA,SAAS,SAAT,CAAmB,IAAnB,EAAyB,OAAzB,EACA;AACC,MAAK,OAAL,GAAe,WAAW,OAAX,EACf;AACC,gBAAc,EAAC,KAAI,EAAL,EAAS,MAAK,EAAd,EAAkB,OAAM,GAAxB,EADf;AAEC,oBAAkB,CAAC,YAAD,CAFnB;AAGC,cAAY,KAHb;AAIC,UAAQ,UAAU,QAJnB;AAKC,mBAAiB,CAAC,MAAD,EAAQ,YAAR,EAAqB,QAArB,CALlB;AAMC,cAAY,KANb;AAOC,0BAAwB,IAPzB;AAQC,sBAAoB,KARrB;AASC,2BAAyB,IAT1B;AAUC,kBAAgB,IAVjB;AAWC,QAAM,SAXP;AAYC,qBAAmB;AAZpB,EADe,CAAf;;AAgBA,MAAK,IAAL,GAAY,SAAS,IAAT,CAAc,IAAd,EAAoB,KAAK,OAAzB,EAAkC,IAAlC,CAAZ;AACA;;AAID;;;AAGA,UAAU,SAAV,CAAoB,MAApB,GAA6B,UAAS,IAAT,EAAe,EAAf,EAAmB,OAAnB,EAC7B;AACC;AACA,KAAK,SAAS,aAAT,CAAuB,EAAvB,CAAL,EACA;AACC,YAAU,EAAV;AACA,OAAK,IAAL;AACA,SAAO,IAAP;AACA;AACD;AANA,MAOK,IAAI,CAAC,EAAL,EACL;AACC,QAAK,IAAL;AACA,UAAO,IAAP;AACA;;AAED,WAAU,WAAW,OAAX,EAAoB,KAAK,OAAzB,CAAV;AACA,QAAO,QAAQ,QAAQ,IAAvB;AACA,QAAO,SAAS,IAAT,CAAc,IAAd,EAAoB,OAApB,EAA6B,KAAK,IAAlC,CAAP;;AAEA,KAAI,CAAC,IAAD,IAAS,CAAC,KAAK,IAAnB,EACA;AACC,QAAM,IAAI,KAAJ,CAAU,yBAAV,CAAN;AACA,EAHD,MAIK,IAAI,KAAK,KAAL,CAAW,QAAX,CAAoB,eAAxB,EACL;AACC,QAAM,IAAI,KAAJ,CAAU,0CAAwC,KAAK,IAAvD,CAAN;AACA;;AAED,MAAK,SAAS,EAAT,CAAY,EAAZ,EAAgB,OAAhB,CAAL;;AAEA,KAAI,GAAG,KAAH,KAAW,KAAf,EAAsB,OAAO,GAAG,IAAV;;AAEtB,MAAK,UAAU,IAAV,EAAgB,EAAhB,EAAoB,OAApB,CAAL;AACA,MAAK,UAAU,EAAV,EAAc,OAAd,CAAL;;AAEA,QAAO,EAAP;AACA,CArCD;;AAyCA;;;AAGA,UAAU,MAAV,GAAmB,UAAS,IAAT,EAAe,EAAf,EAAmB,OAAnB,EACnB;AACC,QAAO,IAAI,SAAJ,GAAgB,MAAhB,CAAuB,IAAvB,EAA6B,EAA7B,EAAiC,OAAjC,CAAP;AACA,CAHD;;AAOA;AACA,SAAS,YAAT,CAAsB,SAAtB,EAAiC,SAAjC;;AAIA,OAAO,OAAP,GAAiB,SAAjB","file":"index-compiled.js","sourcesContent":["\"use strict\";\n\nvar constants  = require(\"./constants\");\nvar formatUrl  = require(\"./format\");\nvar getOptions = require(\"./options\");\nvar objUtils   = require(\"./util/object\");\nvar parseUrl   = require(\"./parse\");\nvar relateUrl  = require(\"./relate\");\n\n\n\nfunction RelateUrl(from, options)\n{\n\tthis.options = getOptions(options,\n\t{\n\t\tdefaultPorts: {ftp:21, http:80, https:443},\n\t\tdirectoryIndexes: [\"index.html\"],\n\t\tignore_www: false,\n\t\toutput: RelateUrl.SHORTEST,\n\t\trejectedSchemes: [\"data\",\"javascript\",\"mailto\"],\n\t\tremoveAuth: false,\n\t\tremoveDirectoryIndexes: true,\n\t\tremoveEmptyQueries: false,\n\t\tremoveRootTrailingSlash: true,\n\t\tschemeRelative: true,\n\t\tsite: undefined,\n\t\tslashesDenoteHost: true\n\t});\n\t\n\tthis.from = parseUrl.from(from, this.options, null);\n}\n\n\n\n/*\n\tUsage: instance=new RelateUrl(); instance.relate();\n*/\nRelateUrl.prototype.relate = function(from, to, options)\n{\n\t// relate(to,options)\n\tif ( objUtils.isPlainObject(to) )\n\t{\n\t\toptions = to;\n\t\tto = from;\n\t\tfrom = null;\n\t}\n\t// relate(to)\n\telse if (!to)\n\t{\n\t\tto = from;\n\t\tfrom = null;\n\t}\n\t\n\toptions = getOptions(options, this.options);\n\tfrom = from || options.site;\n\tfrom = parseUrl.from(from, options, this.from);\n\t\n\tif (!from || !from.href)\n\t{\n\t\tthrow new Error(\"from value not defined.\");\n\t}\n\telse if (from.extra.hrefInfo.minimumPathOnly)\n\t{\n\t\tthrow new Error(\"from value supplied is not absolute: \"+from.href);\n\t}\n\t\n\tto = parseUrl.to(to, options);\n\t\n\tif (to.valid===false) return to.href;\n\t\n\tto = relateUrl(from, to, options);\n\tto = formatUrl(to, options);\n\t\n\treturn to;\n}\n\n\n\n/*\n\tUsage: RelateUrl.relate();\n*/\nRelateUrl.relate = function(from, to, options)\n{\n\treturn new RelateUrl().relate(from, to, options);\n}\n\n\n\n// Make constants accessible from API\nobjUtils.shallowMerge(RelateUrl, constants);\n\n\n\nmodule.exports = RelateUrl;\n"]}
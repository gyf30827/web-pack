{"version":3,"sources":["relativize.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,YAAY,QAAQ,cAAR,CAAhB;;AAIA;;;AAGA,SAAS,UAAT,CAAoB,YAApB,EAAkC,gBAAlC,EACA;AACC,KAAI,eAAe,EAAnB;;AAEA;AACA,KAAI,UAAU,IAAd;AACA,KAAI,cAAc,CAAC,CAAnB;;AAEA;AACA,kBAAiB,OAAjB,CAA0B,UAAS,eAAT,EAA0B,CAA1B,EAC1B;AACC,MAAI,OAAJ,EACA;AACC,OAAI,aAAa,CAAb,MAAoB,eAAxB,EACA;AACC,cAAU,KAAV;AACA,IAHD,MAKA;AACC,kBAAc,CAAd;AACA;AACD;;AAED,MAAI,CAAC,OAAL,EACA;AACC;AACA,gBAAa,IAAb,CAAkB,IAAlB;AACA;AACD,EAnBD;;AAqBA;AACA,cAAa,OAAb,CAAsB,UAAS,GAAT,EAAc,CAAd,EACtB;AACC,MAAI,IAAI,WAAR,EACA;AACC,gBAAa,IAAb,CAAkB,GAAlB;AACA;AACD,EAND;;AAQA,QAAO,YAAP;AACA;;AAID,SAAS,UAAT,CAAoB,MAApB,EAA4B,UAA5B,EAAwC,OAAxC,EACA;AACC,KAAI,OAAO,KAAP,CAAa,QAAb,CAAsB,aAA1B,EACA;AACC,MAAI,YAAY,WAAW,OAAO,IAAP,CAAY,QAAZ,CAAqB,KAAhC,EAAuC,WAAW,IAAX,CAAgB,QAAhB,CAAyB,KAAhE,CAAhB;;AAEA,SAAO,IAAP,CAAY,QAAZ,CAAqB,KAArB,GAA8B,SAA9B;AACA,SAAO,IAAP,CAAY,QAAZ,CAAqB,MAArB,GAA8B,UAAU,IAAV,CAAe,SAAf,CAA9B;AACA;AACD;;AAID,OAAO,OAAP,GAAiB,UAAjB","file":"relativize-compiled.js","sourcesContent":["\"use strict\";\n\nvar pathUtils = require(\"../util/path\");\n\n\n\n/*\n\tGet a path relative to the site path.\n*/\nfunction relatePath(absolutePath, siteAbsolutePath)\n{\n\tvar relativePath = [];\n\t\n\t// At this point, it's related to the host/port\n\tvar related = true;\n\tvar parentIndex = -1;\n\t\n\t// Find parents\n\tsiteAbsolutePath.forEach( function(siteAbsoluteDir, i)\n\t{\n\t\tif (related)\n\t\t{\n\t\t\tif (absolutePath[i] !== siteAbsoluteDir)\n\t\t\t{\n\t\t\t\trelated = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparentIndex = i;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (!related)\n\t\t{\n\t\t\t// Up one level\n\t\t\trelativePath.push(\"..\");\n\t\t}\n\t});\n\t\n\t// Form path\n\tabsolutePath.forEach( function(dir, i)\n\t{\n\t\tif (i > parentIndex)\n\t\t{\n\t\t\trelativePath.push(dir);\n\t\t}\n\t});\n\t\n\treturn relativePath;\n}\n\n\n\nfunction relativize(urlObj, siteUrlObj, options)\n{\n\tif (urlObj.extra.relation.minimumScheme)\n\t{\n\t\tvar pathArray = relatePath(urlObj.path.absolute.array, siteUrlObj.path.absolute.array);\n\t\t\n\t\turlObj.path.relative.array  = pathArray;\n\t\turlObj.path.relative.string = pathUtils.join(pathArray);\n\t}\n}\n\n\n\nmodule.exports = relativize;\n"]}
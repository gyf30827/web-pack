{"version":3,"sources":["attributes.js"],"names":[],"mappings":"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","file":"attributes-compiled.js","sourcesContent":["var DomUtils  = require(\"domutils\"),\n    hasAttrib = DomUtils.hasAttrib,\n    getAttributeValue = DomUtils.getAttributeValue,\n    falseFunc = require(\"boolbase\").falseFunc;\n\n//https://github.com/slevithan/XRegExp/blob/master/src/xregexp.js#L469\nvar reChars = /[-[\\]{}()*+?.,\\\\^$|#\\s]/g;\n\n/*\n\tattribute selectors\n*/\n\nvar attributeRules = {\n\t__proto__: null,\n\tequals: function(next, data){\n\t\tvar name  = data.name,\n\t\t    value = data.value;\n\n\t\tif(data.ignoreCase){\n\t\t\tvalue = value.toLowerCase();\n\n\t\t\treturn function equalsIC(elem){\n\t\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\t\treturn attr != null && attr.toLowerCase() === value && next(elem);\n\t\t\t};\n\t\t}\n\n\t\treturn function equals(elem){\n\t\t\treturn getAttributeValue(elem, name) === value && next(elem);\n\t\t};\n\t},\n\thyphen: function(next, data){\n\t\tvar name  = data.name,\n\t\t    value = data.value,\n\t\t    len = value.length;\n\n\t\tif(data.ignoreCase){\n\t\t\tvalue = value.toLowerCase();\n\n\t\t\treturn function hyphenIC(elem){\n\t\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\t\treturn attr != null &&\n\t\t\t\t\t\t(attr.length === len || attr.charAt(len) === \"-\") &&\n\t\t\t\t\t\tattr.substr(0, len).toLowerCase() === value &&\n\t\t\t\t\t\tnext(elem);\n\t\t\t};\n\t\t}\n\n\t\treturn function hyphen(elem){\n\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\treturn attr != null &&\n\t\t\t\t\tattr.substr(0, len) === value &&\n\t\t\t\t\t(attr.length === len || attr.charAt(len) === \"-\") &&\n\t\t\t\t\tnext(elem);\n\t\t};\n\t},\n\telement: function(next, data){\n\t\tvar name = data.name,\n\t\t    value = data.value;\n\n\t\tif(/\\s/.test(value)){\n\t\t\treturn falseFunc;\n\t\t}\n\n\t\tvalue = value.replace(reChars, \"\\\\$&\");\n\n\t\tvar pattern = \"(?:^|\\\\s)\" + value + \"(?:$|\\\\s)\",\n\t\t    flags = data.ignoreCase ? \"i\" : \"\",\n\t\t    regex = new RegExp(pattern, flags);\n\n\t\treturn function element(elem){\n\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\treturn attr != null && regex.test(attr) && next(elem);\n\t\t};\n\t},\n\texists: function(next, data){\n\t\tvar name = data.name;\n\t\treturn function exists(elem){\n\t\t\treturn hasAttrib(elem, name) && next(elem);\n\t\t};\n\t},\n\tstart: function(next, data){\n\t\tvar name  = data.name,\n\t\t    value = data.value,\n\t\t    len = value.length;\n\n\t\tif(len === 0){\n\t\t\treturn falseFunc;\n\t\t}\n\t\t\n\t\tif(data.ignoreCase){\n\t\t\tvalue = value.toLowerCase();\n\n\t\t\treturn function startIC(elem){\n\t\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\t\treturn attr != null && attr.substr(0, len).toLowerCase() === value && next(elem);\n\t\t\t};\n\t\t}\n\n\t\treturn function start(elem){\n\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\treturn attr != null && attr.substr(0, len) === value && next(elem);\n\t\t};\n\t},\n\tend: function(next, data){\n\t\tvar name  = data.name,\n\t\t    value = data.value,\n\t\t    len   = -value.length;\n\n\t\tif(len === 0){\n\t\t\treturn falseFunc;\n\t\t}\n\n\t\tif(data.ignoreCase){\n\t\t\tvalue = value.toLowerCase();\n\n\t\t\treturn function endIC(elem){\n\t\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\t\treturn attr != null && attr.substr(len).toLowerCase() === value && next(elem);\n\t\t\t};\n\t\t}\n\n\t\treturn function end(elem){\n\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\treturn attr != null && attr.substr(len) === value && next(elem);\n\t\t};\n\t},\n\tany: function(next, data){\n\t\tvar name  = data.name,\n\t\t    value = data.value;\n\n\t\tif(value === \"\"){\n\t\t\treturn falseFunc;\n\t\t}\n\n\t\tif(data.ignoreCase){\n\t\t\tvar regex = new RegExp(value.replace(reChars, \"\\\\$&\"), \"i\");\n\n\t\t\treturn function anyIC(elem){\n\t\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\t\treturn attr != null && regex.test(attr) && next(elem);\n\t\t\t};\n\t\t}\n\n\t\treturn function any(elem){\n\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\treturn attr != null && attr.indexOf(value) >= 0 && next(elem);\n\t\t};\n\t},\n\tnot: function(next, data){\n\t\tvar name  = data.name,\n\t\t    value = data.value;\n\n\t\tif(value === \"\"){\n\t\t\treturn function notEmpty(elem){\n\t\t\t\treturn !!getAttributeValue(elem, name) && next(elem);\n\t\t\t};\n\t\t} else if(data.ignoreCase){\n\t\t\tvalue = value.toLowerCase();\n\n\t\t\treturn function notIC(elem){\n\t\t\t\tvar attr = getAttributeValue(elem, name);\n\t\t\t\treturn attr != null && attr.toLowerCase() !== value && next(elem);\n\t\t\t};\n\t\t}\n\n\t\treturn function not(elem){\n\t\t\treturn getAttributeValue(elem, name) !== value && next(elem);\n\t\t};\n\t}\n};\n\nmodule.exports = {\n\tcompile: function(next, data, options){\n\t\tif(options && options.strict && (\n\t\t\tdata.ignoreCase || data.action === \"not\"\n\t\t)) throw SyntaxError(\"Unsupported attribute selector\");\n\t\treturn attributeRules[data.action](next, data);\n\t},\n\trules: attributeRules\n};\n"]}
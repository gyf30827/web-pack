{"version":3,"sources":["general.js"],"names":[],"mappings":"AAAA,IAAI,WAAc,QAAQ,UAAR,CAAlB;AAAA,IACI,QAAc,SAAS,KAD3B;AAAA,IAEI,YAAc,SAAS,SAF3B;AAAA,IAGI,cAAc,SAAS,WAH3B;AAAA,IAII,cAAc,SAAS,WAJ3B;AAAA,IAKI,UAAc,SAAS,OAL3B;;AAOA;;;AAGA,OAAO,OAAP,GAAiB;AAChB,YAAW,IADK;;AAGhB,YAAW,QAAQ,iBAAR,EAA2B,OAHtB;AAIhB,SAAQ,QAAQ,cAAR,EAAwB,OAJhB;;AAMhB;AACA,MAAK,UAAS,IAAT,EAAe,IAAf,EAAoB;AACxB,MAAI,OAAO,KAAK,IAAhB;AACA,SAAO,SAAS,GAAT,CAAa,IAAb,EAAkB;AACxB,UAAO,QAAQ,IAAR,MAAkB,IAAlB,IAA0B,KAAK,IAAL,CAAjC;AACA,GAFD;AAGA,EAZe;;AAchB;AACA,aAAY,UAAS,IAAT,EAAe,IAAf,EAAqB,OAArB,EAA8B,OAA9B,EAAuC,UAAvC,EAAkD;AAC7D,SAAO,SAAS,UAAT,CAAoB,IAApB,EAAyB;;AAE/B,OAAI,cAAc,KAAK,IAAL,CAAlB,EAA8B,OAAO,IAAP;;AAE9B,OAAI,QAAQ,KAAZ;;AAEA,UAAM,CAAC,KAAD,KAAW,OAAO,UAAU,IAAV,CAAlB,CAAN,EAAyC;AACxC,YAAQ,KAAK,IAAL,CAAR;AACA;;AAED,UAAO,KAAP;AACA,GAXD;AAYA,EA5Be;AA6BhB,SAAQ,UAAS,IAAT,EAAe,IAAf,EAAqB,OAArB,EAA6B;AACpC,MAAG,WAAW,QAAQ,MAAtB,EAA8B,MAAM,YAAY,oCAAZ,CAAN;;AAE9B,SAAO,SAAS,MAAT,CAAgB,IAAhB,EAAqB;AAC3B,UAAO,YAAY,IAAZ,EAAkB,IAAlB,CAAuB,IAAvB,CAAP;AACA,GAFD;;AAIA,WAAS,IAAT,CAAc,IAAd,EAAmB;AAClB,UAAO,MAAM,IAAN,KAAe,KAAK,IAAL,CAAtB;AACA;AACD,EAvCe;AAwChB,QAAO,UAAS,IAAT,EAAc;AACpB,SAAO,SAAS,KAAT,CAAe,IAAf,EAAoB;AAC1B,OAAI,SAAS,UAAU,IAAV,CAAb;AACA,UAAO,CAAC,CAAC,MAAF,IAAY,KAAK,MAAL,CAAnB;AACA,GAHD;AAIA,EA7Ce;AA8ChB,UAAS,UAAS,IAAT,EAAc;AACtB,SAAO,SAAS,OAAT,CAAiB,IAAjB,EAAsB;AAC5B,OAAI,WAAW,YAAY,IAAZ,CAAf;;AAEA,QAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,SAAS,MAA5B,EAAoC,GAApC,EAAwC;AACvC,QAAG,MAAM,SAAS,CAAT,CAAN,CAAH,EAAsB;AACrB,SAAG,SAAS,CAAT,MAAgB,IAAnB,EAAyB;AACzB,SAAG,KAAK,SAAS,CAAT,CAAL,CAAH,EAAsB,OAAO,IAAP;AACtB;AACD;;AAED,UAAO,KAAP;AACA,GAXD;AAYA,EA3De;AA4DhB,WAAU,UAAS,IAAT,EAAc;AACvB,SAAO,SAAS,QAAT,CAAkB,IAAlB,EAAuB;AAC7B,OAAI,WAAW,YAAY,IAAZ,CAAf;AAAA,OACI,WADJ;;AAGA,QAAI,IAAI,IAAI,CAAZ,EAAe,IAAI,SAAS,MAA5B,EAAoC,GAApC,EAAwC;AACvC,QAAG,MAAM,SAAS,CAAT,CAAN,CAAH,EAAsB;AACrB,SAAG,SAAS,CAAT,MAAgB,IAAnB,EAAyB;AACzB,mBAAc,SAAS,CAAT,CAAd;AACA;AACD;;AAED,UAAO,CAAC,CAAC,WAAF,IAAiB,KAAK,WAAL,CAAxB;AACA,GAZD;AAaA,EA1Ee;AA2EhB,YAAW,UAAS,IAAT,EAAc;AACxB,SAAO,IAAP;AACA;AA7Ee,CAAjB","file":"general-compiled.js","sourcesContent":["var DomUtils    = require(\"domutils\"),\n    isTag       = DomUtils.isTag,\n    getParent   = DomUtils.getParent,\n    getChildren = DomUtils.getChildren,\n    getSiblings = DomUtils.getSiblings,\n    getName     = DomUtils.getName;\n\n/*\n\tall available rules\n*/\nmodule.exports = {\n\t__proto__: null,\n\n\tattribute: require(\"./attributes.js\").compile,\n\tpseudo: require(\"./pseudos.js\").compile,\n\n\t//tags\n\ttag: function(next, data){\n\t\tvar name = data.name;\n\t\treturn function tag(elem){\n\t\t\treturn getName(elem) === name && next(elem);\n\t\t};\n\t},\n\n\t//traversal\n\tdescendant: function(next, rule, options, context, acceptSelf){\n\t\treturn function descendant(elem){\n\n\t\t\tif (acceptSelf && next(elem)) return true;\n\n\t\t\tvar found = false;\n\n\t\t\twhile(!found && (elem = getParent(elem))){\n\t\t\t\tfound = next(elem);\n\t\t\t}\n\n\t\t\treturn found;\n\t\t};\n\t},\n\tparent: function(next, data, options){\n\t\tif(options && options.strict) throw SyntaxError(\"Parent selector isn't part of CSS3\");\n\n\t\treturn function parent(elem){\n\t\t\treturn getChildren(elem).some(test);\n\t\t};\n\n\t\tfunction test(elem){\n\t\t\treturn isTag(elem) && next(elem);\n\t\t}\n\t},\n\tchild: function(next){\n\t\treturn function child(elem){\n\t\t\tvar parent = getParent(elem);\n\t\t\treturn !!parent && next(parent);\n\t\t};\n\t},\n\tsibling: function(next){\n\t\treturn function sibling(elem){\n\t\t\tvar siblings = getSiblings(elem);\n\n\t\t\tfor(var i = 0; i < siblings.length; i++){\n\t\t\t\tif(isTag(siblings[i])){\n\t\t\t\t\tif(siblings[i] === elem) break;\n\t\t\t\t\tif(next(siblings[i])) return true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\t},\n\tadjacent: function(next){\n\t\treturn function adjacent(elem){\n\t\t\tvar siblings = getSiblings(elem),\n\t\t\t    lastElement;\n\n\t\t\tfor(var i = 0; i < siblings.length; i++){\n\t\t\t\tif(isTag(siblings[i])){\n\t\t\t\t\tif(siblings[i] === elem) break;\n\t\t\t\t\tlastElement = siblings[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn !!lastElement && next(lastElement);\n\t\t};\n\t},\n\tuniversal: function(next){\n\t\treturn next;\n\t}\n};"]}
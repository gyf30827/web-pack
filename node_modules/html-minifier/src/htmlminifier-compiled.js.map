{"version":3,"sources":["htmlminifier.js"],"names":[],"mappings":"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","file":"htmlminifier-compiled.js","sourcesContent":["'use strict';\n\nvar CleanCSS = require('clean-css');\nvar decode = require('he').decode;\nvar HTMLParser = require('./htmlparser').HTMLParser;\nvar RelateUrl = require('relateurl');\nvar TokenChain = require('./tokenchain');\nvar UglifyJS = require('uglify-js');\nvar utils = require('./utils');\n\nfunction trimWhitespace(str) {\n  if (typeof str !== 'string') {\n    return str;\n  }\n  return str.replace(/^[ \\n\\r\\t\\f]+/, '').replace(/[ \\n\\r\\t\\f]+$/, '');\n}\n\nfunction collapseWhitespaceAll(str) {\n  // Non-breaking space is specifically handled inside the replacer function here:\n  return str && str.replace(/[ \\n\\r\\t\\f\\xA0]+/g, function(spaces) {\n    return spaces === '\\t' ? '\\t' : spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  });\n}\n\nfunction collapseWhitespace(str, options, trimLeft, trimRight, collapseAll) {\n  var lineBreakBefore = '', lineBreakAfter = '';\n\n  if (options.preserveLineBreaks) {\n    str = str.replace(/^[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*/, function() {\n      lineBreakBefore = '\\n';\n      return '';\n    }).replace(/[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*$/, function() {\n      lineBreakAfter = '\\n';\n      return '';\n    });\n  }\n\n  if (trimLeft) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/^[ \\n\\r\\t\\f\\xA0]+/, function(spaces) {\n      var conservative = !lineBreakBefore && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/^[^\\xA0]+/, '').replace(/(\\xA0+)[^\\xA0]+/g, '$1 ') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (trimRight) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/[ \\n\\r\\t\\f\\xA0]+$/, function(spaces) {\n      var conservative = !lineBreakAfter && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/[^\\xA0]+(\\xA0+)/g, ' $1').replace(/[^\\xA0]+$/, '') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (collapseAll) {\n    // strip non space whitespace then compress spaces to one\n    str = collapseWhitespaceAll(str);\n  }\n\n  return lineBreakBefore + str + lineBreakAfter;\n}\n\nvar createMapFromString = utils.createMapFromString;\n// non-empty tags that will maintain whitespace around them\nvar inlineTags = createMapFromString('a,abbr,acronym,b,bdi,bdo,big,button,cite,code,del,dfn,em,font,i,ins,kbd,mark,math,nobr,q,rt,rp,s,samp,small,span,strike,strong,sub,sup,svg,time,tt,u,var');\n// non-empty tags that will maintain whitespace within them\nvar inlineTextTags = createMapFromString('a,abbr,acronym,b,big,del,em,font,i,ins,kbd,mark,nobr,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var');\n// self-closing tags that will maintain whitespace around them\nvar selfClosingInlineTags = createMapFromString('comment,img,input,wbr');\n\nfunction collapseWhitespaceSmart(str, prevTag, nextTag, options) {\n  var trimLeft = prevTag && !selfClosingInlineTags(prevTag);\n  if (trimLeft && !options.collapseInlineTagWhitespace) {\n    trimLeft = prevTag.charAt(0) === '/' ? !inlineTags(prevTag.slice(1)) : !inlineTextTags(prevTag);\n  }\n  var trimRight = nextTag && !selfClosingInlineTags(nextTag);\n  if (trimRight && !options.collapseInlineTagWhitespace) {\n    trimRight = nextTag.charAt(0) === '/' ? !inlineTextTags(nextTag.slice(1)) : !inlineTags(nextTag);\n  }\n  return collapseWhitespace(str, options, trimLeft, trimRight, prevTag && nextTag);\n}\n\nfunction isConditionalComment(text) {\n  return /^\\[if\\s[^\\]]+]|\\[endif]$/.test(text);\n}\n\nfunction isIgnoredComment(text, options) {\n  for (var i = 0, len = options.ignoreCustomComments.length; i < len; i++) {\n    if (options.ignoreCustomComments[i].test(text)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isEventAttribute(attrName, options) {\n  var patterns = options.customEventAttributes;\n  if (patterns) {\n    for (var i = patterns.length; i--;) {\n      if (patterns[i].test(attrName)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return /^on[a-z]{3,}$/.test(attrName);\n}\n\nfunction canRemoveAttributeQuotes(value) {\n  // http://mathiasbynens.be/notes/unquoted-attribute-values\n  return /^[^ \\t\\n\\f\\r\"'`=<>]+$/.test(value);\n}\n\nfunction attributesInclude(attributes, attribute) {\n  for (var i = attributes.length; i--;) {\n    if (attributes[i].name.toLowerCase() === attribute) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isAttributeRedundant(tag, attrName, attrValue, attrs) {\n  attrValue = attrValue ? trimWhitespace(attrValue.toLowerCase()) : '';\n\n  return (\n    tag === 'script' &&\n    attrName === 'language' &&\n    attrValue === 'javascript' ||\n\n    tag === 'form' &&\n    attrName === 'method' &&\n    attrValue === 'get' ||\n\n    tag === 'input' &&\n    attrName === 'type' &&\n    attrValue === 'text' ||\n\n    tag === 'script' &&\n    attrName === 'charset' &&\n    !attributesInclude(attrs, 'src') ||\n\n    tag === 'a' &&\n    attrName === 'name' &&\n    attributesInclude(attrs, 'id') ||\n\n    tag === 'area' &&\n    attrName === 'shape' &&\n    attrValue === 'rect'\n  );\n}\n\n// https://mathiasbynens.be/demo/javascript-mime-type\n// https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-type\nvar executableScriptsMimetypes = utils.createMap([\n  'text/javascript',\n  'text/ecmascript',\n  'text/jscript',\n  'application/javascript',\n  'application/x-javascript',\n  'application/ecmascript'\n]);\n\nfunction isScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return attrValue === '' || executableScriptsMimetypes(attrValue);\n}\n\nfunction isExecutableScript(tag, attrs) {\n  if (tag !== 'script') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isScriptTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\n\nfunction isStyleLinkTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue).toLowerCase();\n  return attrValue === '' || attrValue === 'text/css';\n}\n\nfunction isStyleSheet(tag, attrs) {\n  if (tag !== 'style') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isStyleLinkTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\n\nvar isSimpleBoolean = createMapFromString('allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible');\nvar isBooleanValue = createMapFromString('true,false');\n\nfunction isBooleanAttribute(attrName, attrValue) {\n  return isSimpleBoolean(attrName) || attrName === 'draggable' && !isBooleanValue(attrValue);\n}\n\nfunction isUriTypeAttribute(attrName, tag) {\n  return (\n    /^(?:a|area|link|base)$/.test(tag) && attrName === 'href' ||\n    tag === 'img' && /^(?:src|longdesc|usemap)$/.test(attrName) ||\n    tag === 'object' && /^(?:classid|codebase|data|usemap)$/.test(attrName) ||\n    tag === 'q' && attrName === 'cite' ||\n    tag === 'blockquote' && attrName === 'cite' ||\n    (tag === 'ins' || tag === 'del') && attrName === 'cite' ||\n    tag === 'form' && attrName === 'action' ||\n    tag === 'input' && (attrName === 'src' || attrName === 'usemap') ||\n    tag === 'head' && attrName === 'profile' ||\n    tag === 'script' && (attrName === 'src' || attrName === 'for')\n  );\n}\n\nfunction isNumberTypeAttribute(attrName, tag) {\n  return (\n    /^(?:a|area|object|button)$/.test(tag) && attrName === 'tabindex' ||\n    tag === 'input' && (attrName === 'maxlength' || attrName === 'tabindex') ||\n    tag === 'select' && (attrName === 'size' || attrName === 'tabindex') ||\n    tag === 'textarea' && /^(?:rows|cols|tabindex)$/.test(attrName) ||\n    tag === 'colgroup' && attrName === 'span' ||\n    tag === 'col' && attrName === 'span' ||\n    (tag === 'th' || tag === 'td') && (attrName === 'rowspan' || attrName === 'colspan')\n  );\n}\n\nfunction isLinkType(tag, attrs, value) {\n  if (tag !== 'link') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'rel' && attrs[i].value === value) {\n      return true;\n    }\n  }\n}\n\nfunction isMediaQuery(tag, attrs, attrName) {\n  return attrName === 'media' && (isLinkType(tag, attrs, 'stylesheet') || isStyleSheet(tag, attrs));\n}\n\nvar srcsetTags = createMapFromString('img,source');\n\nfunction isSrcset(attrName, tag) {\n  return attrName === 'srcset' && srcsetTags(tag);\n}\n\nfunction cleanAttributeValue(tag, attrName, attrValue, options, attrs) {\n  if (attrValue && isEventAttribute(attrName, options)) {\n    attrValue = trimWhitespace(attrValue).replace(/^javascript:\\s*/i, '');\n    return options.minifyJS(attrValue, true);\n  }\n  else if (attrName === 'class') {\n    attrValue = trimWhitespace(attrValue);\n    if (options.sortClassName) {\n      attrValue = options.sortClassName(attrValue);\n    }\n    else {\n      attrValue = collapseWhitespaceAll(attrValue);\n    }\n    return attrValue;\n  }\n  else if (isUriTypeAttribute(attrName, tag)) {\n    attrValue = trimWhitespace(attrValue);\n    return isLinkType(tag, attrs, 'canonical') ? attrValue : options.minifyURLs(attrValue);\n  }\n  else if (isNumberTypeAttribute(attrName, tag)) {\n    return trimWhitespace(attrValue);\n  }\n  else if (attrName === 'style') {\n    attrValue = trimWhitespace(attrValue);\n    if (attrValue) {\n      if (/;$/.test(attrValue) && !/&#?[0-9a-zA-Z]+;$/.test(attrValue)) {\n        attrValue = attrValue.replace(/\\s*;$/, ';');\n      }\n      attrValue = unwrapInlineCSS(options.minifyCSS(wrapInlineCSS(attrValue)));\n    }\n    return attrValue;\n  }\n  else if (isSrcset(attrName, tag)) {\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset\n    attrValue = trimWhitespace(attrValue).split(/\\s+,\\s*|\\s*,\\s+/).map(function(candidate) {\n      var url = candidate;\n      var descriptor = '';\n      var match = candidate.match(/\\s+([1-9][0-9]*w|[0-9]+(?:\\.[0-9]+)?x)$/);\n      if (match) {\n        url = url.slice(0, -match[0].length);\n        var num = +match[1].slice(0, -1);\n        var suffix = match[1].slice(-1);\n        if (num !== 1 || suffix !== 'x') {\n          descriptor = ' ' + num + suffix;\n        }\n      }\n      return options.minifyURLs(url) + descriptor;\n    }).join(', ');\n  }\n  else if (isMetaViewport(tag, attrs) && attrName === 'content') {\n    attrValue = attrValue.replace(/\\s+/g, '').replace(/[0-9]+\\.[0-9]+/g, function(numString) {\n      // \"0.90000\" -> \"0.9\"\n      // \"1.0\" -> \"1\"\n      // \"1.0001\" -> \"1.0001\" (unchanged)\n      return (+numString).toString();\n    });\n  }\n  else if (attrValue && options.customAttrCollapse && options.customAttrCollapse.test(attrName)) {\n    attrValue = attrValue.replace(/\\n+|\\r+|\\s{2,}/g, '');\n  }\n  else if (tag === 'script' && attrName === 'type') {\n    attrValue = trimWhitespace(attrValue.replace(/\\s*;\\s*/g, ';'));\n  }\n  else if (isMediaQuery(tag, attrs, attrName)) {\n    attrValue = trimWhitespace(attrValue);\n    return unwrapMediaQuery(options.minifyCSS(wrapMediaQuery(attrValue)));\n  }\n  return attrValue;\n}\n\nfunction isMetaViewport(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'name' && attrs[i].value === 'viewport') {\n      return true;\n    }\n  }\n}\n\n// Wrap CSS declarations for CleanCSS > 3.x\n// See https://github.com/jakubpawlowicz/clean-css/issues/418\nfunction wrapInlineCSS(text) {\n  return '*{' + text + '}';\n}\n\nfunction unwrapInlineCSS(text) {\n  var matches = text.match(/^\\*\\{([\\s\\S]*)\\}$/);\n  return matches ? matches[1] : text;\n}\n\nfunction wrapMediaQuery(text) {\n  return '@media ' + text + '{a{top:0}}';\n}\n\nfunction unwrapMediaQuery(text) {\n  var matches = text.match(/^@media ([\\s\\S]*?)\\s*{[\\s\\S]*}$/);\n  return matches ? matches[1] : text;\n}\n\nfunction cleanConditionalComment(comment, options) {\n  return options.processConditionalComments ? comment.replace(/^(\\[if\\s[^\\]]+]>)([\\s\\S]*?)(<!\\[endif])$/, function(match, prefix, text, suffix) {\n    return prefix + minify(text, options, true) + suffix;\n  }) : comment;\n}\n\nfunction processScript(text, options, currentAttrs) {\n  for (var i = 0, len = currentAttrs.length; i < len; i++) {\n    if (currentAttrs[i].name.toLowerCase() === 'type' &&\n        options.processScripts.indexOf(currentAttrs[i].value) > -1) {\n      return minify(text, options);\n    }\n  }\n  return text;\n}\n\n// Tag omission rules from https://html.spec.whatwg.org/multipage/syntax.html#optional-tags\n// with the following deviations:\n// - retain <body> if followed by <noscript>\n// - </rb>, </rt>, </rtc>, </rp> & </tfoot> follow http://www.w3.org/TR/html5/syntax.html#optional-tags\n// - retain all tags which are adjacent to non-standard HTML tags\nvar optionalStartTags = createMapFromString('html,head,body,colgroup,tbody');\nvar optionalEndTags = createMapFromString('html,head,body,li,dt,dd,p,rb,rt,rtc,rp,optgroup,option,colgroup,caption,thead,tbody,tfoot,tr,td,th');\nvar headerTags = createMapFromString('meta,link,script,style,template,noscript');\nvar descriptionTags = createMapFromString('dt,dd');\nvar pBlockTags = createMapFromString('address,article,aside,blockquote,details,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,main,menu,nav,ol,p,pre,section,table,ul');\nvar pInlineTags = createMapFromString('a,audio,del,ins,map,noscript,video');\nvar rubyTags = createMapFromString('rb,rt,rtc,rp');\nvar rtcTag = createMapFromString('rb,rtc,rp');\nvar optionTag = createMapFromString('option,optgroup');\nvar tableContentTags = createMapFromString('tbody,tfoot');\nvar tableSectionTags = createMapFromString('thead,tbody,tfoot');\nvar cellTags = createMapFromString('td,th');\nvar topLevelTags = createMapFromString('html,head,body');\nvar compactTags = createMapFromString('html,body');\nvar looseTags = createMapFromString('head,colgroup,caption');\nvar trailingTags = createMapFromString('dt,thead');\nvar htmlTags = createMapFromString('a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,bgsound,big,blink,blockquote,body,br,button,canvas,caption,center,cite,code,col,colgroup,command,content,data,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,element,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,i,iframe,image,img,input,ins,isindex,kbd,keygen,label,legend,li,link,listing,main,map,mark,marquee,menu,menuitem,meta,meter,multicol,nav,nobr,noembed,noframes,noscript,object,ol,optgroup,option,output,p,param,picture,plaintext,pre,progress,q,rp,rt,rtc,ruby,s,samp,script,section,select,shadow,small,source,spacer,span,strike,strong,style,sub,summary,sup,table,tbody,td,template,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr,xmp');\n\nfunction canRemoveParentTag(optionalStartTag, tag) {\n  switch (optionalStartTag) {\n    case 'html':\n    case 'head':\n      return true;\n    case 'body':\n      return !headerTags(tag);\n    case 'colgroup':\n      return tag === 'col';\n    case 'tbody':\n      return tag === 'tr';\n  }\n  return false;\n}\n\nfunction isStartTagMandatory(optionalEndTag, tag) {\n  switch (tag) {\n    case 'colgroup':\n      return optionalEndTag === 'colgroup';\n    case 'tbody':\n      return tableSectionTags(optionalEndTag);\n  }\n  return false;\n}\n\nfunction canRemovePrecedingTag(optionalEndTag, tag) {\n  switch (optionalEndTag) {\n    case 'html':\n    case 'head':\n    case 'body':\n    case 'colgroup':\n    case 'caption':\n      return true;\n    case 'li':\n    case 'optgroup':\n    case 'tr':\n      return tag === optionalEndTag;\n    case 'dt':\n    case 'dd':\n      return descriptionTags(tag);\n    case 'p':\n      return pBlockTags(tag);\n    case 'rb':\n    case 'rt':\n    case 'rp':\n      return rubyTags(tag);\n    case 'rtc':\n      return rtcTag(tag);\n    case 'option':\n      return optionTag(tag);\n    case 'thead':\n    case 'tbody':\n      return tableContentTags(tag);\n    case 'tfoot':\n      return tag === 'tbody';\n    case 'td':\n    case 'th':\n      return cellTags(tag);\n  }\n  return false;\n}\n\nvar reEmptyAttribute = new RegExp(\n  '^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(' +\n    '?:down|up|over|move|out)|key(?:press|down|up)))$');\n\nfunction canDeleteEmptyAttribute(tag, attrName, attrValue, options) {\n  var isValueEmpty = !attrValue || /^\\s*$/.test(attrValue);\n  if (!isValueEmpty) {\n    return false;\n  }\n  if (typeof options.removeEmptyAttributes === 'function') {\n    return options.removeEmptyAttributes(attrName, tag);\n  }\n  return tag === 'input' && attrName === 'value' || reEmptyAttribute.test(attrName);\n}\n\nfunction hasAttrName(name, attrs) {\n  for (var i = attrs.length - 1; i >= 0; i--) {\n    if (attrs[i].name === name) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction canRemoveElement(tag, attrs) {\n  switch (tag) {\n    case 'textarea':\n      return false;\n    case 'audio':\n    case 'script':\n    case 'video':\n      if (hasAttrName('src', attrs)) {\n        return false;\n      }\n      break;\n    case 'iframe':\n      if (hasAttrName('src', attrs) || hasAttrName('srcdoc', attrs)) {\n        return false;\n      }\n      break;\n    case 'object':\n      if (hasAttrName('data', attrs)) {\n        return false;\n      }\n      break;\n    case 'applet':\n      if (hasAttrName('code', attrs)) {\n        return false;\n      }\n      break;\n  }\n  return true;\n}\n\nfunction canCollapseWhitespace(tag) {\n  return !/^(?:script|style|pre|textarea)$/.test(tag);\n}\n\nfunction canTrimWhitespace(tag) {\n  return !/^(?:pre|textarea)$/.test(tag);\n}\n\nfunction normalizeAttr(attr, attrs, tag, options) {\n  var attrName = options.caseSensitive ? attr.name : attr.name.toLowerCase(),\n      attrValue = attr.value;\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = decode(attrValue, { isAttributeValue: true });\n  }\n\n  if (options.removeRedundantAttributes &&\n    isAttributeRedundant(tag, attrName, attrValue, attrs) ||\n    options.removeScriptTypeAttributes && tag === 'script' &&\n    attrName === 'type' && isScriptTypeAttribute(attrValue) ||\n    options.removeStyleLinkTypeAttributes && (tag === 'style' || tag === 'link') &&\n    attrName === 'type' && isStyleLinkTypeAttribute(attrValue)) {\n    return;\n  }\n\n  attrValue = cleanAttributeValue(tag, attrName, attrValue, options, attrs);\n\n  if (options.removeEmptyAttributes &&\n      canDeleteEmptyAttribute(tag, attrName, attrValue, options)) {\n    return;\n  }\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = attrValue.replace(/&(#?[0-9a-zA-Z]+;)/g, '&amp;$1');\n  }\n\n  return {\n    attr: attr,\n    name: attrName,\n    value: attrValue\n  };\n}\n\nfunction buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr) {\n  var attrName = normalized.name,\n      attrValue = normalized.value,\n      attr = normalized.attr,\n      attrQuote = attr.quote,\n      attrFragment,\n      emittedAttrValue;\n\n  if (typeof attrValue !== 'undefined' && (!options.removeAttributeQuotes ||\n      ~attrValue.indexOf(uidAttr) || !canRemoveAttributeQuotes(attrValue))) {\n    if (!options.preventAttributesEscaping) {\n      if (typeof options.quoteCharacter === 'undefined') {\n        var apos = (attrValue.match(/'/g) || []).length;\n        var quot = (attrValue.match(/\"/g) || []).length;\n        attrQuote = apos < quot ? '\\'' : '\"';\n      }\n      else {\n        attrQuote = options.quoteCharacter === '\\'' ? '\\'' : '\"';\n      }\n      if (attrQuote === '\"') {\n        attrValue = attrValue.replace(/\"/g, '&#34;');\n      }\n      else {\n        attrValue = attrValue.replace(/'/g, '&#39;');\n      }\n    }\n    emittedAttrValue = attrQuote + attrValue + attrQuote;\n    if (!isLast && !options.removeTagWhitespace) {\n      emittedAttrValue += ' ';\n    }\n  }\n  // make sure trailing slash is not interpreted as HTML self-closing tag\n  else if (isLast && !hasUnarySlash && !/\\/$/.test(attrValue)) {\n    emittedAttrValue = attrValue;\n  }\n  else {\n    emittedAttrValue = attrValue + ' ';\n  }\n\n  if (typeof attrValue === 'undefined' || options.collapseBooleanAttributes &&\n      isBooleanAttribute(attrName.toLowerCase(), attrValue.toLowerCase())) {\n    attrFragment = attrName;\n    if (!isLast) {\n      attrFragment += ' ';\n    }\n  }\n  else {\n    attrFragment = attrName + attr.customAssign + emittedAttrValue;\n  }\n\n  return attr.customOpen + attrFragment + attr.customClose;\n}\n\nfunction identity(value) {\n  return value;\n}\n\nfunction processOptions(options) {\n  ['html5', 'includeAutoGeneratedTags'].forEach(function(key) {\n    if (!(key in options)) {\n      options[key] = true;\n    }\n  });\n\n  if (typeof options.log !== 'function') {\n    options.log = identity;\n  }\n\n  if (!options.canCollapseWhitespace) {\n    options.canCollapseWhitespace = canCollapseWhitespace;\n  }\n  if (!options.canTrimWhitespace) {\n    options.canTrimWhitespace = canTrimWhitespace;\n  }\n\n  if (!('ignoreCustomComments' in options)) {\n    options.ignoreCustomComments = [/^!/];\n  }\n\n  if (!('ignoreCustomFragments' in options)) {\n    options.ignoreCustomFragments = [\n      /<%[\\s\\S]*?%>/,\n      /<\\?[\\s\\S]*?\\?>/\n    ];\n  }\n\n  if (!options.minifyURLs) {\n    options.minifyURLs = identity;\n  }\n  if (typeof options.minifyURLs !== 'function') {\n    var minifyURLs = options.minifyURLs;\n    if (typeof minifyURLs === 'string') {\n      minifyURLs = { site: minifyURLs };\n    }\n    else if (typeof minifyURLs !== 'object') {\n      minifyURLs = {};\n    }\n    options.minifyURLs = function(text) {\n      try {\n        return RelateUrl.relate(text, minifyURLs);\n      }\n      catch (err) {\n        options.log(err);\n        return text;\n      }\n    };\n  }\n\n  if (!options.minifyJS) {\n    options.minifyJS = identity;\n  }\n  if (typeof options.minifyJS !== 'function') {\n    var minifyJS = options.minifyJS;\n    if (typeof minifyJS !== 'object') {\n      minifyJS = {};\n    }\n    (minifyJS.parse || (minifyJS.parse = {})).bare_returns = false;\n    options.minifyJS = function(text, inline) {\n      var start = text.match(/^\\s*<!--.*/);\n      var code = start ? text.slice(start[0].length).replace(/\\n\\s*-->\\s*$/, '') : text;\n      minifyJS.parse.bare_returns = inline;\n      var result = UglifyJS.minify(code, minifyJS);\n      if (result.error) {\n        options.log(result.error);\n        return text;\n      }\n      return result.code.replace(/;$/, '');\n    };\n  }\n\n  if (!options.minifyCSS) {\n    options.minifyCSS = identity;\n  }\n  if (typeof options.minifyCSS !== 'function') {\n    var minifyCSS = options.minifyCSS;\n    if (typeof minifyCSS !== 'object') {\n      minifyCSS = {};\n    }\n    options.minifyCSS = function(text) {\n      text = text.replace(/(url\\s*\\(\\s*)(\"|'|)(.*?)\\2(\\s*\\))/ig, function(match, prefix, quote, url, suffix) {\n        return prefix + quote + options.minifyURLs(url) + quote + suffix;\n      });\n      try {\n        return new CleanCSS(minifyCSS).minify(text).styles;\n      }\n      catch (err) {\n        options.log(err);\n        return text;\n      }\n    };\n  }\n}\n\nfunction uniqueId(value) {\n  var id;\n  do {\n    id = Math.random().toString(36).replace(/^0\\.[0-9]*/, '');\n  } while (~value.indexOf(id));\n  return id;\n}\n\nvar specialContentTags = createMapFromString('script,style');\n\nfunction createSortFns(value, options, uidIgnore, uidAttr) {\n  var attrChains = options.sortAttributes && Object.create(null);\n  var classChain = options.sortClassName && new TokenChain();\n\n  function attrNames(attrs) {\n    return attrs.map(function(attr) {\n      return options.caseSensitive ? attr.name : attr.name.toLowerCase();\n    });\n  }\n\n  function shouldSkipUID(token, uid) {\n    return !uid || token.indexOf(uid) === -1;\n  }\n\n  function shouldSkipUIDs(token) {\n    return shouldSkipUID(token, uidIgnore) && shouldSkipUID(token, uidAttr);\n  }\n\n  function scan(input) {\n    var currentTag, currentType;\n    new HTMLParser(input, {\n      start: function(tag, attrs) {\n        if (attrChains) {\n          if (!attrChains[tag]) {\n            attrChains[tag] = new TokenChain();\n          }\n          attrChains[tag].add(attrNames(attrs).filter(shouldSkipUIDs));\n        }\n        for (var i = 0, len = attrs.length; i < len; i++) {\n          var attr = attrs[i];\n          if (classChain && (options.caseSensitive ? attr.name : attr.name.toLowerCase()) === 'class') {\n            classChain.add(trimWhitespace(attr.value).split(/[ \\t\\n\\f\\r]+/).filter(shouldSkipUIDs));\n          }\n          else if (options.processScripts && attr.name.toLowerCase() === 'type') {\n            currentTag = tag;\n            currentType = attr.value;\n          }\n        }\n      },\n      end: function() {\n        currentTag = '';\n      },\n      chars: function(text) {\n        if (options.processScripts && specialContentTags(currentTag) &&\n            options.processScripts.indexOf(currentType) > -1) {\n          scan(text);\n        }\n      }\n    });\n  }\n\n  var log = options.log;\n  options.log = null;\n  options.sortAttributes = false;\n  options.sortClassName = false;\n  scan(minify(value, options));\n  options.log = log;\n  if (attrChains) {\n    var attrSorters = Object.create(null);\n    for (var tag in attrChains) {\n      attrSorters[tag] = attrChains[tag].createSorter();\n    }\n    options.sortAttributes = function(tag, attrs) {\n      var sorter = attrSorters[tag];\n      if (sorter) {\n        var attrMap = Object.create(null);\n        var names = attrNames(attrs);\n        names.forEach(function(name, index) {\n          (attrMap[name] || (attrMap[name] = [])).push(attrs[index]);\n        });\n        sorter.sort(names).forEach(function(name, index) {\n          attrs[index] = attrMap[name].shift();\n        });\n      }\n    };\n  }\n  if (classChain) {\n    var sorter = classChain.createSorter();\n    options.sortClassName = function(value) {\n      return sorter.sort(value.split(/[ \\n\\f\\r]+/)).join(' ');\n    };\n  }\n}\n\nfunction minify(value, options, partialMarkup) {\n  options = options || {};\n  var optionsStack = [];\n  processOptions(options);\n  if (options.collapseWhitespace) {\n    value = collapseWhitespace(value, options, true, true);\n  }\n\n  var buffer = [],\n      charsPrevTag,\n      currentChars = '',\n      hasChars,\n      currentTag = '',\n      currentAttrs = [],\n      stackNoTrimWhitespace = [],\n      stackNoCollapseWhitespace = [],\n      optionalStartTag = '',\n      optionalEndTag = '',\n      t = Date.now(),\n      ignoredMarkupChunks = [],\n      ignoredCustomMarkupChunks = [],\n      uidIgnore,\n      uidAttr,\n      uidPattern;\n\n  // temporarily replace ignored chunks with comments,\n  // so that we don't have to worry what's there.\n  // for all we care there might be\n  // completely-horribly-broken-alien-non-html-emoj-cthulhu-filled content\n  value = value.replace(/<!-- htmlmin:ignore -->([\\s\\S]*?)<!-- htmlmin:ignore -->/g, function(match, group1) {\n    if (!uidIgnore) {\n      uidIgnore = uniqueId(value);\n      var pattern = new RegExp('^' + uidIgnore + '([0-9]+)$');\n      if (options.ignoreCustomComments) {\n        options.ignoreCustomComments.push(pattern);\n      }\n      else {\n        options.ignoreCustomComments = [pattern];\n      }\n    }\n    var token = '<!--' + uidIgnore + ignoredMarkupChunks.length + '-->';\n    ignoredMarkupChunks.push(group1);\n    return token;\n  });\n\n  function escapeFragments(text) {\n    return text.replace(uidPattern, function(match, prefix, index) {\n      var chunks = ignoredCustomMarkupChunks[+index];\n      return chunks[1] + uidAttr + index + chunks[2];\n    });\n  }\n\n  var customFragments = options.ignoreCustomFragments.map(function(re) {\n    return re.source;\n  });\n  if (customFragments.length) {\n    var reCustomIgnore = new RegExp('\\\\s*(?:' + customFragments.join('|') + ')+\\\\s*', 'g');\n    // temporarily replace custom ignored fragments with unique attributes\n    value = value.replace(reCustomIgnore, function(match) {\n      if (!uidAttr) {\n        uidAttr = uniqueId(value);\n        uidPattern = new RegExp('(\\\\s*)' + uidAttr + '([0-9]+)(\\\\s*)', 'g');\n        var minifyCSS = options.minifyCSS;\n        if (minifyCSS) {\n          options.minifyCSS = function(text) {\n            return minifyCSS(escapeFragments(text));\n          };\n        }\n        var minifyJS = options.minifyJS;\n        if (minifyJS) {\n          options.minifyJS = function(text, inline) {\n            return minifyJS(escapeFragments(text), inline);\n          };\n        }\n      }\n      var token = uidAttr + ignoredCustomMarkupChunks.length;\n      ignoredCustomMarkupChunks.push(/^(\\s*)[\\s\\S]*?(\\s*)$/.exec(match));\n      return '\\t' + token + '\\t';\n    });\n  }\n\n  if (options.sortAttributes && typeof options.sortAttributes !== 'function' ||\n      options.sortClassName && typeof options.sortClassName !== 'function') {\n    createSortFns(value, options, uidIgnore, uidAttr);\n  }\n\n  function _canCollapseWhitespace(tag, attrs) {\n    return options.canCollapseWhitespace(tag, attrs, canCollapseWhitespace);\n  }\n\n  function _canTrimWhitespace(tag, attrs) {\n    return options.canTrimWhitespace(tag, attrs, canTrimWhitespace);\n  }\n\n  function removeStartTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<[^/!]/.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  function removeEndTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<\\//.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  // look for trailing whitespaces, bypass any inline tags\n  function trimTrailingWhitespace(index, nextTag) {\n    for (var endTag = null; index >= 0 && _canTrimWhitespace(endTag); index--) {\n      var str = buffer[index];\n      var match = str.match(/^<\\/([\\w:-]+)>$/);\n      if (match) {\n        endTag = match[1];\n      }\n      else if (/>$/.test(str) || (buffer[index] = collapseWhitespaceSmart(str, null, nextTag, options))) {\n        break;\n      }\n    }\n  }\n\n  // look for trailing whitespaces from previously processed text\n  // which may not be trimmed due to a following comment or an empty\n  // element which has now been removed\n  function squashTrailingWhitespace(nextTag) {\n    var charsIndex = buffer.length - 1;\n    if (buffer.length > 1) {\n      var item = buffer[buffer.length - 1];\n      if (/^(?:<!|$)/.test(item) && item.indexOf(uidIgnore) === -1) {\n        charsIndex--;\n      }\n    }\n    trimTrailingWhitespace(charsIndex, nextTag);\n  }\n\n  new HTMLParser(value, {\n    partialMarkup: partialMarkup,\n    html5: options.html5,\n\n    start: function(tag, attrs, unary, unarySlash, autoGenerated) {\n      var lowerTag = tag.toLowerCase();\n\n      if (lowerTag === 'svg') {\n        optionsStack.push(options);\n        var nextOptions = {};\n        for (var key in options) {\n          nextOptions[key] = options[key];\n        }\n        nextOptions.keepClosingSlash = true;\n        nextOptions.caseSensitive = true;\n        options = nextOptions;\n      }\n\n      tag = options.caseSensitive ? tag : lowerTag;\n\n      currentTag = tag;\n      charsPrevTag = tag;\n      if (!inlineTextTags(tag)) {\n        currentChars = '';\n      }\n      hasChars = false;\n      currentAttrs = attrs;\n\n      var optional = options.removeOptionalTags;\n      if (optional) {\n        var htmlTag = htmlTags(tag);\n        // <html> may be omitted if first thing inside is not comment\n        // <head> may be omitted if first thing inside is an element\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        // <colgroup> may be omitted if first thing inside is <col>\n        // <tbody> may be omitted if first thing inside is <tr>\n        if (htmlTag && canRemoveParentTag(optionalStartTag, tag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // end-tag-followed-by-start-tag omission rules\n        if (htmlTag && canRemovePrecedingTag(optionalEndTag, tag)) {\n          removeEndTag();\n          // <colgroup> cannot be omitted if preceding </colgroup> is omitted\n          // <tbody> cannot be omitted if preceding </tbody>, </thead> or </tfoot> is omitted\n          optional = !isStartTagMandatory(optionalEndTag, tag);\n        }\n        optionalEndTag = '';\n      }\n\n      // set whitespace flags for nested tags (eg. <code> within a <pre>)\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          squashTrailingWhitespace(tag);\n        }\n        if (!_canTrimWhitespace(tag, attrs) || stackNoTrimWhitespace.length) {\n          stackNoTrimWhitespace.push(tag);\n        }\n        if (!_canCollapseWhitespace(tag, attrs) || stackNoCollapseWhitespace.length) {\n          stackNoCollapseWhitespace.push(tag);\n        }\n      }\n\n      var openTag = '<' + tag;\n      var hasUnarySlash = unarySlash && options.keepClosingSlash;\n\n      buffer.push(openTag);\n\n      if (options.sortAttributes) {\n        options.sortAttributes(tag, attrs);\n      }\n\n      var parts = [];\n      for (var i = attrs.length, isLast = true; --i >= 0;) {\n        var normalized = normalizeAttr(attrs[i], attrs, tag, options);\n        if (normalized) {\n          parts.unshift(buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr));\n          isLast = false;\n        }\n      }\n      if (parts.length > 0) {\n        buffer.push(' ');\n        buffer.push.apply(buffer, parts);\n      }\n      // start tag must never be omitted if it has any attributes\n      else if (optional && optionalStartTags(tag)) {\n        optionalStartTag = tag;\n      }\n\n      buffer.push(buffer.pop() + (hasUnarySlash ? '/' : '') + '>');\n\n      if (autoGenerated && !options.includeAutoGeneratedTags) {\n        removeStartTag();\n        optionalStartTag = '';\n      }\n    },\n    end: function(tag, attrs, autoGenerated) {\n      var lowerTag = tag.toLowerCase();\n      if (lowerTag === 'svg') {\n        options = optionsStack.pop();\n      }\n      tag = options.caseSensitive ? tag : lowerTag;\n\n      // check if current tag is in a whitespace stack\n      if (options.collapseWhitespace) {\n        if (stackNoTrimWhitespace.length) {\n          if (tag === stackNoTrimWhitespace[stackNoTrimWhitespace.length - 1]) {\n            stackNoTrimWhitespace.pop();\n          }\n        }\n        else {\n          squashTrailingWhitespace('/' + tag);\n        }\n        if (stackNoCollapseWhitespace.length &&\n          tag === stackNoCollapseWhitespace[stackNoCollapseWhitespace.length - 1]) {\n          stackNoCollapseWhitespace.pop();\n        }\n      }\n\n      var isElementEmpty = false;\n      if (tag === currentTag) {\n        currentTag = '';\n        isElementEmpty = !hasChars;\n      }\n\n      if (options.removeOptionalTags) {\n        // <html>, <head> or <body> may be omitted if the element is empty\n        if (isElementEmpty && topLevelTags(optionalStartTag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head> may be omitted if not followed by space or comment\n        // </p> may be omitted if no more content in non-</a> parent\n        // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n        if (htmlTags(tag) && optionalEndTag && !trailingTags(optionalEndTag) && (optionalEndTag !== 'p' || !pInlineTags(tag))) {\n          removeEndTag();\n        }\n        optionalEndTag = optionalEndTags(tag) ? tag : '';\n      }\n\n      if (options.removeEmptyElements && isElementEmpty && canRemoveElement(tag, attrs)) {\n        // remove last \"element\" from buffer\n        removeStartTag();\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      else {\n        if (autoGenerated && !options.includeAutoGeneratedTags) {\n          optionalEndTag = '';\n        }\n        else {\n          buffer.push('</' + tag + '>');\n        }\n        charsPrevTag = '/' + tag;\n        if (!inlineTags(tag)) {\n          currentChars = '';\n        }\n        else if (isElementEmpty) {\n          currentChars += '|';\n        }\n      }\n    },\n    chars: function(text, prevTag, nextTag) {\n      prevTag = prevTag === '' ? 'comment' : prevTag;\n      nextTag = nextTag === '' ? 'comment' : nextTag;\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        text = decode(text);\n      }\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          if (prevTag === 'comment') {\n            var prevComment = buffer[buffer.length - 1];\n            if (prevComment.indexOf(uidIgnore) === -1) {\n              if (!prevComment) {\n                prevTag = charsPrevTag;\n              }\n              if (buffer.length > 1 && (!prevComment || !options.conservativeCollapse && / $/.test(currentChars))) {\n                var charsIndex = buffer.length - 2;\n                buffer[charsIndex] = buffer[charsIndex].replace(/\\s+$/, function(trailingSpaces) {\n                  text = trailingSpaces + text;\n                  return '';\n                });\n              }\n            }\n          }\n          if (prevTag) {\n            if (prevTag === '/nobr' || prevTag === 'wbr') {\n              if (/^\\s/.test(text)) {\n                var tagIndex = buffer.length - 1;\n                while (tagIndex > 0 && buffer[tagIndex].lastIndexOf('<' + prevTag) !== 0) {\n                  tagIndex--;\n                }\n                trimTrailingWhitespace(tagIndex - 1, 'br');\n              }\n            }\n            else if (inlineTextTags(prevTag.charAt(0) === '/' ? prevTag.slice(1) : prevTag)) {\n              text = collapseWhitespace(text, options, /(?:^|\\s)$/.test(currentChars));\n            }\n          }\n          if (prevTag || nextTag) {\n            text = collapseWhitespaceSmart(text, prevTag, nextTag, options);\n          }\n          else {\n            text = collapseWhitespace(text, options, true, true);\n          }\n          if (!text && /\\s$/.test(currentChars) && prevTag && prevTag.charAt(0) === '/') {\n            trimTrailingWhitespace(buffer.length - 1, nextTag);\n          }\n        }\n        if (!stackNoCollapseWhitespace.length && nextTag !== 'html' && !(prevTag && nextTag)) {\n          text = collapseWhitespace(text, options, false, false, true);\n        }\n      }\n      if (options.processScripts && specialContentTags(currentTag)) {\n        text = processScript(text, options, currentAttrs);\n      }\n      if (isExecutableScript(currentTag, currentAttrs)) {\n        text = options.minifyJS(text);\n      }\n      if (isStyleSheet(currentTag, currentAttrs)) {\n        text = options.minifyCSS(text);\n      }\n      if (options.removeOptionalTags && text) {\n        // <html> may be omitted if first thing inside is not comment\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        if (optionalStartTag === 'html' || optionalStartTag === 'body' && !/^\\s/.test(text)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head>, </colgroup> or </caption> may be omitted if not followed by space or comment\n        if (compactTags(optionalEndTag) || looseTags(optionalEndTag) && !/^\\s/.test(text)) {\n          removeEndTag();\n        }\n        optionalEndTag = '';\n      }\n      charsPrevTag = /^\\s*$/.test(text) ? prevTag : 'comment';\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        // semi-colon can be omitted\n        // https://mathiasbynens.be/notes/ambiguous-ampersands\n        text = text.replace(/&(#?[0-9a-zA-Z]+;)/g, '&amp$1').replace(/</g, '&lt;');\n      }\n      currentChars += text;\n      if (text) {\n        hasChars = true;\n      }\n      buffer.push(text);\n    },\n    comment: function(text, nonStandard) {\n      var prefix = nonStandard ? '<!' : '<!--';\n      var suffix = nonStandard ? '>' : '-->';\n      if (isConditionalComment(text)) {\n        text = prefix + cleanConditionalComment(text, options) + suffix;\n      }\n      else if (options.removeComments) {\n        if (isIgnoredComment(text, options)) {\n          text = '<!--' + text + '-->';\n        }\n        else {\n          text = '';\n        }\n      }\n      else {\n        text = prefix + text + suffix;\n      }\n      if (options.removeOptionalTags && text) {\n        // preceding comments suppress tag omissions\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      buffer.push(text);\n    },\n    doctype: function(doctype) {\n      buffer.push(options.useShortDoctype ? '<!DOCTYPE html>' : collapseWhitespaceAll(doctype));\n    },\n    customAttrAssign: options.customAttrAssign,\n    customAttrSurround: options.customAttrSurround\n  });\n\n  if (options.removeOptionalTags) {\n    // <html> may be omitted if first thing inside is not comment\n    // <head> or <body> may be omitted if empty\n    if (topLevelTags(optionalStartTag)) {\n      removeStartTag();\n    }\n    // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n    if (optionalEndTag && !trailingTags(optionalEndTag)) {\n      removeEndTag();\n    }\n  }\n  if (options.collapseWhitespace) {\n    squashTrailingWhitespace('br');\n  }\n\n  var str = joinResultSegments(buffer, options);\n\n  if (uidPattern) {\n    str = str.replace(uidPattern, function(match, prefix, index, suffix) {\n      var chunk = ignoredCustomMarkupChunks[+index][0];\n      if (options.collapseWhitespace) {\n        if (prefix !== '\\t') {\n          chunk = prefix + chunk;\n        }\n        if (suffix !== '\\t') {\n          chunk += suffix;\n        }\n        return collapseWhitespace(chunk, {\n          preserveLineBreaks: options.preserveLineBreaks,\n          conservativeCollapse: !options.trimCustomFragments\n        }, /^[ \\n\\r\\t\\f]/.test(chunk), /[ \\n\\r\\t\\f]$/.test(chunk));\n      }\n      return chunk;\n    });\n  }\n  if (uidIgnore) {\n    str = str.replace(new RegExp('<!--' + uidIgnore + '([0-9]+)-->', 'g'), function(match, index) {\n      return ignoredMarkupChunks[+index];\n    });\n  }\n\n  options.log('minified in: ' + (Date.now() - t) + 'ms');\n  return str;\n}\n\nfunction joinResultSegments(results, options) {\n  var str;\n  var maxLineLength = options.maxLineLength;\n  if (maxLineLength) {\n    var token;\n    var lines = [];\n    var line = '';\n    for (var i = 0, len = results.length; i < len; i++) {\n      token = results[i];\n      if (line.length + token.length < maxLineLength) {\n        line += token;\n      }\n      else {\n        lines.push(line.replace(/^\\n/, ''));\n        line = token;\n      }\n    }\n    lines.push(line);\n\n    str = lines.join('\\n');\n  }\n  else {\n    str = results.join('');\n  }\n  return options.collapseWhitespace ? collapseWhitespace(str, options, true, true) : str;\n}\n\nexports.minify = function(value, options) {\n  return minify(value, options);\n};\n"]}
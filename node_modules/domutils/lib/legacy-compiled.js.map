{"version":3,"sources":["legacy.js"],"names":[],"mappings":"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","file":"legacy-compiled.js","sourcesContent":["var ElementType = require(\"domelementtype\");\nvar isTag = exports.isTag = ElementType.isTag;\n\nexports.testElement = function(options, element){\n\tfor(var key in options){\n\t\tif(!options.hasOwnProperty(key));\n\t\telse if(key === \"tag_name\"){\n\t\t\tif(!isTag(element) || !options.tag_name(element.name)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(key === \"tag_type\"){\n\t\t\tif(!options.tag_type(element.type)) return false;\n\t\t} else if(key === \"tag_contains\"){\n\t\t\tif(isTag(element) || !options.tag_contains(element.data)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(!element.attribs || !options[key](element.attribs[key])){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\nvar Checks = {\n\ttag_name: function(name){\n\t\tif(typeof name === \"function\"){\n\t\t\treturn function(elem){ return isTag(elem) && name(elem.name); };\n\t\t} else if(name === \"*\"){\n\t\t\treturn isTag;\n\t\t} else {\n\t\t\treturn function(elem){ return isTag(elem) && elem.name === name; };\n\t\t}\n\t},\n\ttag_type: function(type){\n\t\tif(typeof type === \"function\"){\n\t\t\treturn function(elem){ return type(elem.type); };\n\t\t} else {\n\t\t\treturn function(elem){ return elem.type === type; };\n\t\t}\n\t},\n\ttag_contains: function(data){\n\t\tif(typeof data === \"function\"){\n\t\t\treturn function(elem){ return !isTag(elem) && data(elem.data); };\n\t\t} else {\n\t\t\treturn function(elem){ return !isTag(elem) && elem.data === data; };\n\t\t}\n\t}\n};\n\nfunction getAttribCheck(attrib, value){\n\tif(typeof value === \"function\"){\n\t\treturn function(elem){ return elem.attribs && value(elem.attribs[attrib]); };\n\t} else {\n\t\treturn function(elem){ return elem.attribs && elem.attribs[attrib] === value; };\n\t}\n}\n\nfunction combineFuncs(a, b){\n\treturn function(elem){\n\t\treturn a(elem) || b(elem);\n\t};\n}\n\nexports.getElements = function(options, element, recurse, limit){\n\tvar funcs = Object.keys(options).map(function(key){\n\t\tvar value = options[key];\n\t\treturn key in Checks ? Checks[key](value) : getAttribCheck(key, value);\n\t});\n\n\treturn funcs.length === 0 ? [] : this.filter(\n\t\tfuncs.reduce(combineFuncs),\n\t\telement, recurse, limit\n\t);\n};\n\nexports.getElementById = function(id, element, recurse){\n\tif(!Array.isArray(element)) element = [element];\n\treturn this.findOne(getAttribCheck(\"id\", id), element, recurse !== false);\n};\n\nexports.getElementsByTagName = function(name, element, recurse, limit){\n\treturn this.filter(Checks.tag_name(name), element, recurse, limit);\n};\n\nexports.getElementsByTagType = function(type, element, recurse, limit){\n\treturn this.filter(Checks.tag_type(type), element, recurse, limit);\n};\n"]}
{"version":3,"sources":["SpecialString.js"],"names":[],"mappings":"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","file":"SpecialString-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.9.3\nvar SpecialString, fn, i, len, prop, ref;\n\nmodule.exports = SpecialString = (function() {\n  var self;\n\n  self = SpecialString;\n\n  SpecialString._tabRx = /^\\t/;\n\n  SpecialString._tagRx = /^<[^>]+>/;\n\n  SpecialString._quotedHtmlRx = /^&(gt|lt|quot|amp|apos|sp);/;\n\n  function SpecialString(str) {\n    if (!(this instanceof self)) {\n      return new self(str);\n    }\n    this._str = String(str);\n    this._len = 0;\n  }\n\n  SpecialString.prototype._getStr = function() {\n    return this._str;\n  };\n\n  SpecialString.prototype.set = function(str) {\n    this._str = String(str);\n    return this;\n  };\n\n  SpecialString.prototype.clone = function() {\n    return new SpecialString(this._str);\n  };\n\n  SpecialString.prototype.isEmpty = function() {\n    return this._str === '';\n  };\n\n  SpecialString.prototype.isOnlySpecialChars = function() {\n    return !this.isEmpty() && this.length === 0;\n  };\n\n  SpecialString.prototype._reset = function() {\n    return this._len = 0;\n  };\n\n  SpecialString.prototype.splitIn = function(limit, trimLeftEachLine) {\n    var buffer, bufferLength, justSkippedSkipChar, lines;\n    if (trimLeftEachLine == null) {\n      trimLeftEachLine = false;\n    }\n    buffer = '';\n    bufferLength = 0;\n    lines = [];\n    justSkippedSkipChar = false;\n    self._countChars(this._str, function(char, charLength) {\n      if (bufferLength > limit || bufferLength + charLength > limit) {\n        lines.push(buffer);\n        buffer = '';\n        bufferLength = 0;\n      }\n      if (bufferLength === 0 && char === ' ' && !justSkippedSkipChar && trimLeftEachLine) {\n        return justSkippedSkipChar = true;\n      } else {\n        buffer += char;\n        bufferLength += charLength;\n        return justSkippedSkipChar = false;\n      }\n    });\n    if (buffer.length > 0) {\n      lines.push(buffer);\n    }\n    return lines;\n  };\n\n  SpecialString.prototype.trim = function() {\n    return new SpecialString(this.str.trim());\n  };\n\n  SpecialString.prototype.trimLeft = function() {\n    return new SpecialString(this.str.replace(/^\\s+/, ''));\n  };\n\n  SpecialString.prototype.trimRight = function() {\n    return new SpecialString(this.str.replace(/\\s+$/, ''));\n  };\n\n  SpecialString.prototype._getLength = function() {\n    var sum;\n    sum = 0;\n    self._countChars(this._str, function(char, charLength) {\n      sum += charLength;\n    });\n    return sum;\n  };\n\n  SpecialString.prototype.cut = function(from, to, trimLeft) {\n    var after, before, cur, cut;\n    if (trimLeft == null) {\n      trimLeft = false;\n    }\n    if (to == null) {\n      to = this.length;\n    }\n    from = parseInt(from);\n    if (from >= to) {\n      throw Error(\"`from` shouldn't be larger than `to`\");\n    }\n    before = '';\n    after = '';\n    cut = '';\n    cur = 0;\n    self._countChars(this._str, (function(_this) {\n      return function(char, charLength) {\n        if (_this.str === 'ab<tag>') {\n          console.log(charLength, char);\n        }\n        if (cur === from && char.match(/^\\s+$/) && trimLeft) {\n          return;\n        }\n        if (cur < from) {\n          before += char;\n        } else if (cur < to || cur + charLength <= to) {\n          cut += char;\n        } else {\n          after += char;\n        }\n        cur += charLength;\n      };\n    })(this));\n    this._str = before + after;\n    this._reset();\n    return SpecialString(cut);\n  };\n\n  SpecialString._countChars = function(text, cb) {\n    var char, charLength, m;\n    while (text.length !== 0) {\n      if (m = text.match(self._tagRx)) {\n        char = m[0];\n        charLength = 0;\n        text = text.substr(char.length, text.length);\n      } else if (m = text.match(self._quotedHtmlRx)) {\n        char = m[0];\n        charLength = 1;\n        text = text.substr(char.length, text.length);\n      } else if (text.match(self._tabRx)) {\n        char = \"\\t\";\n        charLength = 8;\n        text = text.substr(1, text.length);\n      } else {\n        char = text[0];\n        charLength = 1;\n        text = text.substr(1, text.length);\n      }\n      cb.call(null, char, charLength);\n    }\n  };\n\n  return SpecialString;\n\n})();\n\nref = ['str', 'length'];\nfn = function() {\n  var methodName;\n  methodName = '_get' + prop[0].toUpperCase() + prop.substr(1, prop.length);\n  return SpecialString.prototype.__defineGetter__(prop, function() {\n    return this[methodName]();\n  });\n};\nfor (i = 0, len = ref.length; i < len; i++) {\n  prop = ref[i];\n  fn();\n}\n"]}
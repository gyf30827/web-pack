{"version":3,"sources":["tools.js"],"names":[],"mappings":"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","file":"tools-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.9.3\nvar htmlparser, object, objectToDom, self;\n\nhtmlparser = require('htmlparser2');\n\nobject = require('utila').object;\n\nobjectToDom = require('dom-converter').objectToDom;\n\nmodule.exports = self = {\n  repeatString: function(str, times) {\n    var i, j, output, ref;\n    output = '';\n    for (i = j = 0, ref = times; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n      output += str;\n    }\n    return output;\n  },\n  toDom: function(subject) {\n    if (typeof subject === 'string') {\n      return self.stringToDom(subject);\n    } else if (object.isBareObject(subject)) {\n      return self._objectToDom(subject);\n    } else {\n      throw Error(\"tools.toDom() only supports strings and objects\");\n    }\n  },\n  stringToDom: function(string) {\n    var handler, parser;\n    handler = new htmlparser.DomHandler;\n    parser = new htmlparser.Parser(handler);\n    parser.write(string);\n    parser.end();\n    return handler.dom;\n  },\n  _fixQuotesInDom: function(input) {\n    var j, len, node;\n    if (Array.isArray(input)) {\n      for (j = 0, len = input.length; j < len; j++) {\n        node = input[j];\n        self._fixQuotesInDom(node);\n      }\n      return input;\n    }\n    node = input;\n    if (node.type === 'text') {\n      return node.data = self._quoteNodeText(node.data);\n    } else {\n      return self._fixQuotesInDom(node.children);\n    }\n  },\n  objectToDom: function(o) {\n    if (!Array.isArray(o)) {\n      if (!object.isBareObject(o)) {\n        throw Error(\"objectToDom() only accepts a bare object or an array\");\n      }\n    }\n    return self._fixQuotesInDom(objectToDom(o));\n  },\n  quote: function(str) {\n    return String(str).replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\\"/g, '&quot;').replace(/\\ /g, '&sp;').replace(/\\n/g, '<br />');\n  },\n  _quoteNodeText: function(text) {\n    return String(text).replace(/\\&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\\"/g, '&quot;').replace(/\\ /g, '&sp;').replace(/\\n/g, \"&nl;\");\n  },\n  getCols: function() {\n    var cols, tty;\n    tty = require('tty');\n    cols = (function() {\n      try {\n        if (tty.isatty(1) && tty.isatty(2)) {\n          if (process.stdout.getWindowSize) {\n            return process.stdout.getWindowSize(1)[0];\n          } else if (tty.getWindowSize) {\n            return tty.getWindowSize()[1];\n          } else if (process.stdout.columns && process.stdout.rows) {\n            return process.stdout.rows;\n          }\n        }\n      } catch (_error) {}\n    })();\n    if (typeof cols === 'number' && cols > 30) {\n      return cols;\n    } else {\n      return 80;\n    }\n  }\n};\n"]}
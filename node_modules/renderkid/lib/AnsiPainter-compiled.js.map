{"version":3,"sources":["AnsiPainter.js"],"names":[],"mappings":"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","file":"AnsiPainter-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.9.3\nvar AnsiPainter, object, styles, tags, tools,\n  hasProp = {}.hasOwnProperty,\n  slice = [].slice;\n\ntools = require('./tools');\n\ntags = require('./ansiPainter/tags');\n\nstyles = require('./ansiPainter/styles');\n\nobject = require('utila').object;\n\nmodule.exports = AnsiPainter = (function() {\n  var self;\n\n  function AnsiPainter() {}\n\n  AnsiPainter.tags = tags;\n\n  AnsiPainter.prototype.paint = function(s) {\n    return this._replaceSpecialStrings(this._renderDom(this._parse(s)));\n  };\n\n  AnsiPainter.prototype._replaceSpecialStrings = function(str) {\n    return str.replace(/&sp;/g, ' ').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\"').replace(/&amp;/g, '&');\n  };\n\n  AnsiPainter.prototype._parse = function(string, injectFakeRoot) {\n    if (injectFakeRoot == null) {\n      injectFakeRoot = true;\n    }\n    if (injectFakeRoot) {\n      string = '<none>' + string + '</none>';\n    }\n    return tools.toDom(string);\n  };\n\n  AnsiPainter.prototype._renderDom = function(dom) {\n    var parentStyles;\n    parentStyles = {\n      bg: 'none',\n      color: 'none'\n    };\n    return this._renderChildren(dom, parentStyles);\n  };\n\n  AnsiPainter.prototype._renderChildren = function(children, parentStyles) {\n    var child, n, ret;\n    ret = '';\n    for (n in children) {\n      if (!hasProp.call(children, n)) continue;\n      child = children[n];\n      ret += this._renderNode(child, parentStyles);\n    }\n    return ret;\n  };\n\n  AnsiPainter.prototype._renderNode = function(node, parentStyles) {\n    if (node.type === 'text') {\n      return this._renderTextNode(node, parentStyles);\n    } else {\n      return this._renderTag(node, parentStyles);\n    }\n  };\n\n  AnsiPainter.prototype._renderTextNode = function(node, parentStyles) {\n    return this._wrapInStyle(node.data, parentStyles);\n  };\n\n  AnsiPainter.prototype._wrapInStyle = function(str, style) {\n    return styles.color(style.color) + styles.bg(style.bg) + str + styles.none();\n  };\n\n  AnsiPainter.prototype._renderTag = function(node, parentStyles) {\n    var currentStyles, tagStyles;\n    tagStyles = this._getStylesForTagName(node.name);\n    currentStyles = this._mixStyles(parentStyles, tagStyles);\n    return this._renderChildren(node.children, currentStyles);\n  };\n\n  AnsiPainter.prototype._mixStyles = function() {\n    var final, i, key, len, style, styles, val;\n    styles = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    final = {};\n    for (i = 0, len = styles.length; i < len; i++) {\n      style = styles[i];\n      for (key in style) {\n        if (!hasProp.call(style, key)) continue;\n        val = style[key];\n        if ((final[key] == null) || val !== 'inherit') {\n          final[key] = val;\n        }\n      }\n    }\n    return final;\n  };\n\n  AnsiPainter.prototype._getStylesForTagName = function(name) {\n    if (tags[name] == null) {\n      throw Error(\"Unkown tag name `\" + name + \"`\");\n    }\n    return tags[name];\n  };\n\n  self = AnsiPainter;\n\n  AnsiPainter.getInstance = function() {\n    if (self._instance == null) {\n      self._instance = new self;\n    }\n    return self._instance;\n  };\n\n  AnsiPainter.paint = function(str) {\n    return self.getInstance().paint(str);\n  };\n\n  AnsiPainter.strip = function(s) {\n    return s.replace(/\\x1b\\[[0-9]+m/g, '');\n  };\n\n  return AnsiPainter;\n\n})();\n"]}
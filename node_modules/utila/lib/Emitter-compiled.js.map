{"version":3,"sources":["Emitter.js"],"names":[],"mappings":"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","file":"Emitter-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.6.3\nvar Emitter, array;\n\narray = require('./array');\n\nmodule.exports = Emitter = (function() {\n  function Emitter() {\n    this._listeners = {};\n    this._listenersForAnyEvent = [];\n    this._disabledEmitters = {};\n  }\n\n  Emitter.prototype.on = function(eventName, listener) {\n    if (this._listeners[eventName] == null) {\n      this._listeners[eventName] = [];\n    }\n    this._listeners[eventName].push(listener);\n    return this;\n  };\n\n  Emitter.prototype.once = function(eventName, listener) {\n    var cb, ran,\n      _this = this;\n    ran = false;\n    cb = function() {\n      if (ran) {\n        return;\n      }\n      ran = true;\n      listener();\n      return setTimeout(function() {\n        return _this.removeEvent(eventName, cb);\n      }, 0);\n    };\n    this.on(eventName, cb);\n    return this;\n  };\n\n  Emitter.prototype.onAnyEvent = function(listener) {\n    this._listenersForAnyEvent.push(listener);\n    return this;\n  };\n\n  Emitter.prototype.removeEvent = function(eventName, listener) {\n    if (this._listeners[eventName] == null) {\n      return this;\n    }\n    array.pluckOneItem(this._listeners[eventName], listener);\n    return this;\n  };\n\n  Emitter.prototype.removeListeners = function(eventName) {\n    if (this._listeners[eventName] == null) {\n      return this;\n    }\n    this._listeners[eventName].length = 0;\n    return this;\n  };\n\n  Emitter.prototype.removeAllListeners = function() {\n    var listeners, name, _ref;\n    _ref = this._listeners;\n    for (name in _ref) {\n      listeners = _ref[name];\n      listeners.length = 0;\n    }\n    return this;\n  };\n\n  Emitter.prototype._emit = function(eventName, data) {\n    var listener, _i, _j, _len, _len1, _ref, _ref1;\n    _ref = this._listenersForAnyEvent;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      listener = _ref[_i];\n      listener.call(this, data, eventName);\n    }\n    if (this._listeners[eventName] == null) {\n      return;\n    }\n    _ref1 = this._listeners[eventName];\n    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n      listener = _ref1[_j];\n      listener.call(this, data);\n    }\n  };\n\n  Emitter.prototype._throttleEmitterMethod = function(fnName, time) {\n    var lastCallArgs, originalFn, pend, pending, runIt, timer,\n      _this = this;\n    if (time == null) {\n      time = 1000;\n    }\n    originalFn = this[fnName];\n    if (typeof originalFn !== 'function') {\n      throw Error(\"this class does not have a method called '\" + fnName + \"'\");\n    }\n    lastCallArgs = null;\n    pending = false;\n    timer = null;\n    this[fnName] = function() {\n      lastCallArgs = arguments;\n      return pend();\n    };\n    pend = function() {\n      if (pending) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(runIt, time);\n      return pending = true;\n    };\n    return runIt = function() {\n      pending = false;\n      return originalFn.apply(_this, lastCallArgs);\n    };\n  };\n\n  Emitter.prototype._disableEmitter = function(fnName) {\n    if (this._disabledEmitters[fnName] != null) {\n      throw Error(\"\" + fnName + \" is already a disabled emitter\");\n    }\n    this._disabledEmitters[fnName] = this[fnName];\n    return this[fnName] = function() {};\n  };\n\n  Emitter.prototype._enableEmitter = function(fnName) {\n    var fn;\n    fn = this._disabledEmitters[fnName];\n    if (fn == null) {\n      throw Error(\"\" + fnName + \" is not a disabled emitter\");\n    }\n    this[fnName] = fn;\n    return delete this._disabledEmitters[fnName];\n  };\n\n  return Emitter;\n\n})();\n"]}
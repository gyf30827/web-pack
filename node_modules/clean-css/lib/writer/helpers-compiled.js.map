{"version":3,"sources":["helpers.js"],"names":[],"mappings":"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","file":"helpers-compiled.js","sourcesContent":["var lineBreak = require('os').EOL;\nvar emptyCharacter = '';\n\nvar Breaks = require('../options/format').Breaks;\nvar Spaces = require('../options/format').Spaces;\n\nvar Marker = require('../tokenizer/marker');\nvar Token = require('../tokenizer/token');\n\nfunction supportsAfterClosingBrace(token) {\n  return token[1][1] == 'background' || token[1][1] == 'transform' || token[1][1] == 'src';\n}\n\nfunction afterClosingBrace(token, valueIndex) {\n  return token[valueIndex][1][token[valueIndex][1].length - 1] == Marker.CLOSE_ROUND_BRACKET;\n}\n\nfunction afterComma(token, valueIndex) {\n  return token[valueIndex][1] == Marker.COMMA;\n}\n\nfunction afterSlash(token, valueIndex) {\n  return token[valueIndex][1] == Marker.FORWARD_SLASH;\n}\n\nfunction beforeComma(token, valueIndex) {\n  return token[valueIndex + 1] && token[valueIndex + 1][1] == Marker.COMMA;\n}\n\nfunction beforeSlash(token, valueIndex) {\n  return token[valueIndex + 1] && token[valueIndex + 1][1] == Marker.FORWARD_SLASH;\n}\n\nfunction inFilter(token) {\n  return token[1][1] == 'filter' || token[1][1] == '-ms-filter';\n}\n\nfunction disallowsSpace(context, token, valueIndex) {\n  return !context.spaceAfterClosingBrace && supportsAfterClosingBrace(token) && afterClosingBrace(token, valueIndex) ||\n    beforeSlash(token, valueIndex) ||\n    afterSlash(token, valueIndex) ||\n    beforeComma(token, valueIndex) ||\n    afterComma(token, valueIndex);\n}\n\nfunction rules(context, tokens) {\n  var store = context.store;\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    store(context, tokens[i]);\n\n    if (i < l - 1) {\n      store(context, comma(context));\n    }\n  }\n}\n\nfunction body(context, tokens) {\n  var lastPropertyAt = lastPropertyIndex(tokens);\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    property(context, tokens, i, lastPropertyAt);\n  }\n}\n\nfunction lastPropertyIndex(tokens) {\n  var index = tokens.length - 1;\n\n  for (; index >= 0; index--) {\n    if (tokens[index][0] != Token.COMMENT) {\n      break;\n    }\n  }\n\n  return index;\n}\n\nfunction property(context, tokens, position, lastPropertyAt) {\n  var store = context.store;\n  var token = tokens[position];\n  var isPropertyBlock = token[2][0] == Token.PROPERTY_BLOCK;\n  var needsSemicolon = position < lastPropertyAt || isPropertyBlock;\n  var isLast = position === lastPropertyAt;\n\n  switch (token[0]) {\n    case Token.AT_RULE:\n      store(context, token);\n      store(context, semicolon(context, Breaks.AfterProperty, false));\n      break;\n    case Token.AT_RULE_BLOCK:\n      rules(context, token[1]);\n      store(context, openBrace(context, Breaks.AfterRuleBegins, true));\n      body(context, token[2]);\n      store(context, closeBrace(context, Breaks.AfterRuleEnds, false, isLast));\n      break;\n    case Token.COMMENT:\n      store(context, token);\n      break;\n    case Token.PROPERTY:\n      store(context, token[1]);\n      store(context, colon(context));\n      value(context, token);\n      store(context, needsSemicolon ? semicolon(context, Breaks.AfterProperty, isLast) : emptyCharacter);\n  }\n}\n\nfunction value(context, token) {\n  var store = context.store;\n  var j, m;\n\n  if (token[2][0] == Token.PROPERTY_BLOCK) {\n    store(context, openBrace(context, Breaks.AfterBlockBegins, false));\n    body(context, token[2][1]);\n    store(context, closeBrace(context, Breaks.AfterBlockEnds, false, true));\n  } else {\n    for (j = 2, m = token.length; j < m; j++) {\n      store(context, token[j]);\n\n      if (j < m - 1 && (inFilter(token) || !disallowsSpace(context, token, j))) {\n        store(context, Marker.SPACE);\n      }\n    }\n  }\n}\n\nfunction allowsBreak(context, where) {\n  return context.format && context.format.breaks[where];\n}\n\nfunction allowsSpace(context, where) {\n  return context.format && context.format.spaces[where];\n}\n\nfunction openBrace(context, where, needsPrefixSpace) {\n  if (context.format) {\n    context.indentBy += context.format.indentBy;\n    context.indentWith = context.format.indentWith.repeat(context.indentBy);\n    return (needsPrefixSpace && allowsSpace(context, Spaces.BeforeBlockBegins) ? Marker.SPACE : emptyCharacter) +\n      Marker.OPEN_CURLY_BRACKET +\n      (allowsBreak(context, where) ? lineBreak : emptyCharacter) +\n      context.indentWith;\n  } else {\n    return Marker.OPEN_CURLY_BRACKET;\n  }\n}\n\nfunction closeBrace(context, where, beforeBlockEnd, isLast) {\n  if (context.format) {\n    context.indentBy -= context.format.indentBy;\n    context.indentWith = context.format.indentWith.repeat(context.indentBy);\n    return (allowsBreak(context, Breaks.AfterProperty) || beforeBlockEnd && allowsBreak(context, Breaks.BeforeBlockEnds) ? lineBreak : emptyCharacter) +\n      context.indentWith +\n      Marker.CLOSE_CURLY_BRACKET +\n      (isLast ? emptyCharacter : (allowsBreak(context, where) ? lineBreak : emptyCharacter) + context.indentWith);\n  } else {\n    return Marker.CLOSE_CURLY_BRACKET;\n  }\n}\n\nfunction colon(context) {\n  return context.format ?\n    Marker.COLON + (allowsSpace(context, Spaces.BeforeValue) ? Marker.SPACE : emptyCharacter) :\n    Marker.COLON;\n}\n\nfunction semicolon(context, where, isLast) {\n  return context.format ?\n    Marker.SEMICOLON + (isLast || !allowsBreak(context, where) ? emptyCharacter : lineBreak + context.indentWith) :\n    Marker.SEMICOLON;\n}\n\nfunction comma(context) {\n  return context.format ?\n    Marker.COMMA + (allowsBreak(context, Breaks.BetweenSelectors) ? lineBreak : emptyCharacter) + context.indentWith :\n    Marker.COMMA;\n}\n\nfunction all(context, tokens) {\n  var store = context.store;\n  var token;\n  var isLast;\n  var i, l;\n\n  for (i = 0, l = tokens.length; i < l; i++) {\n    token = tokens[i];\n    isLast = i == l - 1;\n\n    switch (token[0]) {\n      case Token.AT_RULE:\n        store(context, token);\n        store(context, semicolon(context, Breaks.AfterAtRule, isLast));\n        break;\n      case Token.AT_RULE_BLOCK:\n        rules(context, token[1]);\n        store(context, openBrace(context, Breaks.AfterRuleBegins, true));\n        body(context, token[2]);\n        store(context, closeBrace(context, Breaks.AfterRuleEnds, false, isLast));\n        break;\n      case Token.NESTED_BLOCK:\n        rules(context, token[1]);\n        store(context, openBrace(context, Breaks.AfterBlockBegins, true));\n        all(context, token[2]);\n        store(context, closeBrace(context, Breaks.AfterBlockEnds, true, isLast));\n        break;\n      case Token.COMMENT:\n        store(context, token);\n        store(context, allowsBreak(context, Breaks.AfterComment) ? lineBreak : emptyCharacter);\n        break;\n      case Token.RULE:\n        rules(context, token[1]);\n        store(context, openBrace(context, Breaks.AfterRuleBegins, true));\n        body(context, token[2]);\n        store(context, closeBrace(context, Breaks.AfterRuleEnds, false, isLast));\n        break;\n    }\n  }\n}\n\nmodule.exports = {\n  all: all,\n  body: body,\n  property: property,\n  rules: rules,\n  value: value\n};\n"]}
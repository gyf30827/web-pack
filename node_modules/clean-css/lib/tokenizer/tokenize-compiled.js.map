{"version":3,"sources":["tokenize.js"],"names":[],"mappings":"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","file":"tokenize-compiled.js","sourcesContent":["var Marker = require('./marker');\nvar Token = require('./token');\n\nvar formatPosition = require('../utils/format-position');\n\nvar Level = {\n  BLOCK: 'block',\n  COMMENT: 'comment',\n  DOUBLE_QUOTE: 'double-quote',\n  RULE: 'rule',\n  SINGLE_QUOTE: 'single-quote'\n};\n\nvar AT_RULES = [\n  '@charset',\n  '@import'\n];\n\nvar BLOCK_RULES = [\n  '@-moz-document',\n  '@document',\n  '@-moz-keyframes',\n  '@-ms-keyframes',\n  '@-o-keyframes',\n  '@-webkit-keyframes',\n  '@keyframes',\n  '@media',\n  '@supports'\n];\n\nvar PAGE_MARGIN_BOXES = [\n  '@bottom-center',\n  '@bottom-left',\n  '@bottom-left-corner',\n  '@bottom-right',\n  '@bottom-right-corner',\n  '@left-bottom',\n  '@left-middle',\n  '@left-top',\n  '@right-bottom',\n  '@right-middle',\n  '@right-top',\n  '@top-center',\n  '@top-left',\n  '@top-left-corner',\n  '@top-right',\n  '@top-right-corner'\n];\n\nvar EXTRA_PAGE_BOXES = [\n  '@footnote',\n  '@footnotes',\n  '@left',\n  '@page-float-bottom',\n  '@page-float-top',\n  '@right'\n];\n\nvar REPEAT_PATTERN = /^\\[\\s*\\d+\\s*\\]$/;\nvar RULE_WORD_SEPARATOR_PATTERN = /[\\s\\(]/;\nvar TAIL_BROKEN_VALUE_PATTERN = /[\\s|\\}]*$/;\n\nfunction tokenize(source, externalContext) {\n  var internalContext = {\n    level: Level.BLOCK,\n    position: {\n      source: externalContext.source || undefined,\n      line: 1,\n      column: 0,\n      index: 0\n    }\n  };\n\n  return intoTokens(source, externalContext, internalContext, false);\n}\n\nfunction intoTokens(source, externalContext, internalContext, isNested) {\n  var allTokens = [];\n  var newTokens = allTokens;\n  var lastToken;\n  var ruleToken;\n  var ruleTokens = [];\n  var propertyToken;\n  var metadata;\n  var metadatas = [];\n  var level = internalContext.level;\n  var levels = [];\n  var buffer = [];\n  var buffers = [];\n  var serializedBuffer;\n  var roundBracketLevel = 0;\n  var isQuoted;\n  var isSpace;\n  var isNewLineNix;\n  var isNewLineWin;\n  var isCommentStart;\n  var wasCommentStart = false;\n  var isCommentEnd;\n  var wasCommentEnd = false;\n  var isCommentEndMarker;\n  var isEscaped;\n  var wasEscaped = false;\n  var seekingValue = false;\n  var seekingPropertyBlockClosing = false;\n  var position = internalContext.position;\n\n  for (; position.index < source.length; position.index++) {\n    var character = source[position.index];\n\n    isQuoted = level == Level.SINGLE_QUOTE || level == Level.DOUBLE_QUOTE;\n    isSpace = character == Marker.SPACE || character == Marker.TAB;\n    isNewLineNix = character == Marker.NEW_LINE_NIX;\n    isNewLineWin = character == Marker.NEW_LINE_NIX && source[position.index - 1] == Marker.NEW_LINE_WIN;\n    isCommentStart = !wasCommentEnd && level != Level.COMMENT && !isQuoted && character == Marker.ASTERISK && source[position.index - 1] == Marker.FORWARD_SLASH;\n    isCommentEndMarker = !wasCommentStart && !isQuoted && character == Marker.FORWARD_SLASH && source[position.index - 1] == Marker.ASTERISK;\n    isCommentEnd = level == Level.COMMENT && isCommentEndMarker;\n\n    metadata = buffer.length === 0 ?\n      [position.line, position.column, position.source] :\n      metadata;\n\n    if (isEscaped) {\n      // previous character was a backslash\n      buffer.push(character);\n    } else if (!isCommentEnd && level == Level.COMMENT) {\n      buffer.push(character);\n    } else if (isCommentStart && (level == Level.BLOCK || level == Level.RULE) && buffer.length > 1) {\n      // comment start within block preceded by some content, e.g. div/*<--\n      metadatas.push(metadata);\n      buffer.push(character);\n      buffers.push(buffer.slice(0, buffer.length - 2));\n\n      buffer = buffer.slice(buffer.length - 2);\n      metadata = [position.line, position.column - 1, position.source];\n\n      levels.push(level);\n      level = Level.COMMENT;\n    } else if (isCommentStart) {\n      // comment start, e.g. /*<--\n      levels.push(level);\n      level = Level.COMMENT;\n      buffer.push(character);\n    } else if (isCommentEnd) {\n      // comment end, e.g. /* comment */<--\n      serializedBuffer = buffer.join('').trim() + character;\n      lastToken = [Token.COMMENT, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]];\n      newTokens.push(lastToken);\n\n      level = levels.pop();\n      metadata = metadatas.pop() || null;\n      buffer = buffers.pop() || [];\n    } else if (isCommentEndMarker && source[position.index + 1] != Marker.ASTERISK) {\n      externalContext.warnings.push('Unexpected \\'*/\\' at ' + formatPosition([position.line, position.column, position.source]) + '.');\n      buffer = [];\n    } else if (character == Marker.SINGLE_QUOTE && !isQuoted) {\n      // single quotation start, e.g. a[href^='https<--\n      levels.push(level);\n      level = Level.SINGLE_QUOTE;\n      buffer.push(character);\n    } else if (character == Marker.SINGLE_QUOTE && level == Level.SINGLE_QUOTE) {\n      // single quotation end, e.g. a[href^='https'<--\n      level = levels.pop();\n      buffer.push(character);\n    } else if (character == Marker.DOUBLE_QUOTE && !isQuoted) {\n      // double quotation start, e.g. a[href^=\"<--\n      levels.push(level);\n      level = Level.DOUBLE_QUOTE;\n      buffer.push(character);\n    } else if (character == Marker.DOUBLE_QUOTE && level == Level.DOUBLE_QUOTE) {\n      // double quotation end, e.g. a[href^=\"https\"<--\n      level = levels.pop();\n      buffer.push(character);\n    } else if (!isCommentStart && !isCommentEnd && character != Marker.CLOSE_ROUND_BRACKET && character != Marker.OPEN_ROUND_BRACKET && level != Level.COMMENT && !isQuoted && roundBracketLevel > 0) {\n      // character inside any function, e.g. hsla(.<--\n      buffer.push(character);\n    } else if (character == Marker.OPEN_ROUND_BRACKET && !isQuoted && level != Level.COMMENT && !seekingValue) {\n      // round open bracket, e.g. @import url(<--\n      buffer.push(character);\n\n      roundBracketLevel++;\n    } else if (character == Marker.CLOSE_ROUND_BRACKET && !isQuoted && level != Level.COMMENT && !seekingValue) {\n      // round open bracket, e.g. @import url(test.css)<--\n      buffer.push(character);\n\n      roundBracketLevel--;\n    } else if (character == Marker.SEMICOLON && level == Level.BLOCK && buffer[0] == Marker.AT) {\n      // semicolon ending rule at block level, e.g. @import '...';<--\n      serializedBuffer = buffer.join('').trim();\n      allTokens.push([Token.AT_RULE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n\n      buffer = [];\n    } else if (character == Marker.COMMA && level == Level.BLOCK && ruleToken) {\n      // comma separator at block level, e.g. a,div,<--\n      serializedBuffer = buffer.join('').trim();\n      ruleToken[1].push([tokenScopeFrom(ruleToken[0]), serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext, ruleToken[1].length)]]);\n\n      buffer = [];\n    } else if (character == Marker.COMMA && level == Level.BLOCK && tokenTypeFrom(buffer) == Token.AT_RULE) {\n      // comma separator at block level, e.g. @import url(...) screen,<--\n      // keep iterating as end semicolon will create the token\n      buffer.push(character);\n    } else if (character == Marker.COMMA && level == Level.BLOCK) {\n      // comma separator at block level, e.g. a,<--\n      ruleToken = [tokenTypeFrom(buffer), [], []];\n      serializedBuffer = buffer.join('').trim();\n      ruleToken[1].push([tokenScopeFrom(ruleToken[0]), serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext, 0)]]);\n\n      buffer = [];\n    } else if (character == Marker.OPEN_CURLY_BRACKET && level == Level.BLOCK && ruleToken && ruleToken[0] == Token.NESTED_BLOCK) {\n      // open brace opening at-rule at block level, e.g. @media{<--\n      serializedBuffer = buffer.join('').trim();\n      ruleToken[1].push([Token.NESTED_BLOCK_SCOPE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      allTokens.push(ruleToken);\n\n      levels.push(level);\n      position.column++;\n      position.index++;\n      buffer = [];\n\n      ruleToken[2] = intoTokens(source, externalContext, internalContext, true);\n      ruleToken = null;\n    } else if (character == Marker.OPEN_CURLY_BRACKET && level == Level.BLOCK && tokenTypeFrom(buffer) == Token.NESTED_BLOCK) {\n      // open brace opening at-rule at block level, e.g. @media{<--\n      serializedBuffer = buffer.join('').trim();\n      ruleToken = ruleToken || [Token.NESTED_BLOCK, [], []];\n      ruleToken[1].push([Token.NESTED_BLOCK_SCOPE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      allTokens.push(ruleToken);\n\n      levels.push(level);\n      position.column++;\n      position.index++;\n      buffer = [];\n\n      ruleToken[2] = intoTokens(source, externalContext, internalContext, true);\n      ruleToken = null;\n    } else if (character == Marker.OPEN_CURLY_BRACKET && level == Level.BLOCK) {\n      // open brace opening rule at block level, e.g. div{<--\n      serializedBuffer = buffer.join('').trim();\n      ruleToken = ruleToken || [tokenTypeFrom(buffer), [], []];\n      ruleToken[1].push([tokenScopeFrom(ruleToken[0]), serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext, ruleToken[1].length)]]);\n      newTokens = ruleToken[2];\n      allTokens.push(ruleToken);\n\n      levels.push(level);\n      level = Level.RULE;\n      buffer = [];\n    } else if (character == Marker.OPEN_CURLY_BRACKET && level == Level.RULE && seekingValue) {\n      // open brace opening rule at rule level, e.g. div{--variable:{<--\n      ruleTokens.push(ruleToken);\n      ruleToken = [Token.PROPERTY_BLOCK, []];\n      propertyToken.push(ruleToken);\n      newTokens = ruleToken[1];\n\n      levels.push(level);\n      level = Level.RULE;\n      seekingValue = false;\n    } else if (character == Marker.OPEN_CURLY_BRACKET && level == Level.RULE && isPageMarginBox(buffer)) {\n      // open brace opening page-margin box at rule level, e.g. @page{@top-center{<--\n      serializedBuffer = buffer.join('').trim();\n      ruleTokens.push(ruleToken);\n      ruleToken = [Token.AT_RULE_BLOCK, [], []];\n      ruleToken[1].push([Token.AT_RULE_BLOCK_SCOPE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      newTokens.push(ruleToken);\n      newTokens = ruleToken[2];\n\n      levels.push(level);\n      level = Level.RULE;\n      buffer = [];\n    } else if (character == Marker.COLON && level == Level.RULE && !seekingValue) {\n      // colon at rule level, e.g. a{color:<--\n      serializedBuffer = buffer.join('').trim();\n      propertyToken = [Token.PROPERTY, [Token.PROPERTY_NAME, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]];\n      newTokens.push(propertyToken);\n\n      seekingValue = true;\n      buffer = [];\n    } else if (character == Marker.SEMICOLON && level == Level.RULE && propertyToken && ruleTokens.length > 0 && buffer.length > 0 && buffer[0] == Marker.AT) {\n      // semicolon at rule level for at-rule, e.g. a{--color:{@apply(--other-color);<--\n      serializedBuffer = buffer.join('').trim();\n      ruleToken[1].push([Token.AT_RULE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n\n      buffer = [];\n    } else if (character == Marker.SEMICOLON && level == Level.RULE && propertyToken && buffer.length > 0) {\n      // semicolon at rule level, e.g. a{color:red;<--\n      serializedBuffer = buffer.join('').trim();\n      propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n\n      propertyToken = null;\n      seekingValue = false;\n      buffer = [];\n    } else if (character == Marker.SEMICOLON && level == Level.RULE && propertyToken && buffer.length === 0) {\n      // semicolon after bracketed value at rule level, e.g. a{color:rgb(...);<--\n      propertyToken = null;\n      seekingValue = false;\n    } else if (character == Marker.SEMICOLON && level == Level.RULE && buffer.length > 0 && buffer[0] == Marker.AT) {\n      // semicolon for at-rule at rule level, e.g. a{@apply(--variable);<--\n      serializedBuffer = buffer.join('');\n      newTokens.push([Token.AT_RULE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n\n      seekingValue = false;\n      buffer = [];\n    } else if (character == Marker.SEMICOLON && level == Level.RULE && seekingPropertyBlockClosing) {\n      // close brace after a property block at rule level, e.g. a{--custom:{color:red;};<--\n      seekingPropertyBlockClosing = false;\n      buffer = [];\n    } else if (character == Marker.SEMICOLON && level == Level.RULE && buffer.length === 0) {\n      // stray semicolon at rule level, e.g. a{;<--\n      // noop\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.RULE && propertyToken && seekingValue && buffer.length > 0 && ruleTokens.length > 0) {\n      // close brace at rule level, e.g. a{--color:{color:red}<--\n      serializedBuffer = buffer.join('');\n      propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      propertyToken = null;\n      ruleToken = ruleTokens.pop();\n      newTokens = ruleToken[2];\n\n      level = levels.pop();\n      seekingValue = false;\n      buffer = [];\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.RULE && propertyToken && buffer.length > 0 && buffer[0] == Marker.AT && ruleTokens.length > 0) {\n      // close brace at rule level for at-rule, e.g. a{--color:{@apply(--other-color)}<--\n      serializedBuffer = buffer.join('');\n      ruleToken[1].push([Token.AT_RULE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      propertyToken = null;\n      ruleToken = ruleTokens.pop();\n      newTokens = ruleToken[2];\n\n      level = levels.pop();\n      seekingValue = false;\n      buffer = [];\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.RULE && propertyToken && ruleTokens.length > 0) {\n      // close brace at rule level after space, e.g. a{--color:{color:red }<--\n      propertyToken = null;\n      ruleToken = ruleTokens.pop();\n      newTokens = ruleToken[2];\n\n      level = levels.pop();\n      seekingValue = false;\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.RULE && propertyToken && buffer.length > 0) {\n      // close brace at rule level, e.g. a{color:red}<--\n      serializedBuffer = buffer.join('');\n      propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      propertyToken = null;\n      ruleToken = ruleTokens.pop();\n      newTokens = allTokens;\n\n      level = levels.pop();\n      seekingValue = false;\n      buffer = [];\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.RULE && buffer.length > 0 && buffer[0] == Marker.AT) {\n      // close brace after at-rule at rule level, e.g. a{@apply(--variable)}<--\n      propertyToken = null;\n      ruleToken = null;\n      serializedBuffer = buffer.join('').trim();\n      newTokens.push([Token.AT_RULE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      newTokens = allTokens;\n\n      level = levels.pop();\n      seekingValue = false;\n      buffer = [];\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.RULE && levels[levels.length - 1] == Level.RULE) {\n      // close brace after a property block at rule level, e.g. a{--custom:{color:red;}<--\n      propertyToken = null;\n      ruleToken = ruleTokens.pop();\n      newTokens = ruleToken[2];\n\n      level = levels.pop();\n      seekingValue = false;\n      seekingPropertyBlockClosing = true;\n      buffer = [];\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.RULE) {\n      // close brace after a rule, e.g. a{color:red;}<--\n      propertyToken = null;\n      ruleToken = null;\n      newTokens = allTokens;\n\n      level = levels.pop();\n      seekingValue = false;\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.BLOCK && !isNested && position.index <= source.length - 1) {\n      // stray close brace at block level, e.g. a{color:red}color:blue}<--\n      externalContext.warnings.push('Unexpected \\'}\\' at ' + formatPosition([position.line, position.column, position.source]) + '.');\n      buffer.push(character);\n    } else if (character == Marker.CLOSE_CURLY_BRACKET && level == Level.BLOCK) {\n      // close brace at block level, e.g. @media screen {...}<--\n      break;\n    } else if (character == Marker.OPEN_ROUND_BRACKET && level == Level.RULE && seekingValue) {\n      // round open bracket, e.g. a{color:hsla(<--\n      buffer.push(character);\n      roundBracketLevel++;\n    } else if (character == Marker.CLOSE_ROUND_BRACKET && level == Level.RULE && seekingValue && roundBracketLevel == 1) {\n      // round close bracket, e.g. a{color:hsla(0,0%,0%)<--\n      buffer.push(character);\n      serializedBuffer = buffer.join('').trim();\n      propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n\n      roundBracketLevel--;\n      buffer = [];\n    } else if (character == Marker.CLOSE_ROUND_BRACKET && level == Level.RULE && seekingValue) {\n      // round close bracket within other brackets, e.g. a{width:calc((10rem / 2)<--\n      buffer.push(character);\n      roundBracketLevel--;\n    } else if (character == Marker.FORWARD_SLASH && source[position.index + 1] != Marker.ASTERISK && level == Level.RULE && seekingValue && buffer.length > 0) {\n      // forward slash within a property, e.g. a{background:url(image.png) 0 0/<--\n      serializedBuffer = buffer.join('').trim();\n      propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      propertyToken.push([Token.PROPERTY_VALUE, character, [[position.line, position.column, position.source]]]);\n\n      buffer = [];\n    } else if (character == Marker.FORWARD_SLASH && source[position.index + 1] != Marker.ASTERISK && level == Level.RULE && seekingValue) {\n      // forward slash within a property after space, e.g. a{background:url(image.png) 0 0 /<--\n      propertyToken.push([Token.PROPERTY_VALUE, character, [[position.line, position.column, position.source]]]);\n\n      buffer = [];\n    } else if (character == Marker.COMMA && level == Level.RULE && seekingValue && buffer.length > 0) {\n      // comma within a property, e.g. a{background:url(image.png),<--\n      serializedBuffer = buffer.join('').trim();\n      propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n      propertyToken.push([Token.PROPERTY_VALUE, character, [[position.line, position.column, position.source]]]);\n\n      buffer = [];\n    } else if (character == Marker.COMMA && level == Level.RULE && seekingValue) {\n      // comma within a property after space, e.g. a{background:url(image.png) ,<--\n      propertyToken.push([Token.PROPERTY_VALUE, character, [[position.line, position.column, position.source]]]);\n\n      buffer = [];\n    } else if (character == Marker.CLOSE_SQUARE_BRACKET && propertyToken && propertyToken.length > 1 && buffer.length > 0 && isRepeatToken(buffer)) {\n      buffer.push(character);\n      serializedBuffer = buffer.join('').trim();\n      propertyToken[propertyToken.length - 1][1] += serializedBuffer;\n\n      buffer = [];\n    } else if ((isSpace || (isNewLineNix && !isNewLineWin)) && level == Level.RULE && seekingValue && propertyToken && buffer.length > 0) {\n      // space or *nix newline within property, e.g. a{margin:0 <--\n      serializedBuffer = buffer.join('').trim();\n      propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n\n      buffer = [];\n    } else if (isNewLineWin && level == Level.RULE && seekingValue && propertyToken && buffer.length > 1) {\n      // win newline within property, e.g. a{margin:0\\r\\n<--\n      serializedBuffer = buffer.join('').trim();\n      propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n\n      buffer = [];\n    } else if (isNewLineWin && level == Level.RULE && seekingValue) {\n      // win newline\n      buffer = [];\n    } else if (buffer.length == 1 && isNewLineWin) {\n      // ignore windows newline which is composed of two characters\n      buffer.pop();\n    } else if (buffer.length > 0 || !isSpace && !isNewLineNix && !isNewLineWin) {\n      // any character\n      buffer.push(character);\n    }\n\n    wasEscaped = isEscaped;\n    isEscaped = !wasEscaped && character == Marker.BACK_SLASH;\n    wasCommentStart = isCommentStart;\n    wasCommentEnd = isCommentEnd;\n\n    position.line = (isNewLineWin || isNewLineNix) ? position.line + 1 : position.line;\n    position.column = (isNewLineWin || isNewLineNix) ? 0 : position.column + 1;\n  }\n\n  if (seekingValue) {\n    externalContext.warnings.push('Missing \\'}\\' at ' + formatPosition([position.line, position.column, position.source]) + '.');\n  }\n\n  if (seekingValue && buffer.length > 0) {\n    serializedBuffer = buffer.join('').replace(TAIL_BROKEN_VALUE_PATTERN, '');\n    propertyToken.push([Token.PROPERTY_VALUE, serializedBuffer, [originalMetadata(metadata, serializedBuffer, externalContext)]]);\n\n    buffer = [];\n  }\n\n  if (buffer.length > 0) {\n    externalContext.warnings.push('Invalid character(s) \\'' + buffer.join('') + '\\' at ' + formatPosition(metadata) + '. Ignoring.');\n  }\n\n  return allTokens;\n}\n\nfunction originalMetadata(metadata, value, externalContext, selectorFallbacks) {\n  var source = metadata[2];\n\n  return externalContext.inputSourceMapTracker.isTracking(source) ?\n    externalContext.inputSourceMapTracker.originalPositionFor(metadata, value.length, selectorFallbacks) :\n    metadata;\n}\n\nfunction tokenTypeFrom(buffer) {\n  var isAtRule = buffer[0] == Marker.AT || buffer[0] == Marker.UNDERSCORE;\n  var ruleWord = buffer.join('').split(RULE_WORD_SEPARATOR_PATTERN)[0];\n\n  if (isAtRule && BLOCK_RULES.indexOf(ruleWord) > -1) {\n    return Token.NESTED_BLOCK;\n  } else if (isAtRule && AT_RULES.indexOf(ruleWord) > -1) {\n    return Token.AT_RULE;\n  } else if (isAtRule) {\n    return Token.AT_RULE_BLOCK;\n  } else {\n    return Token.RULE;\n  }\n}\n\nfunction tokenScopeFrom(tokenType) {\n  if (tokenType == Token.RULE) {\n    return Token.RULE_SCOPE;\n  } else if (tokenType == Token.NESTED_BLOCK) {\n    return Token.NESTED_BLOCK_SCOPE;\n  } else if (tokenType == Token.AT_RULE_BLOCK) {\n    return Token.AT_RULE_BLOCK_SCOPE;\n  }\n}\n\nfunction isPageMarginBox(buffer) {\n  var serializedBuffer = buffer.join('').trim();\n\n  return PAGE_MARGIN_BOXES.indexOf(serializedBuffer) > -1 || EXTRA_PAGE_BOXES.indexOf(serializedBuffer) > -1;\n}\n\nfunction isRepeatToken(buffer) {\n  return REPEAT_PATTERN.test(buffer.join('') + Marker.CLOSE_SQUARE_BRACKET);\n}\n\nmodule.exports = tokenize;\n"]}
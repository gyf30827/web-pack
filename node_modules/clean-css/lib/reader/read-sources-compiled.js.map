{"version":3,"sources":["read-sources.js"],"names":[],"mappings":"AAAA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;;AAEA,IAAI,kBAAkB,QAAQ,qBAAR,CAAtB;AACA,IAAI,2BAA2B,QAAQ,gCAAR,CAA/B;AACA,IAAI,oBAAoB,QAAQ,uBAAR,CAAxB;AACA,IAAI,sBAAsB,QAAQ,yBAAR,CAA1B;AACA,IAAI,gBAAgB,QAAQ,kBAAR,CAApB;AACA,IAAI,SAAS,QAAQ,UAAR,CAAb;AACA,IAAI,iBAAiB,QAAQ,oBAAR,CAArB;AACA,IAAI,kBAAkB,QAAQ,qBAAR,CAAtB;AACA,IAAI,gBAAgB,QAAQ,kBAAR,CAApB;;AAEA,IAAI,WAAW,QAAQ,uBAAR,CAAf;AACA,IAAI,QAAQ,QAAQ,oBAAR,CAAZ;AACA,IAAI,SAAS,QAAQ,qBAAR,CAAb;AACA,IAAI,cAAc,QAAQ,uBAAR,CAAlB;AACA,IAAI,WAAW,QAAQ,oBAAR,CAAf;AACA,IAAI,mBAAmB,QAAQ,6BAAR,CAAvB;;AAEA,IAAI,cAAc,aAAlB;;AAEA,SAAS,WAAT,CAAqB,KAArB,EAA4B,OAA5B,EAAqC,QAArC,EAA+C;AAC7C,SAAO,cAAc,KAAd,EAAqB,OAArB,EAA8B,UAAU,MAAV,EAAkB;AACrD,WAAO,gBAAgB,MAAhB,EAAwB,OAAxB,EAAiC,YAAY;AAClD,aAAO,oBAAoB,OAApB,EAA6B,YAAY;AAAE,eAAO,SAAS,MAAT,CAAP;AAA0B,OAArE,CAAP;AACD,KAFM,CAAP;AAGD,GAJM,CAAP;AAKD;;AAED,SAAS,aAAT,CAAuB,KAAvB,EAA8B,OAA9B,EAAuC,QAAvC,EAAiD;AAC/C,MAAI,OAAO,KAAP,IAAgB,QAApB,EAA8B;AAC5B,WAAO,WAAW,KAAX,EAAkB,OAAlB,EAA2B,QAA3B,CAAP;AACD,GAFD,MAEO,IAAI,OAAO,QAAP,CAAgB,KAAhB,CAAJ,EAA4B;AACjC,WAAO,WAAW,MAAM,QAAN,EAAX,EAA6B,OAA7B,EAAsC,QAAtC,CAAP;AACD,GAFM,MAEA,IAAI,MAAM,OAAN,CAAc,KAAd,CAAJ,EAA0B;AAC/B,WAAO,UAAU,KAAV,EAAiB,OAAjB,EAA0B,QAA1B,CAAP;AACD,GAFM,MAEA,IAAI,OAAO,KAAP,IAAgB,QAApB,EAA8B;AACnC,WAAO,SAAS,KAAT,EAAgB,OAAhB,EAAyB,QAAzB,CAAP;AACD;AACF;;AAED,SAAS,UAAT,CAAoB,KAApB,EAA2B,OAA3B,EAAoC,QAApC,EAA8C;AAC5C,UAAQ,MAAR,GAAiB,SAAjB;AACA,UAAQ,cAAR,CAAuB,SAAvB,IAAoC,KAApC;AACA,UAAQ,KAAR,CAAc,YAAd,IAA8B,MAAM,MAApC;;AAEA,SAAO,WAAW,KAAX,EAAkB,OAAlB,EAA2B,EAAE,QAAQ,QAAQ,OAAR,CAAgB,MAA1B,EAA3B,EAA+D,QAA/D,CAAP;AACD;;AAED,SAAS,SAAT,CAAmB,KAAnB,EAA0B,OAA1B,EAAmC,QAAnC,EAA6C;AAC3C,MAAI,iBAAiB,MAAM,MAAN,CAAa,UAAU,WAAV,EAAuB,SAAvB,EAAkC;AAClE,QAAI,OAAO,SAAP,KAAqB,QAAzB,EAAmC;AACjC,aAAO,gBAAgB,SAAhB,EAA2B,WAA3B,CAAP;AACD,KAFD,MAEO;AACL,aAAO,cAAc,SAAd,EAAyB,OAAzB,EAAkC,WAAlC,CAAP;AACD;AAEF,GAPoB,EAOlB,EAPkB,CAArB;;AASA,SAAO,WAAW,eAAe,IAAf,CAAoB,EAApB,CAAX,EAAoC,OAApC,EAA6C,EAAE,QAAQ,CAAC,KAAD,CAAV,EAA7C,EAAkE,QAAlE,CAAP;AACD;;AAED,SAAS,QAAT,CAAkB,KAAlB,EAAyB,OAAzB,EAAkC,QAAlC,EAA4C;AAC1C,MAAI,iBAAiB,cAAc,KAAd,EAAqB,OAArB,EAA8B,EAA9B,CAArB;AACA,SAAO,WAAW,eAAe,IAAf,CAAoB,EAApB,CAAX,EAAoC,OAApC,EAA6C,EAAE,QAAQ,CAAC,KAAD,CAAV,EAA7C,EAAkE,QAAlE,CAAP;AACD;;AAED,SAAS,eAAT,CAAyB,KAAzB,EAAgC,OAAhC,EAAyC;AACvC,UAAQ,IAAR,CAAa,gBAAgB,aAAa,KAAb,CAAhB,CAAb;AACA,SAAO,OAAP;AACD;;AAED,SAAS,aAAT,CAAuB,KAAvB,EAA8B,OAA9B,EAAuC,OAAvC,EAAgD;AAC9C,MAAI,GAAJ;AACA,MAAI,aAAJ;AACA,MAAI,MAAJ;;AAEA,OAAK,GAAL,IAAY,KAAZ,EAAmB;AACjB,aAAS,MAAM,GAAN,CAAT;AACA,oBAAgB,aAAa,GAAb,CAAhB;;AAEA,YAAQ,IAAR,CAAa,gBAAgB,aAAhB,CAAb;;AAEA,YAAQ,cAAR,CAAuB,aAAvB,IAAwC,OAAO,MAA/C;;AAEA,QAAI,OAAO,SAAX,EAAsB;AACpB,qBAAe,OAAO,SAAtB,EAAiC,aAAjC,EAAgD,OAAhD;AACD;AACF;;AAED,SAAO,OAAP;AACD;;AAED,SAAS,YAAT,CAAsB,GAAtB,EAA2B;AACzB,MAAI,cAAc,KAAK,OAAL,CAAa,EAAb,CAAlB;AACA,MAAI,WAAJ;AACA,MAAI,qBAAJ;AACA,MAAI,aAAJ;;AAEA,MAAI,iBAAiB,GAAjB,CAAJ,EAA2B;AACzB,WAAO,GAAP;AACD;;AAED,gBAAc,KAAK,UAAL,CAAgB,GAAhB,IACZ,GADY,GAEZ,KAAK,OAAL,CAAa,GAAb,CAFF;AAGA,0BAAwB,KAAK,QAAL,CAAc,WAAd,EAA2B,WAA3B,CAAxB;AACA,kBAAgB,cAAc,qBAAd,CAAhB;;AAEA,SAAO,aAAP;AACD;;AAED,SAAS,cAAT,CAAwB,SAAxB,EAAmC,GAAnC,EAAwC,OAAxC,EAAiD;AAC/C,MAAI,YAAY,OAAO,SAAP,IAAoB,QAApB,GACZ,KAAK,KAAL,CAAW,SAAX,CADY,GAEZ,SAFJ;AAGA,MAAI,aAAa,iBAAiB,GAAjB,IACf,gBAAgB,SAAhB,EAA2B,GAA3B,CADe,GAEf,eAAe,SAAf,EAA0B,OAAO,WAAjC,EAA8C,QAAQ,OAAR,CAAgB,QAA9D,CAFF;;AAIA,UAAQ,qBAAR,CAA8B,KAA9B,CAAoC,GAApC,EAAyC,UAAzC;AACD;;AAED,SAAS,eAAT,CAAyB,GAAzB,EAA8B;AAC5B,SAAO,cAAc,SAAS,GAAT,GAAe,GAA7B,EAAkC,EAAlC,IAAwC,OAAO,SAAtD;AACD;;AAED,SAAS,UAAT,CAAoB,MAApB,EAA4B,OAA5B,EAAqC,oBAArC,EAA2D,QAA3D,EAAqE;AACnE,MAAI,MAAJ;AACA,MAAI,eAAe,EAAnB;;AAEA,MAAI,CAAC,QAAQ,MAAb,EAAqB;AACnB,iBAAa,QAAb,GAAwB,KAAK,OAAL,CAAa,EAAb,CAAxB;AACA,iBAAa,MAAb,GAAsB,QAAQ,OAAR,CAAgB,QAAtC;AACD,GAHD,MAGO,IAAI,iBAAiB,QAAQ,MAAzB,CAAJ,EAAsC;AAC3C,iBAAa,QAAb,GAAwB,QAAQ,MAAhC;AACA,iBAAa,MAAb,GAAsB,QAAQ,MAA9B;AACD,GAHM,MAGA,IAAI,KAAK,UAAL,CAAgB,QAAQ,MAAxB,CAAJ,EAAqC;AAC1C,iBAAa,QAAb,GAAwB,KAAK,OAAL,CAAa,QAAQ,MAArB,CAAxB;AACA,iBAAa,MAAb,GAAsB,QAAQ,OAAR,CAAgB,QAAtC;AACD,GAHM,MAGA;AACL,iBAAa,QAAb,GAAwB,KAAK,OAAL,CAAa,KAAK,OAAL,CAAa,QAAQ,MAArB,CAAb,CAAxB;AACA,iBAAa,MAAb,GAAsB,QAAQ,OAAR,CAAgB,QAAtC;AACD;;AAED,WAAS,SAAS,MAAT,EAAiB,OAAjB,CAAT;AACA,WAAS,OAAO,MAAP,EAAe,QAAQ,OAAR,CAAgB,MAA/B,EAAuC,QAAQ,SAA/C,EAA0D,YAA1D,CAAT;;AAEA,SAAO,iBAAiB,qBAAqB,MAAtC,IACL,OAAO,MAAP,EAAe,OAAf,EAAwB,oBAAxB,EAA8C,QAA9C,CADK,GAEL,SAAS,MAAT,CAFF;AAGD;;AAED,SAAS,gBAAT,CAA0B,MAA1B,EAAkC;AAChC,SAAO,EAAE,OAAO,MAAP,IAAiB,CAAjB,IAAsB,OAAO,CAAP,KAAa,MAArC,CAAP;AACD;;AAED,SAAS,MAAT,CAAgB,MAAhB,EAAwB,eAAxB,EAAyC,oBAAzC,EAA+D,QAA/D,EAAyE;AACvE,MAAI,iBAAiB;AACnB,kBAAc,KADK;AAEnB,cAAU,QAFS;AAGnB,YAAQ,gBAAgB,MAHL;AAInB,qBAAiB,eAJE;AAKnB,WAAO,gBAAgB,OAAhB,CAAwB,KALZ;AAMnB,wBAAoB,qBAAqB,kBAArB,IAA2C,gBAAgB,kBAN5D;AAOnB,YAAQ,qBAAqB,MAPV;AAQnB,mBAAe,gBAAgB,OAAhB,CAAwB,aARpB;AASnB,mBAAe,gBAAgB,OAAhB,CAAwB,aATpB;AAUnB,cAAU,qBAAqB,QAArB,IAAiC,KAVxB;AAWnB,eAAW,gBAAgB,SAXR;AAYnB,kBAAc,EAZK;AAanB,cAAU,gBAAgB,OAAhB,CAAwB,QAbf;AAcnB,kBAAc,MAdK;AAenB,cAAU,gBAAgB;AAfP,GAArB;;AAkBA,SAAO,gBAAgB,cAAhB,CAAP;AACD;;AAED,SAAS,eAAT,CAAyB,cAAzB,EAAyC;AACvC,MAAI,KAAJ;AACA,MAAI,CAAJ,EAAO,CAAP;;AAEA,OAAK,IAAI,CAAJ,EAAO,IAAI,eAAe,YAAf,CAA4B,MAA5C,EAAoD,IAAI,CAAxD,EAA2D,GAA3D,EAAgE;AAC9D,YAAQ,eAAe,YAAf,CAA4B,CAA5B,CAAR;;AAEA,QAAI,MAAM,CAAN,KAAY,MAAM,OAAlB,IAA6B,SAAS,MAAM,CAAN,CAAT,CAAjC,EAAqD;AACnD,qBAAe,YAAf,CAA4B,MAA5B,CAAmC,CAAnC,EAAsC,CAAtC;AACA,aAAO,iBAAiB,KAAjB,EAAwB,cAAxB,CAAP;AACD,KAHD,MAGO,IAAI,MAAM,CAAN,KAAY,MAAM,OAAlB,IAA6B,MAAM,CAAN,KAAY,MAAM,OAAnD,EAA4D;AACjE,qBAAe,YAAf,CAA4B,IAA5B,CAAiC,KAAjC;AACD,KAFM,MAEA;AACL,qBAAe,YAAf,CAA4B,IAA5B,CAAiC,KAAjC;AACA,qBAAe,YAAf,GAA8B,IAA9B;AACD;AACF;;AAED,iBAAe,YAAf,GAA8B,EAA9B;AACA,SAAO,eAAe,QAAf,CAAwB,eAAe,YAAvC,CAAP;AACD;;AAED,SAAS,gBAAT,CAA0B,KAA1B,EAAiC,cAAjC,EAAiD;AAC/C,MAAI,mBAAmB,yBAAyB,MAAM,CAAN,CAAzB,CAAvB;AACA,MAAI,MAAM,iBAAiB,CAAjB,CAAV;AACA,MAAI,aAAa,iBAAiB,CAAjB,CAAjB;AACA,MAAI,WAAW,MAAM,CAAN,CAAf;;AAEA,SAAO,iBAAiB,GAAjB,IACL,uBAAuB,GAAvB,EAA4B,UAA5B,EAAwC,QAAxC,EAAkD,cAAlD,CADK,GAEL,sBAAsB,GAAtB,EAA2B,UAA3B,EAAuC,QAAvC,EAAiD,cAAjD,CAFF;AAGD;;AAED,SAAS,sBAAT,CAAgC,GAAhC,EAAqC,UAArC,EAAiD,QAAjD,EAA2D,cAA3D,EAA2E;AACzE,MAAI,YAAY,kBAAkB,GAAlB,EAAuB,IAAvB,EAA6B,eAAe,MAA5C,CAAhB;AACA,MAAI,cAAc,GAAlB;AACA,MAAI,WAAW,OAAO,eAAe,eAAf,CAA+B,cAArD;AACA,MAAI,oBAAoB,CAAC,YAAY,GAAZ,CAAzB;;AAEA,MAAI,eAAe,kBAAf,CAAkC,OAAlC,CAA0C,GAA1C,IAAiD,CAAC,CAAtD,EAAyD;AACvD,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,iCAAiC,GAAjC,GAAuC,oCAApE;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;AACA,WAAO,gBAAgB,cAAhB,CAAP;AACD,GAJD,MAIO,IAAI,eAAe,SAAf,IAA4B,eAAe,YAA/C,EAA6D;AAClE,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,iCAAiC,GAAjC,GAAuC,iDAApE;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;AACA,WAAO,gBAAgB,cAAhB,CAAP;AACD,GAJM,MAIA,IAAI,iBAAJ,EAAuB;AAC5B,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,iCAAiC,GAAjC,GAAuC,yBAApE;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,MAA5B,CAAmC,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,EAAqC,CAArC,CAAnC,CAA9B;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;AACA,WAAO,gBAAgB,cAAhB,CAAP;AACD,GALM,MAKA,IAAI,eAAe,SAAf,IAA4B,CAAC,QAAjC,EAA2C;AAChD,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,iCAAiC,GAAjC,GAAuC,yBAApE;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,MAA5B,CAAmC,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,EAAqC,CAArC,CAAnC,CAA9B;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;AACA,WAAO,gBAAgB,cAAhB,CAAP;AACD,GALM,MAKA,IAAI,CAAC,SAAD,IAAc,eAAe,YAAjC,EAA+C;AACpD,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,iCAAiC,GAAjC,GAAuC,uDAApE;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;AACA,WAAO,gBAAgB,cAAhB,CAAP;AACD,GAJM,MAIA,IAAI,CAAC,SAAL,EAAgB;AACrB,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,iCAAiC,GAAjC,GAAuC,+BAApE;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,MAA5B,CAAmC,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,EAAqC,CAArC,CAAnC,CAA9B;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;AACA,WAAO,gBAAgB,cAAhB,CAAP;AACD;;AAED,iBAAe,kBAAf,CAAkC,IAAlC,CAAuC,GAAvC;;AAEA,WAAS,UAAT,CAAoB,KAApB,EAA2B,cAA3B,EAA2C;AACzC,QAAI,KAAJ,EAAW;AACT,qBAAe,MAAf,CAAsB,IAAtB,CAA2B,oCAAoC,GAApC,GAA0C,MAA1C,GAAmD,KAA9E;;AAEA,aAAO,QAAQ,QAAR,CAAiB,YAAY;AAClC,uBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,MAA5B,CAAmC,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,EAAqC,CAArC,CAAnC,CAA9B;AACA,uBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;AACA,wBAAgB,cAAhB;AACD,OAJM,CAAP;AAKD;;AAED,mBAAe,MAAf,GAAwB,eAAe,eAAf,CAA+B,OAA/B,CAAuC,MAA/D;AACA,mBAAe,QAAf,GAA0B,IAA1B;;AAEA,mBAAe,eAAf,CAA+B,MAA/B,GAAwC,WAAxC;AACA,mBAAe,eAAf,CAA+B,cAA/B,CAA8C,GAA9C,IAAqD,cAArD;AACA,mBAAe,eAAf,CAA+B,KAA/B,CAAqC,YAArC,IAAqD,eAAe,MAApE;;AAEA,WAAO,WAAW,cAAX,EAA2B,eAAe,eAA1C,EAA2D,cAA3D,EAA2E,UAAU,cAAV,EAA0B;AAC1G,uBAAiB,YAAY,cAAZ,EAA4B,UAA5B,EAAwC,QAAxC,CAAjB;;AAEA,qBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,MAA5B,CAAmC,cAAnC,CAA9B;AACA,qBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;;AAEA,aAAO,gBAAgB,cAAhB,CAAP;AACD,KAPM,CAAP;AAQD;;AAED,SAAO,WACL,WAAW,IAAX,EAAiB,eAAe,eAAf,CAA+B,cAA/B,CAA8C,GAA9C,CAAjB,CADK,GAEL,eAAe,KAAf,CAAqB,GAArB,EAA0B,eAAe,aAAzC,EAAwD,eAAe,aAAvE,EAAsF,UAAtF,CAFF;AAGD;;AAED,SAAS,qBAAT,CAA+B,GAA/B,EAAoC,UAApC,EAAgD,QAAhD,EAA0D,cAA1D,EAA0E;AACxE,MAAI,cAAc,KAAK,OAAL,CAAa,EAAb,CAAlB;AACA,MAAI,cAAc,KAAK,UAAL,CAAgB,GAAhB,IAChB,KAAK,OAAL,CAAa,WAAb,EAA0B,IAAI,CAAJ,KAAU,GAAV,GAAgB,IAAI,SAAJ,CAAc,CAAd,CAAhB,GAAmC,GAA7D,CADgB,GAEhB,KAAK,OAAL,CAAa,eAAe,QAA5B,EAAsC,GAAtC,CAFF;AAGA,MAAI,wBAAwB,KAAK,QAAL,CAAc,WAAd,EAA2B,WAA3B,CAA5B;AACA,MAAI,cAAJ;AACA,MAAI,YAAY,kBAAkB,GAAlB,EAAuB,KAAvB,EAA8B,eAAe,MAA7C,CAAhB;AACA,MAAI,iBAAiB,cAAc,qBAAd,CAArB;AACA,MAAI,WAAW,kBAAkB,eAAe,eAAf,CAA+B,cAAhE;;AAEA,MAAI,eAAe,kBAAf,CAAkC,OAAlC,CAA0C,WAA1C,IAAyD,CAAC,CAA9D,EAAiE;AAC/D,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,gCAAgC,GAAhC,GAAsC,oCAAnE;AACD,GAFD,MAEO,IAAI,CAAC,QAAD,KAAc,CAAC,GAAG,UAAH,CAAc,WAAd,CAAD,IAA+B,CAAC,GAAG,QAAH,CAAY,WAAZ,EAAyB,MAAzB,EAA9C,CAAJ,EAAsF;AAC3F,mBAAe,MAAf,CAAsB,IAAtB,CAA2B,gCAAgC,GAAhC,GAAsC,2BAAjE;AACD,GAFM,MAEA,IAAI,CAAC,SAAD,IAAc,eAAe,YAAjC,EAA+C;AACpD,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,gCAAgC,GAAhC,GAAsC,uDAAnE;AACD,GAFM,MAEA,IAAI,eAAe,YAAnB,EAAiC;AACtC,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,gCAAgC,GAAhC,GAAsC,2BAAnE;AACD,GAFM,MAEA,IAAI,CAAC,SAAL,EAAgB;AACrB,mBAAe,QAAf,CAAwB,IAAxB,CAA6B,gCAAgC,GAAhC,GAAsC,+BAAnE;AACA,mBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,MAA5B,CAAmC,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,EAAqC,CAArC,CAAnC,CAA9B;AACD,GAHM,MAGA;AACL,qBAAiB,WACf,eAAe,eAAf,CAA+B,cAA/B,CAA8C,cAA9C,CADe,GAEf,GAAG,YAAH,CAAgB,WAAhB,EAA6B,OAA7B,CAFF;;AAIA,mBAAe,kBAAf,CAAkC,IAAlC,CAAuC,WAAvC;AACA,mBAAe,MAAf,GAAwB,eAAe,eAAf,CAA+B,OAA/B,CAAuC,MAA/D;;AAEA,mBAAe,eAAf,CAA+B,MAA/B,GAAwC,cAAxC;AACA,mBAAe,eAAf,CAA+B,cAA/B,CAA8C,cAA9C,IAAgE,cAAhE;AACA,mBAAe,eAAf,CAA+B,KAA/B,CAAqC,YAArC,IAAqD,eAAe,MAApE;;AAEA,WAAO,WAAW,cAAX,EAA2B,eAAe,eAA1C,EAA2D,cAA3D,EAA2E,UAAU,cAAV,EAA0B;AAC1G,uBAAiB,YAAY,cAAZ,EAA4B,UAA5B,EAAwC,QAAxC,CAAjB;;AAEA,qBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,MAA5B,CAAmC,cAAnC,CAA9B;AACA,qBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;;AAEA,aAAO,gBAAgB,cAAhB,CAAP;AACD,KAPM,CAAP;AAQD;;AAED,iBAAe,YAAf,GAA8B,eAAe,YAAf,CAA4B,KAA5B,CAAkC,CAAlC,CAA9B;;AAEA,SAAO,gBAAgB,cAAhB,CAAP;AACD;;AAED,SAAS,WAAT,CAAqB,MAArB,EAA6B,UAA7B,EAAyC,QAAzC,EAAmD;AACjD,MAAI,UAAJ,EAAgB;AACd,WAAO,CAAC,CAAC,MAAM,YAAP,EAAqB,CAAC,CAAC,MAAM,kBAAP,EAA2B,YAAY,UAAvC,EAAmD,QAAnD,CAAD,CAArB,EAAqF,MAArF,CAAD,CAAP;AACD,GAFD,MAEO;AACL,WAAO,MAAP;AACD;AACF;;AAED,OAAO,OAAP,GAAiB,WAAjB","file":"read-sources-compiled.js","sourcesContent":["var fs = require('fs');\nvar path = require('path');\n\nvar applySourceMaps = require('./apply-source-maps');\nvar extractImportUrlAndMedia = require('./extract-import-url-and-media');\nvar isAllowedResource = require('./is-allowed-resource');\nvar loadOriginalSources = require('./load-original-sources');\nvar normalizePath = require('./normalize-path');\nvar rebase = require('./rebase');\nvar rebaseLocalMap = require('./rebase-local-map');\nvar rebaseRemoteMap = require('./rebase-remote-map');\nvar restoreImport = require('./restore-import');\n\nvar tokenize = require('../tokenizer/tokenize');\nvar Token = require('../tokenizer/token');\nvar Marker = require('../tokenizer/marker');\nvar hasProtocol = require('../utils/has-protocol');\nvar isImport = require('../utils/is-import');\nvar isRemoteResource = require('../utils/is-remote-resource');\n\nvar UNKNOWN_URI = 'uri:unknown';\n\nfunction readSources(input, context, callback) {\n  return doReadSources(input, context, function (tokens) {\n    return applySourceMaps(tokens, context, function () {\n      return loadOriginalSources(context, function () { return callback(tokens); });\n    });\n  });\n}\n\nfunction doReadSources(input, context, callback) {\n  if (typeof input == 'string') {\n    return fromString(input, context, callback);\n  } else if (Buffer.isBuffer(input)) {\n    return fromString(input.toString(), context, callback);\n  } else if (Array.isArray(input)) {\n    return fromArray(input, context, callback);\n  } else if (typeof input == 'object') {\n    return fromHash(input, context, callback);\n  }\n}\n\nfunction fromString(input, context, callback) {\n  context.source = undefined;\n  context.sourcesContent[undefined] = input;\n  context.stats.originalSize += input.length;\n\n  return fromStyles(input, context, { inline: context.options.inline }, callback);\n}\n\nfunction fromArray(input, context, callback) {\n  var inputAsImports = input.reduce(function (accumulator, uriOrHash) {\n    if (typeof uriOrHash === 'string') {\n      return addStringSource(uriOrHash, accumulator);\n    } else {\n      return addHashSource(uriOrHash, context, accumulator);\n    }\n\n  }, []);\n\n  return fromStyles(inputAsImports.join(''), context, { inline: ['all'] }, callback);\n}\n\nfunction fromHash(input, context, callback) {\n  var inputAsImports = addHashSource(input, context, []);\n  return fromStyles(inputAsImports.join(''), context, { inline: ['all'] }, callback);\n}\n\nfunction addStringSource(input, imports) {\n  imports.push(restoreAsImport(normalizeUri(input)));\n  return imports;\n}\n\nfunction addHashSource(input, context, imports) {\n  var uri;\n  var normalizedUri;\n  var source;\n\n  for (uri in input) {\n    source = input[uri];\n    normalizedUri = normalizeUri(uri);\n\n    imports.push(restoreAsImport(normalizedUri));\n\n    context.sourcesContent[normalizedUri] = source.styles;\n\n    if (source.sourceMap) {\n      trackSourceMap(source.sourceMap, normalizedUri, context);\n    }\n  }\n\n  return imports;\n}\n\nfunction normalizeUri(uri) {\n  var currentPath = path.resolve('');\n  var absoluteUri;\n  var relativeToCurrentPath;\n  var normalizedUri;\n\n  if (isRemoteResource(uri)) {\n    return uri;\n  }\n\n  absoluteUri = path.isAbsolute(uri) ?\n    uri :\n    path.resolve(uri);\n  relativeToCurrentPath = path.relative(currentPath, absoluteUri);\n  normalizedUri = normalizePath(relativeToCurrentPath);\n\n  return normalizedUri;\n}\n\nfunction trackSourceMap(sourceMap, uri, context) {\n  var parsedMap = typeof sourceMap == 'string' ?\n      JSON.parse(sourceMap) :\n      sourceMap;\n  var rebasedMap = isRemoteResource(uri) ?\n    rebaseRemoteMap(parsedMap, uri) :\n    rebaseLocalMap(parsedMap, uri || UNKNOWN_URI, context.options.rebaseTo);\n\n  context.inputSourceMapTracker.track(uri, rebasedMap);\n}\n\nfunction restoreAsImport(uri) {\n  return restoreImport('url(' + uri + ')', '') + Marker.SEMICOLON;\n}\n\nfunction fromStyles(styles, context, parentInlinerContext, callback) {\n  var tokens;\n  var rebaseConfig = {};\n\n  if (!context.source) {\n    rebaseConfig.fromBase = path.resolve('');\n    rebaseConfig.toBase = context.options.rebaseTo;\n  } else if (isRemoteResource(context.source)) {\n    rebaseConfig.fromBase = context.source;\n    rebaseConfig.toBase = context.source;\n  } else if (path.isAbsolute(context.source)) {\n    rebaseConfig.fromBase = path.dirname(context.source);\n    rebaseConfig.toBase = context.options.rebaseTo;\n  } else {\n    rebaseConfig.fromBase = path.dirname(path.resolve(context.source));\n    rebaseConfig.toBase = context.options.rebaseTo;\n  }\n\n  tokens = tokenize(styles, context);\n  tokens = rebase(tokens, context.options.rebase, context.validator, rebaseConfig);\n\n  return allowsAnyImports(parentInlinerContext.inline) ?\n    inline(tokens, context, parentInlinerContext, callback) :\n    callback(tokens);\n}\n\nfunction allowsAnyImports(inline) {\n  return !(inline.length == 1 && inline[0] == 'none');\n}\n\nfunction inline(tokens, externalContext, parentInlinerContext, callback) {\n  var inlinerContext = {\n    afterContent: false,\n    callback: callback,\n    errors: externalContext.errors,\n    externalContext: externalContext,\n    fetch: externalContext.options.fetch,\n    inlinedStylesheets: parentInlinerContext.inlinedStylesheets || externalContext.inlinedStylesheets,\n    inline: parentInlinerContext.inline,\n    inlineRequest: externalContext.options.inlineRequest,\n    inlineTimeout: externalContext.options.inlineTimeout,\n    isRemote: parentInlinerContext.isRemote || false,\n    localOnly: externalContext.localOnly,\n    outputTokens: [],\n    rebaseTo: externalContext.options.rebaseTo,\n    sourceTokens: tokens,\n    warnings: externalContext.warnings\n  };\n\n  return doInlineImports(inlinerContext);\n}\n\nfunction doInlineImports(inlinerContext) {\n  var token;\n  var i, l;\n\n  for (i = 0, l = inlinerContext.sourceTokens.length; i < l; i++) {\n    token = inlinerContext.sourceTokens[i];\n\n    if (token[0] == Token.AT_RULE && isImport(token[1])) {\n      inlinerContext.sourceTokens.splice(0, i);\n      return inlineStylesheet(token, inlinerContext);\n    } else if (token[0] == Token.AT_RULE || token[0] == Token.COMMENT) {\n      inlinerContext.outputTokens.push(token);\n    } else {\n      inlinerContext.outputTokens.push(token);\n      inlinerContext.afterContent = true;\n    }\n  }\n\n  inlinerContext.sourceTokens = [];\n  return inlinerContext.callback(inlinerContext.outputTokens);\n}\n\nfunction inlineStylesheet(token, inlinerContext) {\n  var uriAndMediaQuery = extractImportUrlAndMedia(token[1]);\n  var uri = uriAndMediaQuery[0];\n  var mediaQuery = uriAndMediaQuery[1];\n  var metadata = token[2];\n\n  return isRemoteResource(uri) ?\n    inlineRemoteStylesheet(uri, mediaQuery, metadata, inlinerContext) :\n    inlineLocalStylesheet(uri, mediaQuery, metadata, inlinerContext);\n}\n\nfunction inlineRemoteStylesheet(uri, mediaQuery, metadata, inlinerContext) {\n  var isAllowed = isAllowedResource(uri, true, inlinerContext.inline);\n  var originalUri = uri;\n  var isLoaded = uri in inlinerContext.externalContext.sourcesContent;\n  var isRuntimeResource = !hasProtocol(uri);\n\n  if (inlinerContext.inlinedStylesheets.indexOf(uri) > -1) {\n    inlinerContext.warnings.push('Ignoring remote @import of \"' + uri + '\" as it has already been imported.');\n    inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n    return doInlineImports(inlinerContext);\n  } else if (inlinerContext.localOnly && inlinerContext.afterContent) {\n    inlinerContext.warnings.push('Ignoring remote @import of \"' + uri + '\" as no callback given and after other content.');\n    inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n    return doInlineImports(inlinerContext);\n  } else if (isRuntimeResource) {\n    inlinerContext.warnings.push('Skipping remote @import of \"' + uri + '\" as no protocol given.');\n    inlinerContext.outputTokens = inlinerContext.outputTokens.concat(inlinerContext.sourceTokens.slice(0, 1));\n    inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n    return doInlineImports(inlinerContext);\n  } else if (inlinerContext.localOnly && !isLoaded) {\n    inlinerContext.warnings.push('Skipping remote @import of \"' + uri + '\" as no callback given.');\n    inlinerContext.outputTokens = inlinerContext.outputTokens.concat(inlinerContext.sourceTokens.slice(0, 1));\n    inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n    return doInlineImports(inlinerContext);\n  } else if (!isAllowed && inlinerContext.afterContent) {\n    inlinerContext.warnings.push('Ignoring remote @import of \"' + uri + '\" as resource is not allowed and after other content.');\n    inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n    return doInlineImports(inlinerContext);\n  } else if (!isAllowed) {\n    inlinerContext.warnings.push('Skipping remote @import of \"' + uri + '\" as resource is not allowed.');\n    inlinerContext.outputTokens = inlinerContext.outputTokens.concat(inlinerContext.sourceTokens.slice(0, 1));\n    inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n    return doInlineImports(inlinerContext);\n  }\n\n  inlinerContext.inlinedStylesheets.push(uri);\n\n  function whenLoaded(error, importedStyles) {\n    if (error) {\n      inlinerContext.errors.push('Broken @import declaration of \"' + uri + '\" - ' + error);\n\n      return process.nextTick(function () {\n        inlinerContext.outputTokens = inlinerContext.outputTokens.concat(inlinerContext.sourceTokens.slice(0, 1));\n        inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n        doInlineImports(inlinerContext);\n      });\n    }\n\n    inlinerContext.inline = inlinerContext.externalContext.options.inline;\n    inlinerContext.isRemote = true;\n\n    inlinerContext.externalContext.source = originalUri;\n    inlinerContext.externalContext.sourcesContent[uri] = importedStyles;\n    inlinerContext.externalContext.stats.originalSize += importedStyles.length;\n\n    return fromStyles(importedStyles, inlinerContext.externalContext, inlinerContext, function (importedTokens) {\n      importedTokens = wrapInMedia(importedTokens, mediaQuery, metadata);\n\n      inlinerContext.outputTokens = inlinerContext.outputTokens.concat(importedTokens);\n      inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n\n      return doInlineImports(inlinerContext);\n    });\n  }\n\n  return isLoaded ?\n    whenLoaded(null, inlinerContext.externalContext.sourcesContent[uri]) :\n    inlinerContext.fetch(uri, inlinerContext.inlineRequest, inlinerContext.inlineTimeout, whenLoaded);\n}\n\nfunction inlineLocalStylesheet(uri, mediaQuery, metadata, inlinerContext) {\n  var currentPath = path.resolve('');\n  var absoluteUri = path.isAbsolute(uri) ?\n    path.resolve(currentPath, uri[0] == '/' ? uri.substring(1) : uri) :\n    path.resolve(inlinerContext.rebaseTo, uri);\n  var relativeToCurrentPath = path.relative(currentPath, absoluteUri);\n  var importedStyles;\n  var isAllowed = isAllowedResource(uri, false, inlinerContext.inline);\n  var normalizedPath = normalizePath(relativeToCurrentPath);\n  var isLoaded = normalizedPath in inlinerContext.externalContext.sourcesContent;\n\n  if (inlinerContext.inlinedStylesheets.indexOf(absoluteUri) > -1) {\n    inlinerContext.warnings.push('Ignoring local @import of \"' + uri + '\" as it has already been imported.');\n  } else if (!isLoaded && (!fs.existsSync(absoluteUri) || !fs.statSync(absoluteUri).isFile())) {\n    inlinerContext.errors.push('Ignoring local @import of \"' + uri + '\" as resource is missing.');\n  } else if (!isAllowed && inlinerContext.afterContent) {\n    inlinerContext.warnings.push('Ignoring local @import of \"' + uri + '\" as resource is not allowed and after other content.');\n  } else if (inlinerContext.afterContent) {\n    inlinerContext.warnings.push('Ignoring local @import of \"' + uri + '\" as after other content.');\n  } else if (!isAllowed) {\n    inlinerContext.warnings.push('Skipping local @import of \"' + uri + '\" as resource is not allowed.');\n    inlinerContext.outputTokens = inlinerContext.outputTokens.concat(inlinerContext.sourceTokens.slice(0, 1));\n  } else {\n    importedStyles = isLoaded ?\n      inlinerContext.externalContext.sourcesContent[normalizedPath] :\n      fs.readFileSync(absoluteUri, 'utf-8');\n\n    inlinerContext.inlinedStylesheets.push(absoluteUri);\n    inlinerContext.inline = inlinerContext.externalContext.options.inline;\n\n    inlinerContext.externalContext.source = normalizedPath;\n    inlinerContext.externalContext.sourcesContent[normalizedPath] = importedStyles;\n    inlinerContext.externalContext.stats.originalSize += importedStyles.length;\n\n    return fromStyles(importedStyles, inlinerContext.externalContext, inlinerContext, function (importedTokens) {\n      importedTokens = wrapInMedia(importedTokens, mediaQuery, metadata);\n\n      inlinerContext.outputTokens = inlinerContext.outputTokens.concat(importedTokens);\n      inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n\n      return doInlineImports(inlinerContext);\n    });\n  }\n\n  inlinerContext.sourceTokens = inlinerContext.sourceTokens.slice(1);\n\n  return doInlineImports(inlinerContext);\n}\n\nfunction wrapInMedia(tokens, mediaQuery, metadata) {\n  if (mediaQuery) {\n    return [[Token.NESTED_BLOCK, [[Token.NESTED_BLOCK_SCOPE, '@media ' + mediaQuery, metadata]], tokens]];\n  } else {\n    return tokens;\n  }\n}\n\nmodule.exports = readSources;\n"]}
{"version":3,"sources":["restore-from-optimizing.js"],"names":[],"mappings":"AAAA,IAAI,OAAO,QAAQ,QAAR,CAAX;;AAEA,IAAI,SAAS,QAAQ,qBAAR,CAAb;;AAEA,IAAI,gBAAgB,GAApB;AACA,IAAI,iBAAiB,IAArB;AACA,IAAI,kBAAkB,YAAtB;AACA,IAAI,kBAAkB,GAAtB;AACA,IAAI,YAAY,KAAhB;;AAEA,SAAS,qBAAT,CAA+B,UAA/B,EAA2C,eAA3C,EAA4D;AAC1D,MAAI,QAAJ;AACA,MAAI,QAAJ;AACA,MAAI,OAAJ;AACA,MAAI,CAAJ;;AAEA,OAAK,IAAI,WAAW,MAAX,GAAoB,CAA7B,EAAgC,KAAK,CAArC,EAAwC,GAAxC,EAA6C;AAC3C,eAAW,WAAW,CAAX,CAAX;;AAEA,QAAI,SAAS,MAAb,EAAqB;AACnB;AACD;;AAED,QAAI,CAAC,SAAS,KAAV,IAAmB,CAAC,SAAS,SAA7B,IAA0C,CAAC,SAAS,IAAxD,EAA8D;AAC5D;AACD;;AAED,QAAI,eAAJ,EAAqB;AACnB,iBAAW,gBAAgB,QAAhB,CAAX;AACA,eAAS,KAAT,GAAiB,QAAjB;AACD,KAHD,MAGO;AACL,iBAAW,SAAS,KAApB;AACD;;AAED,QAAI,SAAS,SAAb,EAAwB;AACtB,uBAAiB,QAAjB;AACD;;AAED,QAAI,SAAS,IAAb,EAAmB;AACjB,kBAAY,QAAZ;AACD;;AAED,QAAI,SAAS,QAAb,EAAuB;AACrB,gBAAU,SAAS,GAAT,CAAa,SAAS,QAAtB,CAAV;AACA,cAAQ,CAAR,EAAW,CAAX,IAAgB,SAAS,IAAzB;;AAEA,cAAQ,MAAR,CAAe,CAAf,EAAkB,QAAQ,MAAR,GAAiB,CAAnC;AACA,YAAM,SAAN,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,OAA3B,EAAoC,QAApC;AACD;AACF;AACF;;AAED,SAAS,gBAAT,CAA0B,QAA1B,EAAoC;AAClC,WAAS,KAAT,CAAe,SAAS,KAAT,CAAe,MAAf,GAAwB,CAAvC,EAA0C,CAA1C,KAAgD,eAAhD;AACD;;AAED,SAAS,WAAT,CAAqB,QAArB,EAA+B;AAC7B,MAAI,SAAS,IAAT,CAAc,CAAd,KAAoB,KAAK,UAA7B,EAAyC;AACvC,aAAS,IAAT,GAAgB,kBAAkB,SAAS,IAA3C;AACD,GAFD,MAEO,IAAI,SAAS,IAAT,CAAc,CAAd,KAAoB,KAAK,QAA7B,EAAuC;AAC5C,aAAS,IAAT,GAAgB,gBAAgB,SAAS,IAAzC;AACD,GAFM,MAEA,IAAI,SAAS,IAAT,CAAc,CAAd,KAAoB,KAAK,SAA7B,EAAwC;AAC7C,aAAS,KAAT,CAAe,SAAS,KAAT,CAAe,MAAf,GAAwB,CAAvC,EAA0C,CAA1C,KAAgD,iBAAiB,SAAS,IAAT,CAAc,CAAd,CAAjE;AACD,GAFM,MAEA,IAAI,SAAS,IAAT,CAAc,CAAd,KAAoB,KAAK,IAA7B,EAAmC;AACxC,aAAS,KAAT,CAAe,SAAS,KAAT,CAAe,MAAf,GAAwB,CAAvC,EAA0C,CAA1C,KAAgD,OAAO,KAAP,GAAe,SAA/D;AACD;AACF;;AAED,OAAO,OAAP,GAAiB,qBAAjB","file":"restore-from-optimizing-compiled.js","sourcesContent":["var Hack = require('./hack');\n\nvar Marker = require('../tokenizer/marker');\n\nvar ASTERISK_HACK = '*';\nvar BACKSLASH_HACK = '\\\\';\nvar IMPORTANT_TOKEN = '!important';\nvar UNDERSCORE_HACK = '_';\nvar BANG_HACK = '!ie';\n\nfunction restoreFromOptimizing(properties, restoreCallback) {\n  var property;\n  var restored;\n  var current;\n  var i;\n\n  for (i = properties.length - 1; i >= 0; i--) {\n    property = properties[i];\n\n    if (property.unused) {\n      continue;\n    }\n\n    if (!property.dirty && !property.important && !property.hack) {\n      continue;\n    }\n\n    if (restoreCallback) {\n      restored = restoreCallback(property);\n      property.value = restored;\n    } else {\n      restored = property.value;\n    }\n\n    if (property.important) {\n      restoreImportant(property);\n    }\n\n    if (property.hack) {\n      restoreHack(property);\n    }\n\n    if ('all' in property) {\n      current = property.all[property.position];\n      current[1][1] = property.name;\n\n      current.splice(2, current.length - 1);\n      Array.prototype.push.apply(current, restored);\n    }\n  }\n}\n\nfunction restoreImportant(property) {\n  property.value[property.value.length - 1][1] += IMPORTANT_TOKEN;\n}\n\nfunction restoreHack(property) {\n  if (property.hack[0] == Hack.UNDERSCORE) {\n    property.name = UNDERSCORE_HACK + property.name;\n  } else if (property.hack[0] == Hack.ASTERISK) {\n    property.name = ASTERISK_HACK + property.name;\n  } else if (property.hack[0] == Hack.BACKSLASH) {\n    property.value[property.value.length - 1][1] += BACKSLASH_HACK + property.hack[1];\n  } else if (property.hack[0] == Hack.BANG) {\n    property.value[property.value.length - 1][1] += Marker.SPACE + BANG_HACK;\n  }\n}\n\nmodule.exports = restoreFromOptimizing;\n"]}
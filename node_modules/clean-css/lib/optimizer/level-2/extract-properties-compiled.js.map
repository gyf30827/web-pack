{"version":3,"sources":["extract-properties.js"],"names":[],"mappings":"AAAA;AACA;AACA;;AAEA,IAAI,QAAQ,QAAQ,uBAAR,CAAZ;AACA,IAAI,iBAAiB,QAAQ,uBAAR,EAAiC,KAAtD;AACA,IAAI,iBAAiB,QAAQ,uBAAR,EAAiC,KAAtD;;AAEA,SAAS,iBAAT,CAA2B,KAA3B,EAAkC;AAChC,MAAI,aAAa,EAAjB;AACA,MAAI,kBAAJ;AACA,MAAI,QAAJ;AACA,MAAI,IAAJ;AACA,MAAI,KAAJ;AACA,MAAI,CAAJ,EAAO,CAAP;;AAEA,MAAI,MAAM,CAAN,KAAY,MAAM,IAAtB,EAA4B;AAC1B,yBAAqB,CAAC,WAAW,IAAX,CAAgB,eAAe,MAAM,CAAN,CAAf,CAAhB,CAAtB;;AAEA,SAAK,IAAI,CAAJ,EAAO,IAAI,MAAM,CAAN,EAAS,MAAzB,EAAiC,IAAI,CAArC,EAAwC,GAAxC,EAA6C;AAC3C,iBAAW,MAAM,CAAN,EAAS,CAAT,CAAX;;AAEA,UAAI,SAAS,CAAT,KAAe,MAAM,QAAzB,EACE;;AAEF,aAAO,SAAS,CAAT,EAAY,CAAZ,CAAP;AACA,UAAI,KAAK,MAAL,KAAgB,CAApB,EACE;;AAEF,UAAI,KAAK,OAAL,CAAa,IAAb,MAAuB,CAA3B,EACE;;AAEF,cAAQ,eAAe,QAAf,EAAyB,CAAzB,CAAR;;AAEA,iBAAW,IAAX,CAAgB,CACd,IADc,EAEd,KAFc,EAGd,aAAa,IAAb,CAHc,EAId,MAAM,CAAN,EAAS,CAAT,CAJc,EAKd,OAAO,GAAP,GAAa,KALC,EAMd,MAAM,CAAN,CANc,EAOd,kBAPc,CAAhB;AASD;AACF,GA5BD,MA4BO,IAAI,MAAM,CAAN,KAAY,MAAM,YAAtB,EAAoC;AACzC,SAAK,IAAI,CAAJ,EAAO,IAAI,MAAM,CAAN,EAAS,MAAzB,EAAiC,IAAI,CAArC,EAAwC,GAAxC,EAA6C;AAC3C,mBAAa,WAAW,MAAX,CAAkB,kBAAkB,MAAM,CAAN,EAAS,CAAT,CAAlB,CAAlB,CAAb;AACD;AACF;;AAED,SAAO,UAAP;AACD;;AAED,SAAS,YAAT,CAAsB,IAAtB,EAA4B;AAC1B,MAAI,QAAQ,YAAZ,EACE,OAAO,IAAP;AACF,MAAI,KAAK,OAAL,CAAa,SAAb,IAA0B,CAA9B,EACE,OAAO,eAAP;AACF,MAAI,QAAQ,iBAAR,IAA6B,QAAQ,gBAArC,IAAyD,QAAQ,cAArE,EACE,OAAO,IAAP;AACF,MAAI,KAAK,OAAL,CAAa,SAAb,MAA4B,CAA5B,IAAiC,qBAAqB,IAArB,CAA0B,IAA1B,CAArC,EACE,OAAO,KAAK,KAAL,CAAW,aAAX,EAA0B,CAA1B,CAAP;AACF,MAAI,KAAK,OAAL,CAAa,SAAb,MAA4B,CAA5B,IAAiC,gBAAgB,IAAhB,CAAqB,IAArB,CAArC,EACE,OAAO,QAAP;AACF,MAAI,KAAK,OAAL,CAAa,OAAb,MAA0B,CAA9B,EACE,OAAO,IAAP;AACF,MAAI,QAAQ,UAAZ,EACE,OAAO,IAAP;;AAEF,SAAO,KAAK,OAAL,CAAa,UAAb,EAAyB,EAAzB,EAA6B,KAA7B,CAAmC,aAAnC,EAAkD,CAAlD,EAAqD,WAArD,EAAP;AACD;;AAED,OAAO,OAAP,GAAiB,iBAAjB","file":"extract-properties-compiled.js","sourcesContent":["// This extractor is used in level 2 optimizations\n// IMPORTANT: Mind Token class and this code is not related!\n// Properties will be tokenized in one step, see #429\n\nvar Token = require('../../tokenizer/token');\nvar serializeRules = require('../../writer/one-time').rules;\nvar serializeValue = require('../../writer/one-time').value;\n\nfunction extractProperties(token) {\n  var properties = [];\n  var inSpecificSelector;\n  var property;\n  var name;\n  var value;\n  var i, l;\n\n  if (token[0] == Token.RULE) {\n    inSpecificSelector = !/[\\.\\+>~]/.test(serializeRules(token[1]));\n\n    for (i = 0, l = token[2].length; i < l; i++) {\n      property = token[2][i];\n\n      if (property[0] != Token.PROPERTY)\n        continue;\n\n      name = property[1][1];\n      if (name.length === 0)\n        continue;\n\n      if (name.indexOf('--') === 0)\n        continue;\n\n      value = serializeValue(property, i);\n\n      properties.push([\n        name,\n        value,\n        findNameRoot(name),\n        token[2][i],\n        name + ':' + value,\n        token[1],\n        inSpecificSelector\n      ]);\n    }\n  } else if (token[0] == Token.NESTED_BLOCK) {\n    for (i = 0, l = token[2].length; i < l; i++) {\n      properties = properties.concat(extractProperties(token[2][i]));\n    }\n  }\n\n  return properties;\n}\n\nfunction findNameRoot(name) {\n  if (name == 'list-style')\n    return name;\n  if (name.indexOf('-radius') > 0)\n    return 'border-radius';\n  if (name == 'border-collapse' || name == 'border-spacing' || name == 'border-image')\n    return name;\n  if (name.indexOf('border-') === 0 && /^border\\-\\w+\\-\\w+$/.test(name))\n    return name.match(/border\\-\\w+/)[0];\n  if (name.indexOf('border-') === 0 && /^border\\-\\w+$/.test(name))\n    return 'border';\n  if (name.indexOf('text-') === 0)\n    return name;\n  if (name == '-chrome-')\n    return name;\n\n  return name.replace(/^\\-\\w+\\-/, '').match(/([a-zA-Z]+)/)[0].toLowerCase();\n}\n\nmodule.exports = extractProperties;\n"]}
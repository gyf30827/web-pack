{"version":3,"sources":["he"],"names":[],"mappings":"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","file":"he-compiled.js","sourcesContent":["\n(function() {\n\n\tvar fs = require('fs');\n\tvar he = require('../he.js');\n\tvar strings = process.argv.splice(2);\n\tvar stdin = process.stdin;\n\tvar data;\n\tvar timeout;\n\tvar action;\n\tvar options = {};\n\tvar log = console.log;\n\n\tvar main = function() {\n\t\tvar option = strings[0];\n\t\tvar count = 0;\n\n\t\tif (/^(?:-h|--help|undefined)$/.test(option)) {\n\t\t\tlog(\n\t\t\t\t'he v%s - https://mths.be/he',\n\t\t\t\the.version\n\t\t\t);\n\t\t\tlog([\n\t\t\t\t'\\nUsage:\\n',\n\t\t\t\t'\\the [--escape] string',\n\t\t\t\t'\\the [--encode] [--use-named-refs] [--everything] [--allow-unsafe] [--decimal] string',\n\t\t\t\t'\\the [--decode] [--attribute] [--strict] string',\n\t\t\t\t'\\the [-v | --version]',\n\t\t\t\t'\\the [-h | --help]',\n\t\t\t\t'\\nExamples:\\n',\n\t\t\t\t'\\the --escape \\\\<img\\\\ src\\\\=\\\\\\'x\\\\\\'\\\\ onerror\\\\=\\\\\"prompt\\\\(1\\\\)\\\\\"\\\\>',\n\t\t\t\t'\\techo \\'&copy; &#x1D306;\\' | he --decode'\n\t\t\t].join('\\n'));\n\t\t\treturn process.exit(option ? 0 : 1);\n\t\t}\n\n\t\tif (/^(?:-v|--version)$/.test(option)) {\n\t\t\tlog('v%s', he.version);\n\t\t\treturn process.exit(0);\n\t\t}\n\n\t\tstrings.forEach(function(string) {\n\t\t\t// Process options\n\t\t\tif (string == '--escape') {\n\t\t\t\taction = 'escape';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--encode') {\n\t\t\t\taction = 'encode';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--use-named-refs') {\n\t\t\t\taction = 'encode';\n\t\t\t\toptions.useNamedReferences = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--everything') {\n\t\t\t\taction = 'encode';\n\t\t\t\toptions.encodeEverything = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--allow-unsafe') {\n\t\t\t\taction = 'encode';\n\t\t\t\toptions.allowUnsafeSymbols = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--decimal') {\n\t\t\t\taction = 'encode';\n\t\t\t\toptions.decimal = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--decode') {\n\t\t\t\taction = 'decode';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--attribute') {\n\t\t\t\taction = 'decode';\n\t\t\t\toptions.isAttributeValue = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--strict') {\n\t\t\t\taction = 'decode';\n\t\t\t\toptions.strict = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Process string(s)\n\t\t\tvar result;\n\t\t\tif (!action) {\n\t\t\t\tlog('Error: he requires at least one option and a string argument.');\n\t\t\t\tlog('Try `he --help` for more information.');\n\t\t\t\treturn process.exit(1);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tresult = he[action](string, options);\n\t\t\t\tlog(result);\n\t\t\t\tcount++;\n\t\t\t} catch(error) {\n\t\t\t\tlog(error.message + '\\n');\n\t\t\t\tlog('Error: failed to %s.', action);\n\t\t\t\tlog('If you think this is a bug in he, please report it:');\n\t\t\t\tlog('https://github.com/mathiasbynens/he/issues/new');\n\t\t\t\tlog(\n\t\t\t\t\t'\\nStack trace using he@%s:\\n',\n\t\t\t\t\the.version\n\t\t\t\t);\n\t\t\t\tlog(error.stack);\n\t\t\t\treturn process.exit(1);\n\t\t\t}\n\t\t});\n\t\tif (!count) {\n\t\t\tlog('Error: he requires a string argument.');\n\t\t\tlog('Try `he --help` for more information.');\n\t\t\treturn process.exit(1);\n\t\t}\n\t\t// Return with exit status 0 outside of the `forEach` loop, in case\n\t\t// multiple strings were passed in.\n\t\treturn process.exit(0);\n\t};\n\n\tif (stdin.isTTY) {\n\t\t// handle shell arguments\n\t\tmain();\n\t} else {\n\t\t// Either the script is called from within a non-TTY context, or `stdin`\n\t\t// content is being piped in.\n\t\tif (!process.stdout.isTTY) {\n\t\t\t// The script was called from a non-TTY context. This is a rather uncommon\n\t\t\t// use case we don’t actively support. However, we don’t want the script\n\t\t\t// to wait forever in such cases, so…\n\t\t\ttimeout = setTimeout(function() {\n\t\t\t\t// …if no piped data arrived after a whole minute, handle shell\n\t\t\t\t// arguments instead.\n\t\t\t\tmain();\n\t\t\t}, 60000);\n\t\t}\n\t\tdata = '';\n\t\tstdin.on('data', function(chunk) {\n\t\t\tclearTimeout(timeout);\n\t\t\tdata += chunk;\n\t\t});\n\t\tstdin.on('end', function() {\n\t\t\tstrings.push(data.trim());\n\t\t\tmain();\n\t\t});\n\t\tstdin.resume();\n\t}\n\n}());\n"]}